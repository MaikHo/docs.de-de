---
ms.openlocfilehash: e9f769af6d85403c2a6f085cbc3462cf549adae9
ms.sourcegitcommit: cbacb5d2cebbf044547f6af6e74a9de866800985
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 09/05/2020
ms.locfileid: "89497439"
---
### <a name="wpf-treeviewitem-must-be-used-within-a-treeview"></a><span data-ttu-id="ea38a-101">WPF TreeViewItem muss in einem TreeView-Steuerelement verwendet werden</span><span class="sxs-lookup"><span data-stu-id="ea38a-101">WPF TreeViewItem must be used within a TreeView</span></span>

#### <a name="details"></a><span data-ttu-id="ea38a-102">Details</span><span class="sxs-lookup"><span data-stu-id="ea38a-102">Details</span></span>

<span data-ttu-id="ea38a-103">In .NET Framework 4.5 wurde eine Änderung eingeführt, die die Verwendung von <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName>-Elementen außerhalb eines <xref:System.Windows.Controls.TreeView?displayProperty=fullName>-Steuerelements einschränkt.</span><span class="sxs-lookup"><span data-stu-id="ea38a-103">A change was introduced in 4.5 that restricts usage of <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> elements outside of a <xref:System.Windows.Controls.TreeView?displayProperty=fullName>.</span></span> <span data-ttu-id="ea38a-104">Dieser Fall kann unter den folgenden Bedingungen eintreten:</span><span class="sxs-lookup"><span data-stu-id="ea38a-104">This manifests under the following conditions:</span></span><ul><li><span data-ttu-id="ea38a-105">Das visuelle übergeordnete Element von <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> ist kein Panel.</span><span class="sxs-lookup"><span data-stu-id="ea38a-105"><xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName>'s visual parent is not a panel.</span></span> <span data-ttu-id="ea38a-106">(Ein für <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> generiertes <xref:System.Windows.Controls.TreeView?displayProperty=fullName>-Steuerelement weist einen Panel als dessen übergeordnetes Element auf.)</span><span class="sxs-lookup"><span data-stu-id="ea38a-106">(A <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> generated for a <xref:System.Windows.Controls.TreeView?displayProperty=fullName> will have a panel as its parent)</span></span></li><li><span data-ttu-id="ea38a-107">Das <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName>-Element ist ein Nachfolgeelement von <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName>, das als &quot;Elementhost&quot; für ein Listensteuerelement (ListBox, DataGrid, ListView usw.) fungiert.</span><span class="sxs-lookup"><span data-stu-id="ea38a-107">The <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> is a descendant of a <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName> acting as the &quot;items host&quot; for a list control (ListBox, DataGrid, ListView, etc.).</span></span> <span data-ttu-id="ea38a-108">Die Virtualisierung muss nicht aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="ea38a-108">Virtualization doesn't need to be enabled.</span></span></li><li><span data-ttu-id="ea38a-109">Das <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName>-Element wird zum Elementscrolling (<code>ScrollUnit=&quot;Item&quot;</code>) verwendet.</span><span class="sxs-lookup"><span data-stu-id="ea38a-109">The <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName> is item-scrolling (<code>ScrollUnit=&quot;Item&quot;</code>).</span></span></li><li><span data-ttu-id="ea38a-110">Jemand ruft <code>VirtualizingStackPanel.MakeVisible(v)</code> auf, um ein Element <code>v</code> in eine Ansicht zu scrollen.</span><span class="sxs-lookup"><span data-stu-id="ea38a-110">Someone calls <code>VirtualizingStackPanel.MakeVisible(v)</code> to scroll an element <code>v</code> into view.</span></span> <span data-ttu-id="ea38a-111">Dies kann auf verschiedene Arten explizit oder implizit erfolgen. Die am häufigsten verwendeten Methode ist möglicherweise einfach das Klicken auf <code>v</code>, damit es den Tastaturfokus erhält.</span><span class="sxs-lookup"><span data-stu-id="ea38a-111">This can be done explicitly, or implicitly in a number of ways; perhaps the most common way is simply clicking on <code>v</code> to give it the keyboard focus.</span></span></li><li><span data-ttu-id="ea38a-112">Die visuelle Kette des übergeordneten <code>v</code>-Elements zu <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName> wird über das <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName>-Element übergeben.</span><span class="sxs-lookup"><span data-stu-id="ea38a-112">The visual-parent chain from <code>v</code> to the <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName> passes through the <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName>.</span></span></li></ul><span data-ttu-id="ea38a-113">Das bedeutet, dies wird angezeigt, wenn ein <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> außerhalb von <xref:System.Windows.Controls.TreeView?displayProperty=fullName> verwendet wird und der Benutzer auf ein Nachfolgeelement von <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> klickt, um ihn anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="ea38a-113">In other words, this is seen when a <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> is used outside of a <xref:System.Windows.Controls.TreeView?displayProperty=fullName>, and the user clicks on a descendant of the <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> to bring it into view.</span></span> <span data-ttu-id="ea38a-114">Wenn <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> keine Nachfolgeelemente besitzt, die den Fokus erhalten können, tritt dieses Problem nicht auf.</span><span class="sxs-lookup"><span data-stu-id="ea38a-114">If the <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> has no focusable descendants, you'll never see this issue.</span></span> <span data-ttu-id="ea38a-115">Ein Beispiel für eine entsprechende Situation liegt vor, wenn <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> der Stamm von DataTemplate ist.</span><span class="sxs-lookup"><span data-stu-id="ea38a-115">An example of a situation where this is hit is when a <xref:System.Windows.Controls.TreeViewItem?displayProperty=fullName> is the root of a DataTemplate.</span></span> <span data-ttu-id="ea38a-116">Wenn dieses Problem erreicht wird, tritt „InvalidCastException“ innerhalb des WPF-Frameworks auf.</span><span class="sxs-lookup"><span data-stu-id="ea38a-116">When this issue is hit, there is an InvalidCastException that occurs within the WPF framework.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="ea38a-117">Vorschlag</span><span class="sxs-lookup"><span data-stu-id="ea38a-117">Suggestion</span></span>

<span data-ttu-id="ea38a-118">Hierfür wird ein Hotfix zur Verfügung gestellt.</span><span class="sxs-lookup"><span data-stu-id="ea38a-118">A hotfix will be made available for this.</span></span>

| <span data-ttu-id="ea38a-119">name</span><span class="sxs-lookup"><span data-stu-id="ea38a-119">Name</span></span>    | <span data-ttu-id="ea38a-120">Wert</span><span class="sxs-lookup"><span data-stu-id="ea38a-120">Value</span></span>       |
|:--------|:------------|
| <span data-ttu-id="ea38a-121">Bereich</span><span class="sxs-lookup"><span data-stu-id="ea38a-121">Scope</span></span>   |<span data-ttu-id="ea38a-122">Gering</span><span class="sxs-lookup"><span data-stu-id="ea38a-122">Minor</span></span>|
|<span data-ttu-id="ea38a-123">Version</span><span class="sxs-lookup"><span data-stu-id="ea38a-123">Version</span></span>|<span data-ttu-id="ea38a-124">4.5</span><span class="sxs-lookup"><span data-stu-id="ea38a-124">4.5</span></span>|
|<span data-ttu-id="ea38a-125">Typ</span><span class="sxs-lookup"><span data-stu-id="ea38a-125">Type</span></span>|<span data-ttu-id="ea38a-126">Laufzeit</span><span class="sxs-lookup"><span data-stu-id="ea38a-126">Runtime</span></span>|

#### <a name="affected-apis"></a><span data-ttu-id="ea38a-127">Betroffene APIs</span><span class="sxs-lookup"><span data-stu-id="ea38a-127">Affected APIs</span></span>

<span data-ttu-id="ea38a-128">Nicht über API-Analyse erkennbar.</span><span class="sxs-lookup"><span data-stu-id="ea38a-128">Not detectable via API analysis.</span></span>

<!--

#### Affected APIs

Not detectable via API analysis.

-->
