---
title: LINQ to XML-Sicherheit (C#)
description: Hier erfahren Sie mehr über die Sicherheitsprobleme im Zusammenhang mit LINQ to XML, und Sie erhalten hilfreiche Informationen zur Minderung von Sicherheitsrisiken.
ms.date: 07/20/2015
ms.assetid: ef2c0dc9-ecf9-4c17-b24e-144184ab725f
ms.openlocfilehash: dc9fd13f19dcf6d9cbbb2b0b7608009cc4da1108
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 07/24/2020
ms.locfileid: "87165318"
---
# <a name="linq-to-xml-security-c"></a><span data-ttu-id="0caa4-103">LINQ to XML-Sicherheit (C#)</span><span class="sxs-lookup"><span data-stu-id="0caa4-103">LINQ to XML Security (C#)</span></span>
<span data-ttu-id="0caa4-104">In diesem Thema werden Sicherheitsfragen im Zusammenhang mit LINQ to XML erörtert.</span><span class="sxs-lookup"><span data-stu-id="0caa4-104">This topic describes security issues associated with LINQ to XML.</span></span> <span data-ttu-id="0caa4-105">Darüber hinaus finden Sie hier einige Empfehlungen zur Minderung der Sicherheitsrisiken.</span><span class="sxs-lookup"><span data-stu-id="0caa4-105">In addition, it provides some guidance for mitigating security exposure.</span></span>  
  
## <a name="linq-to-xml-security-overview"></a><span data-ttu-id="0caa4-106">Übersicht über die Sicherheit in LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="0caa4-106">LINQ to XML Security Overview</span></span>  
 <span data-ttu-id="0caa4-107">Bei der Entwicklung von LINQ to XML standen nicht die serverseitigen Anwendungen mit strengen Sicherheitsanforderungen, sondern eher das bequeme Programmieren im Vordergrund.</span><span class="sxs-lookup"><span data-stu-id="0caa4-107">LINQ to XML is designed more for programming convenience than for server-side applications with stringent security requirements.</span></span> <span data-ttu-id="0caa4-108">Die meisten XML-Szenarios beinhalten die Verarbeitung vertrauenswürdiger XML-Dokumente und nicht die Verarbeitung nicht vertrauenswürdiger XML-Dokumente, die auf einen Server hochgeladen werden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-108">Most XML scenarios consist of processing trusted XML documents, rather than processing untrusted XML documents that are uploaded to a server.</span></span> <span data-ttu-id="0caa4-109">Genau für diese Szenarios ist LINQ to XML optimiert.</span><span class="sxs-lookup"><span data-stu-id="0caa4-109">LINQ to XML is optimized for these scenarios.</span></span>  
  
 <span data-ttu-id="0caa4-110">Wenn Sie nicht vertrauenswürdige Daten aus unbekannten Quellen verarbeiten müssen, empfiehlt Microsoft, eine Instanz der <xref:System.Xml.XmlReader>-Klasse zu verwenden, die zum Herausfiltern bekannter XML-DoS-Angriffe (Denial of Service) konfiguriert wurde.</span><span class="sxs-lookup"><span data-stu-id="0caa4-110">If you must process untrusted data from unknown sources, Microsoft recommends that you use an instance of the <xref:System.Xml.XmlReader> class that has been configured to filter out known XML denial of service (DoS) attacks.</span></span>  
  
 <span data-ttu-id="0caa4-111">Wenn Sie einen <xref:System.Xml.XmlReader> zur Abwehr von DoS-Angriffen konfiguriert haben, können Sie mit diesem Reader eine LINQ to XML-Struktur auffüllen und damit ebenfalls von den Produktivitätsverbesserungen profitieren, die LINQ to XML für Entwickler bietet.</span><span class="sxs-lookup"><span data-stu-id="0caa4-111">If you have configured an <xref:System.Xml.XmlReader> to mitigate denial of service attacks, you can use that reader to populate a LINQ to XML tree and still benefit from the programmer productivity enhancements of LINQ to XML.</span></span> <span data-ttu-id="0caa4-112">Bei vielen Abwehrstrategien werden Reader erstellt, die für die Minderung der Sicherheitsgefahr konfiguriert werden, und anschließend wird eine XML-Struktur durch den konfigurierten Reader instanziiert.</span><span class="sxs-lookup"><span data-stu-id="0caa4-112">Many mitigation techniques involve creating readers that are configured to mitigate the security issue, and then instantiating an XML tree through the configured reader.</span></span>  
  
 <span data-ttu-id="0caa4-113">XML an sich ist anfällig für DoS-Angriffe, da Dokumente in Größe, Tiefe, Elementnamengröße usw. unbegrenzt sind.</span><span class="sxs-lookup"><span data-stu-id="0caa4-113">XML is intrinsically vulnerable to denial of service attacks because documents are unbounded in size, depth, element name size, and more.</span></span> <span data-ttu-id="0caa4-114">Egal, welche Komponenten Sie zum Verarbeiten von XML verwenden, sollten Sie immer darauf vorbereitet sein, die Anwendungsdomäne wiederherzustellen, falls übermäßig viele Ressourcen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-114">Regardless of the component that you use to process XML, you should always be prepared to recycle the application domain if it uses excessive resources.</span></span>  
  
## <a name="mitigation-of-xml-xsd-xpath-and-xslt-attacks"></a><span data-ttu-id="0caa4-115">Abwehr von XML-, XSD-, XPath- und XSLT-Angriffen</span><span class="sxs-lookup"><span data-stu-id="0caa4-115">Mitigation of XML, XSD, XPath, and XSLT Attacks</span></span>  
 <span data-ttu-id="0caa4-116">LINQ to XML basiert auf <xref:System.Xml.XmlReader> und <xref:System.Xml.XmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="0caa4-116">LINQ to XML is built upon <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter>.</span></span> <span data-ttu-id="0caa4-117">LINQ to XML unterstützt durch Erweiterungsmethoden in den Namespaces <xref:System.Xml.Schema?displayProperty=nameWithType> und <xref:System.Xml.XPath?displayProperty=nameWithType> XSD und XPath.</span><span class="sxs-lookup"><span data-stu-id="0caa4-117">LINQ to XML supports XSD and XPath through extension methods in the <xref:System.Xml.Schema?displayProperty=nameWithType> and <xref:System.Xml.XPath?displayProperty=nameWithType> namespaces.</span></span> <span data-ttu-id="0caa4-118">Mit den Klassen <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator> und <xref:System.Xml.XmlWriter> können Sie in Verbindung mit LINQ to XML XSLT zum Transformieren von XML-Strukturen aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-118">Using the <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, and <xref:System.Xml.XmlWriter> classes in conjunction with LINQ to XML, you can invoke XSLT to transform XML trees.</span></span>  
  
 <span data-ttu-id="0caa4-119">In einer weniger sicheren Umgebung gibt es eine Reihe von Sicherheitsproblemen im Zusammenhang mit XML und der Verwendung der Klassen in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType> und <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0caa4-119">If you are operating in a less secure environment, there are a number of security issues that are associated with XML and the use of the classes in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, and <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span></span> <span data-ttu-id="0caa4-120">Dazu gehören u. a. folgende Probleme:</span><span class="sxs-lookup"><span data-stu-id="0caa4-120">These issues include, but are not limited to, the following:</span></span>  
  
- <span data-ttu-id="0caa4-121">XSD, XPath und XSLT sind zeichenfolgenbasierte Sprachen, in denen Sie Vorgänge angeben können, die zeit- oder speicherintensiv sind.</span><span class="sxs-lookup"><span data-stu-id="0caa4-121">XSD, XPath, and XSLT are string-based languages in which you can specify operations that consume a lot of time or memory.</span></span> <span data-ttu-id="0caa4-122">Es liegt in der Verantwortung des Anwendungsprogrammierers, der XSD-, XPath- oder XSLT-Zeichenfolgen aus nicht vertrauenswürdigen Quellen verwendet, zu validieren, dass die Zeichenfolgen nicht bösartig sind, oder zu überwachen und die Wahrscheinlichkeit zu verringern, dass die Auswertung dieser Zeichenfolgen zu einem übermäßig hohen Verbrauch der Systemressourcen führt.</span><span class="sxs-lookup"><span data-stu-id="0caa4-122">It is the responsibility of application programmers who take XSD, XPath, or XSLT strings from untrusted sources to validate that the strings are not malicious, or to monitor and mitigate the possibility that evaluating these strings will lead to excessive system resource consumption.</span></span>  
  
- <span data-ttu-id="0caa4-123">XSD-Schemas (auch Inlineschemas) sind von Natur aus anfällig für DoS-Angriffe. Sie sollten daher keine Schemas aus nicht vertrauenswürdigen Quellen akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="0caa4-123">XSD schemas (including inline schemas) are inherently vulnerable to denial of service attacks; you should not accept schemas from untrusted sources.</span></span>  
  
- <span data-ttu-id="0caa4-124">XSD und XSLT können Verweise auf andere Dateien enthalten, und solche Verweise können zu zonen- und domänenübergreifenden Angriffen führen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-124">XSD and XSLT can include references to other files, and such references can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="0caa4-125">Externe Entitäten in DTDs können zu zonen- und domänenübergreifenden Angriffen führen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-125">External entities in DTDs can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="0caa4-126">DTDs sind anfällig für DoS-Angriffe.</span><span class="sxs-lookup"><span data-stu-id="0caa4-126">DTDs are vulnerable to denial of service attacks.</span></span>  
  
- <span data-ttu-id="0caa4-127">Ausgesprochen tief verschachtelte XML-Dokumente bergen die Gefahr von DoS-Angriffen. Es empfiehlt sich u. U., die Tiefe von XML-Dokumenten zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="0caa4-127">Exceptionally deep XML documents can pose denial of service issues; you might want to limit the depth of XML documents.</span></span>  
  
- <span data-ttu-id="0caa4-128">Akzeptieren Sie keine unterstützenden Komponenten, wie <xref:System.Xml.NameTable>-Objekte, <xref:System.Xml.XmlNamespaceManager>-Objekte und <xref:System.Xml.XmlResolver>-Objekte aus nicht vertrauenswürdigen Assemblys.</span><span class="sxs-lookup"><span data-stu-id="0caa4-128">Do not accept supporting components, such as <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, and <xref:System.Xml.XmlResolver> objects, from untrusted assemblies.</span></span>  
  
- <span data-ttu-id="0caa4-129">Lesen Sie Daten in Ausschnitten, um große Dokumentangriffe abzuwehren.</span><span class="sxs-lookup"><span data-stu-id="0caa4-129">Read data in chunks to mitigate large document attacks.</span></span>  
  
- <span data-ttu-id="0caa4-130">Skriptblöcke in XSLT-Stylesheets können eine Reihe von Angriffen möglich machen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-130">Script blocks in XSLT style sheets can expose a number of attacks.</span></span>  
  
- <span data-ttu-id="0caa4-131">Nehmen Sie vor dem Konstruieren dynamischer XPath-Ausdrücke eine sorgfältige Validierung vor.</span><span class="sxs-lookup"><span data-stu-id="0caa4-131">Validate carefully before constructing dynamic XPath expressions.</span></span>  
  
## <a name="linq-to-xml-security-issues"></a><span data-ttu-id="0caa4-132">Sicherheitsprobleme in LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="0caa4-132">LINQ to XML Security Issues</span></span>  
 <span data-ttu-id="0caa4-133">Die Aufzählung der in diesem Thema genannten Sicherheitsprobleme folgt keiner bestimmten Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="0caa4-133">The security issues in this topic are not presented in any particular order.</span></span> <span data-ttu-id="0caa4-134">Alle Probleme sind gleichermaßen wichtig und sollten entsprechend behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-134">All issues are important and should be addressed as appropriate.</span></span>  
  
 <span data-ttu-id="0caa4-135">Bei einem erfolgreichen Angriff durch Rechteerhöhung erhält die bösartige Assembly mehr Kontrolle über ihre Umgebung.</span><span class="sxs-lookup"><span data-stu-id="0caa4-135">A successful elevation of privilege attack gives a malicious assembly more control over its environment.</span></span> <span data-ttu-id="0caa4-136">Ein solcher erfolgreicher Angriff durch Rechteerweiterung kann die Offenlegung von Daten, die Verweigerung des Dienstes und vieles mehr zur Folge haben.</span><span class="sxs-lookup"><span data-stu-id="0caa4-136">A successful elevation of privilege attack can result in disclosure of data, denial of service, and more.</span></span>  
  
 <span data-ttu-id="0caa4-137">Anwendungen sollten Benutzern, die für das Anzeigen von Daten keine Berechtigungen besitzen, keine Daten offenlegen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-137">Applications should not disclose data to users who are not authorized to see that data.</span></span>  
  
 <span data-ttu-id="0caa4-138">DoS-Angriffe führen dazu, dass der XML-Parser oder LINQ to XML übermäßig viel Speicher oder CPU-Zeit verbraucht.</span><span class="sxs-lookup"><span data-stu-id="0caa4-138">Denial of service attacks cause the XML parser or LINQ to XML to consume excessive amounts of memory or CPU time.</span></span> <span data-ttu-id="0caa4-139">Im Vergleich zu Angriffen durch Rechteerweiterung oder Angriffe, bei denen Daten offengelegt werden, gelten DoS-Angriffe als weniger schwerwiegend.</span><span class="sxs-lookup"><span data-stu-id="0caa4-139">Denial of service attacks are considered to be less severe than elevation of privilege attacks or disclosure of data attacks.</span></span> <span data-ttu-id="0caa4-140">In Szenarios, in denen ein Server XML-Dokumente aus nicht vertrauenswürdigen Quellen verarbeiten muss, sind sie dennoch von Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="0caa4-140">However, they are important in a scenario where a server needs to process XML documents from untrusted sources.</span></span>  
  
### <a name="exceptions-and-error-messages-might-reveal-data"></a><span data-ttu-id="0caa4-141">Ausnahmen und Fehlermeldungen könnten Daten offenlegen</span><span class="sxs-lookup"><span data-stu-id="0caa4-141">Exceptions and Error Messages Might Reveal Data</span></span>  
 <span data-ttu-id="0caa4-142">Fehlerbeschreibungen könnten für einen Angreifer wertvolle Informationen enthalten – von den zu transformierenden Daten über Dateinamen bis hin zu Implementierungsdetails.</span><span class="sxs-lookup"><span data-stu-id="0caa4-142">The description of an error might reveal data, such as the data being transformed, file names, or implementation details.</span></span> <span data-ttu-id="0caa4-143">Daher sollten Aufrufer, die nicht vertrauenswürdig sind, keine Fehlermeldungen angezeigt bekommen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-143">Error messages should not be exposed to callers that are not trusted.</span></span> <span data-ttu-id="0caa4-144">Sie sollten alle Fehler abfangen und für die Fehlerberichterstattung Ihre eigenen benutzerdefinierten Fehlermeldungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-144">You should catch all errors and report errors with your own custom error messages.</span></span>  
  
### <a name="do-not-call-codeaccesspermissionsassert-in-an-event-handler"></a><span data-ttu-id="0caa4-145">Rufen Sie in einem Ereignishandler nicht "CodeAccessPermissions.Assert" auf</span><span class="sxs-lookup"><span data-stu-id="0caa4-145">Do Not Call CodeAccessPermissions.Assert in an Event Handler</span></span>  
 <span data-ttu-id="0caa4-146">Eine Assembly kann mehr oder weniger Berechtigungen besitzen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-146">An assembly can have lesser or greater permissions.</span></span> <span data-ttu-id="0caa4-147">Je mehr Berechtigungen eine Assembly besitzt, desto größer ist ihre Kontrolle über den Computer und dessen Umgebungen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-147">An assembly that has greater permissions has greater control over the computer and its environments.</span></span>  
  
 <span data-ttu-id="0caa4-148">Wenn Code in einer Assembly mit mehr Berechtigungen <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in einem Ereignishandler aufruft und die XML-Struktur dann an eine bösartige Assembly übergeben wird, die nur eingeschränkte Berechtigungen besitzt, kann die bösartige Assembly zur Auslösung eines Ereignisses führen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-148">If code in an assembly with greater permissions calls <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler, and then the XML tree is passed to a malicious assembly that has restricted permissions, the malicious assembly can cause an event to be raised.</span></span> <span data-ttu-id="0caa4-149">Da das Ereignis den Code ausführt, der sich in der Assembly mit den umfangreicheren Berechtigungen befindet, würde die bösartige Assembly dann mit erweiterten Rechten operieren.</span><span class="sxs-lookup"><span data-stu-id="0caa4-149">Because the event runs code that is in the assembly with greater permissions, the malicious assembly would then be operating with elevated privileges.</span></span>  
  
 <span data-ttu-id="0caa4-150">Microsoft empfiehlt, <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> nie in einem Ereignishandler aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-150">Microsoft recommends that you never call <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler.</span></span>  
  
### <a name="dtds-are-not-secure"></a><span data-ttu-id="0caa4-151">DTDs sind nicht sicher</span><span class="sxs-lookup"><span data-stu-id="0caa4-151">DTDs are Not Secure</span></span>  
 <span data-ttu-id="0caa4-152">Entitäten in DTDs sind von Natur aus nicht sicher.</span><span class="sxs-lookup"><span data-stu-id="0caa4-152">Entities in DTDs are inherently not secure.</span></span> <span data-ttu-id="0caa4-153">Ein bösartiges XML-Dokument, das eine DTD enthält, kann Ursache dafür sein, dass der Parser den gesamten Arbeitsspeicher und die gesamte CPU-Zeit nutzt, sodass es zu einem DoS-Angriff kommt.</span><span class="sxs-lookup"><span data-stu-id="0caa4-153">It is possible for a malicious XML document that contains a DTD to cause the parser to use all memory and CPU time, causing a denial of service attack.</span></span> <span data-ttu-id="0caa4-154">In LINQ to XML ist die DTD-Verarbeitung aus diesem Grund standardmäßig deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="0caa4-154">Therefore, in LINQ to XML, DTD processing is turned off by default.</span></span> <span data-ttu-id="0caa4-155">Sie sollten keine DTDs von nicht vertrauenswürdigen Quellen akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="0caa4-155">You should not accept DTDs from untrusted sources.</span></span>  
  
 <span data-ttu-id="0caa4-156">Ein Beispiel für das Akzeptieren von DTDs aus nicht vertrauenswürdigen Quellen ist eine Internetanwendung, die es Internetbenutzern erlaubt, XML-Dateien hochzuladen, die auf eine DTD und eine DTD-Datei verweisen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-156">One example of accepting DTDs from untrusted sources is a Web application that allows Web users to upload an XML file that references a DTD and a DTD file.</span></span> <span data-ttu-id="0caa4-157">Bei der Validierung der Datei könnte eine bösartige DTD einen DoS-Angriff auf Ihren Server starten.</span><span class="sxs-lookup"><span data-stu-id="0caa4-157">Upon validation of the file, a malicious DTD could execute a denial of service attack on your server.</span></span> <span data-ttu-id="0caa4-158">Ein anderes Beispiel für das Akzeptieren von DTDs aus nicht vertrauenswürdigen Quellen ist das Verweisen auf eine DTD auf einer Netzwerkfreigabe, die auch einen anonymen FTP-Zugriff zulässt.</span><span class="sxs-lookup"><span data-stu-id="0caa4-158">Another example of accepting DTDs from untrusted sources is to reference a DTD on a network share that also allows anonymous FTP access.</span></span>  
  
### <a name="avoid-excessive-buffer-allocation"></a><span data-ttu-id="0caa4-159">Vermeiden Sie übermäßige Pufferzuordnung</span><span class="sxs-lookup"><span data-stu-id="0caa4-159">Avoid Excessive Buffer Allocation</span></span>  
 <span data-ttu-id="0caa4-160">Anwendungsentwickler müssen sich bewusst sein, dass extrem große Datenquellen eine Ressourcenüberlastung und DoS-Angriffe zur Folge haben können.</span><span class="sxs-lookup"><span data-stu-id="0caa4-160">Application developers should be aware that extremely large data sources can lead to resource exhaustion and denial of service attacks.</span></span>  
  
 <span data-ttu-id="0caa4-161">Wenn ein böswilliger Benutzer ein sehr großes XML-Dokument sendet oder hochlädt, kann das dazu führen, dass LINQ to XML übermäßig viele Systemressourcen verbraucht.</span><span class="sxs-lookup"><span data-stu-id="0caa4-161">If a malicious user submits or uploads a very large XML document, it could cause LINQ to XML to consume excessive system resources.</span></span> <span data-ttu-id="0caa4-162">Dies kann die Grundlage für einen DoS-Angriff sein.</span><span class="sxs-lookup"><span data-stu-id="0caa4-162">This can constitute a denial of service attack.</span></span> <span data-ttu-id="0caa4-163">Wenn Sie dies vermeiden möchten, können Sie die <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType>-Eigenschaft festlegen und einen Reader erstellen, der die Größe der ladbaren Dokumente beschränkt.</span><span class="sxs-lookup"><span data-stu-id="0caa4-163">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the size of document that it can load.</span></span> <span data-ttu-id="0caa4-164">Anschließend erstellen Sie mit dem Reader die XML-Struktur.</span><span class="sxs-lookup"><span data-stu-id="0caa4-164">You then use the reader to create the XML tree.</span></span>  
  
 <span data-ttu-id="0caa4-165">Wenn Sie z. B. wissen, dass sich die maximale erwartete Größe Ihrer von einer nicht vertrauenswürdigen Quelle stammenden XML-Dokumente auf unter 50 KBytes beläuft, legen Sie für <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> den Wert "100.000" fest.</span><span class="sxs-lookup"><span data-stu-id="0caa4-165">For example, if you know that the maximum expected size of your XML documents coming from an untrusted source will be less than 50K bytes, set <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> to 100,000.</span></span> <span data-ttu-id="0caa4-166">Die Verarbeitung der XML-Dokumente wird davon nicht negativ beeinflusst, und gleichzeitig verringert sich das Risiko von DoS-Angriffen, bei denen Dokumente hochgeladen werden, die große Mengen des Speichers in Anspruch nehmen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-166">This will not encumber your processing of XML documents, and at the same time it will mitigate denial of service threats where documents might be uploaded that would consume large amounts of memory.</span></span>  
  
### <a name="avoid-excess-entity-expansion"></a><span data-ttu-id="0caa4-167">Vermeiden Sie eine exzessive Entitätserweiterung</span><span class="sxs-lookup"><span data-stu-id="0caa4-167">Avoid Excess Entity Expansion</span></span>  
 <span data-ttu-id="0caa4-168">Ein bekannter DoS-Angriff mit einer DTD besteht in der Verwendung eines Dokuments, das eine exzessive Entitätserweiterung zur Folge hat.</span><span class="sxs-lookup"><span data-stu-id="0caa4-168">One of the known denial of service attacks when using a DTD is a document that causes excessive entity expansion.</span></span> <span data-ttu-id="0caa4-169">Wenn Sie solche Angriffe vermeiden möchten, können Sie die <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType>-Eigenschaft festlegen und einen Reader erstellen, der die Anzahl der Zeichen beschränkt, die aus einer Entitätserweiterung resultieren.</span><span class="sxs-lookup"><span data-stu-id="0caa4-169">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the number of characters that result from entity expansion.</span></span> <span data-ttu-id="0caa4-170">Anschließend erstellen Sie mit dem Reader die XML-Struktur.</span><span class="sxs-lookup"><span data-stu-id="0caa4-170">You then use the reader to create the XML tree.</span></span>  
  
### <a name="limit-the-depth-of-the-xml-hierarchy"></a><span data-ttu-id="0caa4-171">Schränken Sie die Tiefe der XML-Hierarchie ein</span><span class="sxs-lookup"><span data-stu-id="0caa4-171">Limit the Depth of the XML Hierarchy</span></span>  
 <span data-ttu-id="0caa4-172">Ein möglicher DoS-Angriff besteht darin, ein Dokument zu senden, dass eine außerordentlich große Hierarchietiefe besitzt.</span><span class="sxs-lookup"><span data-stu-id="0caa4-172">One possible denial of service attack is when a document is submitted that has excessive depth of hierarchy.</span></span> <span data-ttu-id="0caa4-173">Wenn Sie solche Angriffe verhindern möchten, können Sie in Ihrer eigenen Klasse einen <xref:System.Xml.XmlReader> umschließen, der die Tiefe der Elemente zählt.</span><span class="sxs-lookup"><span data-stu-id="0caa4-173">To prevent this, you can wrap a <xref:System.Xml.XmlReader> in your own class that counts the depth of elements.</span></span> <span data-ttu-id="0caa4-174">Wenn die Tiefe ein vorher festgelegtes vernünftiges Maß übersteigt, können Sie die Verarbeitung des bösartigen Dokuments beenden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-174">If the depth exceeds a predetermined reasonable level, you can terminate the processing of the malicious document.</span></span>  
  
### <a name="protect-against-untrusted-xmlreader-or-xmlwriter-implementations"></a><span data-ttu-id="0caa4-175">Schützen Sie sich vor nicht vertrauenswürdigen "XmlReader"- oder "XmlWriter"-Implementierungen</span><span class="sxs-lookup"><span data-stu-id="0caa4-175">Protect Against Untrusted XmlReader or XmlWriter Implementations</span></span>  
 <span data-ttu-id="0caa4-176">Administratoren müssen sicherstellen, dass alle extern bereitgestellten <xref:System.Xml.XmlReader>-Implementierungen oder <xref:System.Xml.XmlWriter>-Implementierungen starke Namen besitzen und in der Computerkonfiguration registriert sind.</span><span class="sxs-lookup"><span data-stu-id="0caa4-176">Administrators should verify that any externally supplied <xref:System.Xml.XmlReader> or <xref:System.Xml.XmlWriter> implementations have strong names and have been registered in the machine configuration.</span></span> <span data-ttu-id="0caa4-177">Auf diese Weise wird verhindert, dass bösartiger Code geladen wird, der sich als Reader oder Writer maskiert.</span><span class="sxs-lookup"><span data-stu-id="0caa4-177">This prevents malicious code masquerading as a reader or writer from being loaded.</span></span>  
  
### <a name="periodically-free-objects-that-reference-xname"></a><span data-ttu-id="0caa4-178">Geben Sie regelmäßig Objekte frei, die auf "XName" verweisen</span><span class="sxs-lookup"><span data-stu-id="0caa4-178">Periodically Free Objects that Reference XName</span></span>  
 <span data-ttu-id="0caa4-179">Um sich vor bestimmten Arten von Angriffen zu schützen, sollten Anwendungsprogrammierer in regelmäßigen Abständen alle Objekte freigeben, die auf ein <xref:System.Xml.Linq.XName>-Objekt in der Anwendungsdomäne verweisen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-179">To protect against certain kinds of attacks, application programmers should free all objects that reference an <xref:System.Xml.Linq.XName> object in the application domain on a regular basis.</span></span>  
  
### <a name="protect-against-random-xml-names"></a><span data-ttu-id="0caa4-180">Schützen Sie sich vor zufälligen XML-Namen</span><span class="sxs-lookup"><span data-stu-id="0caa4-180">Protect Against Random XML Names</span></span>  
 <span data-ttu-id="0caa4-181">Für Anwendungen, die Daten aus nicht vertrauenswürdigen Quellen nehmen, sollte die Verwendung eines <xref:System.Xml.XmlReader> in Erwägung gezogen werden, der von benutzerdefiniertem Code umschlossen wird und nach möglichen zufälligen XML-Namen und -Namespaces sucht.</span><span class="sxs-lookup"><span data-stu-id="0caa4-181">Applications that take data from untrusted sources should consider using an <xref:System.Xml.XmlReader> that is wrapped in custom code to inspect for the possibility of random XML names and namespaces.</span></span> <span data-ttu-id="0caa4-182">Wenn solche zufälligen XML-Namen und -Namespaces entdeckt werden, kann die Anwendung die Verarbeitung des bösartigen Dokuments abbrechen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-182">If such random XML names and namespaces are detected, the application can then terminate the processing of the malicious document.</span></span>  
  
 <span data-ttu-id="0caa4-183">Sie können die Anzahl der Namen in einem Namespace (einschließlich von Namen, die sich nicht in einem Namespace befinden) auf ein vernünftiges Maß beschränken.</span><span class="sxs-lookup"><span data-stu-id="0caa4-183">You might want to limit the number of names in any given namespace (including names in no namespace) to a reasonable limit.</span></span>  
  
### <a name="annotations-are-accessible-by-software-components-that-share-a-linq-to-xml-tree"></a><span data-ttu-id="0caa4-184">Auf Anmerkungen kann von Softwarekomponenten aus zugegriffen werden, die gemeinsam eine LINQ to XML-Struktur nutzen</span><span class="sxs-lookup"><span data-stu-id="0caa4-184">Annotations Are Accessible by Software Components that Share a LINQ to XML Tree</span></span>  
 <span data-ttu-id="0caa4-185">Mit LINQ to XML könnten Verarbeitungspipelines erstellt werden, in denen verschiedene Anwendungskomponenten geladen, validiert, abgefragt, transformiert, aktualisiert und XML-Daten gespeichert werden, die zwischen Komponenten als XML-Strukturen übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-185">LINQ to XML could be used to build processing pipelines in which different application components load, validate, query, transform, update, and save XML data that is passed between components as XML trees.</span></span> <span data-ttu-id="0caa4-186">Dies kann zur Optimierung der Leistung beitragen, weil der Mehraufwand für das Laden und Serialisieren von Objekten in XML-Text nur an den Enden der Pipeline entsteht.</span><span class="sxs-lookup"><span data-stu-id="0caa4-186">This can help optimize performance, because the overhead of loading and serializing objects to XML text is done only at the ends of the pipeline.</span></span> <span data-ttu-id="0caa4-187">Entwickler müssen sich aber bewusst sein, dass alle Anmerkungen und Ereignishandler, die von einer Komponente erstellt werden, auch für andere Komponenten verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="0caa4-187">Developers must be aware, however, that all annotations and event handlers created by one component are accessible to other components.</span></span> <span data-ttu-id="0caa4-188">Wenn die Komponenten ein unterschiedliches Maß an Vertrauenswürdigkeit besitzen, kann dies zu einer Reihe von Sicherheitsrisiken führen.</span><span class="sxs-lookup"><span data-stu-id="0caa4-188">This can create a number of vulnerabilities if the components have different levels of trust.</span></span> <span data-ttu-id="0caa4-189">Wenn Sie sichere Pipelines auch mit weniger vertrauenswürdigen Komponenten erstellen möchten, müssen sie LINQ to XML-Objekte in XML-Text serialisieren, bevor die Daten an eine nicht vertrauenswürdige Komponente übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-189">To build secure pipelines across less trusted components, you must serialize LINQ to XML objects to XML text before passing the data to an untrusted component.</span></span>  
  
 <span data-ttu-id="0caa4-190">Ein gewisses Maß an Sicherheit wird durch die CLR (Common Language Runtime) bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0caa4-190">Some security is provided by the common language runtime (CLR).</span></span> <span data-ttu-id="0caa4-191">So kann z. B. eine Komponente, die keine private Klasse enthält, auch nicht auf Anmerkungen zugreifen, die von dieser Klasse verschlüsselt wurden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-191">For example, a component that does not include a private class cannot access annotations keyed by that class.</span></span> <span data-ttu-id="0caa4-192">Es ist aber möglich, dass Komponenten Anmerkungen löschen können, die sie gar nicht lesen können.</span><span class="sxs-lookup"><span data-stu-id="0caa4-192">However, annotations can be deleted by components that cannot read them.</span></span> <span data-ttu-id="0caa4-193">Dieses Verhalten könnte für einen Manipulationsangriff missbraucht werden.</span><span class="sxs-lookup"><span data-stu-id="0caa4-193">This could be used as a tampering attack.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0caa4-194">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="0caa4-194">See also</span></span>

- [<span data-ttu-id="0caa4-195">Programming Guide (LINQ to XML) (C#) (Programmierhandbuch (LINQ to XML) (C#))</span><span class="sxs-lookup"><span data-stu-id="0caa4-195">Programming Guide (LINQ to XML) (C#)</span></span>](linq-to-xml-overview.md)
