---
title: Zentralisierte Konfiguration
description: Zentralisieren der Konfiguration für Native Cloud-Anwendungen mit Azure-App-Konfiguration und azurekey Vault.
ms.date: 05/13/2020
ms.openlocfilehash: 0d40c5b2d70f30beb17489dfd55900f7c5fc1a75
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/24/2020
ms.locfileid: "91160878"
---
# <a name="centralized-configuration"></a><span data-ttu-id="a7fde-103">Zentralisierte Konfiguration</span><span class="sxs-lookup"><span data-stu-id="a7fde-103">Centralized configuration</span></span>

<span data-ttu-id="a7fde-104">Anders als bei einer monolithischen APP, in der alles innerhalb einer einzelnen Instanz ausgeführt wird, besteht eine native Cloud-Anwendung aus unabhängigen Diensten, die auf virtuelle Computer, Container und geografische Regionen verteilt sind.</span><span class="sxs-lookup"><span data-stu-id="a7fde-104">Unlike a monolithic app in which everything runs within a single instance, a cloud-native application consists of independent services distributed across virtual machines, containers, and geographic regions.</span></span> <span data-ttu-id="a7fde-105">Das Verwalten von Konfigurationseinstellungen für Dutzende voneinander abhängiger Dienste kann eine Herausforderung darstellen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-105">Managing configuration settings for dozens of interdependent services can be challenging.</span></span> <span data-ttu-id="a7fde-106">Doppelte Kopien von Konfigurationseinstellungen über verschiedene Speicherorte hinweg sind fehleranfällig und schwer zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="a7fde-106">Duplicate copies of configuration settings across different locations is error prone and difficult to manage.</span></span> <span data-ttu-id="a7fde-107">Die zentralisierte Konfiguration ist eine wichtige Voraussetzung für verteilte cloudbasierte Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-107">Centralized configuration is a critical requirement for distributed cloud-native applications.</span></span>

<span data-ttu-id="a7fde-108">Wie in [Kapitel 1](introduction.md)erläutert, ist für die Empfehlungen der 12-stufigen App eine strikte Trennung zwischen Code und Konfiguration erforderlich.</span><span class="sxs-lookup"><span data-stu-id="a7fde-108">As discussed in [Chapter 1](introduction.md), the Twelve-Factor App recommendations require strict separation between code and configuration.</span></span> <span data-ttu-id="a7fde-109">Die Konfiguration muss extern von der Anwendung gespeichert und bei Bedarf eingelesen werden.</span><span class="sxs-lookup"><span data-stu-id="a7fde-109">Configuration must be stored externally from the application and read-in as needed.</span></span> <span data-ttu-id="a7fde-110">Das Speichern von Konfigurations Werten als Konstanten oder Literalwerte im Code stellt einen Verstoß dar.</span><span class="sxs-lookup"><span data-stu-id="a7fde-110">Storing configuration values as constants or literal values in code is a violation.</span></span> <span data-ttu-id="a7fde-111">Die gleichen Konfigurationswerte werden häufig von vielen Diensten in derselben Anwendung verwendet.</span><span class="sxs-lookup"><span data-stu-id="a7fde-111">The same configuration values are often be used by many services in the same application.</span></span> <span data-ttu-id="a7fde-112">Außerdem müssen wir dieselben Werte in mehreren Umgebungen unterstützen, z. b. dev, Testing und Production.</span><span class="sxs-lookup"><span data-stu-id="a7fde-112">Additionally, we must support the same values across multiple environments, such as dev, testing, and production.</span></span> <span data-ttu-id="a7fde-113">Die bewährte Vorgehensweise besteht darin, Sie in einem zentralisierten Konfigurations Speicher zu speichern.</span><span class="sxs-lookup"><span data-stu-id="a7fde-113">The best practice is store them in a centralized configuration store.</span></span>

<span data-ttu-id="a7fde-114">Die Azure-Cloud bietet einige hervorragend Optionen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-114">The Azure cloud presents several great options.</span></span>

## <a name="azure-app-configuration"></a><span data-ttu-id="a7fde-115">Azure App Configuration</span><span class="sxs-lookup"><span data-stu-id="a7fde-115">Azure App Configuration</span></span>

<span data-ttu-id="a7fde-116">[Azure-App Konfiguration](/azure/azure-app-configuration/overview) ist ein vollständig verwalteter Azure-Dienst, der nicht geheime Konfigurationseinstellungen an einem sicheren, zentralisierten Speicherort speichert.</span><span class="sxs-lookup"><span data-stu-id="a7fde-116">[Azure App Configuration](/azure/azure-app-configuration/overview) is a fully managed Azure service that stores non-secret configuration settings in a secure, centralized location.</span></span> <span data-ttu-id="a7fde-117">Gespeicherte Werte können von mehreren Diensten und Anwendungen gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="a7fde-117">Stored values can be shared among multiple services and applications.</span></span>

<span data-ttu-id="a7fde-118">Der Dienst ist einfach zu verwenden und bietet mehrere Vorteile:</span><span class="sxs-lookup"><span data-stu-id="a7fde-118">The service is simple to use and provides several benefits:</span></span>

- <span data-ttu-id="a7fde-119">Flexible Schlüssel-Wert-Darstellungen und Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="a7fde-119">Flexible key/value representations and mappings</span></span>
- <span data-ttu-id="a7fde-120">Tagging mit Azure-Bezeichnungen</span><span class="sxs-lookup"><span data-stu-id="a7fde-120">Tagging with Azure labels</span></span>
- <span data-ttu-id="a7fde-121">Dedizierte Benutzeroberfläche für die Verwaltung</span><span class="sxs-lookup"><span data-stu-id="a7fde-121">Dedicated UI for management</span></span>
- <span data-ttu-id="a7fde-122">Verschlüsselung vertraulicher Informationen</span><span class="sxs-lookup"><span data-stu-id="a7fde-122">Encryption of sensitive information</span></span>
- <span data-ttu-id="a7fde-123">Abfragen und Batch Abruf</span><span class="sxs-lookup"><span data-stu-id="a7fde-123">Querying and batch retrieval</span></span>

<span data-ttu-id="a7fde-124">Bei der Azure-App Konfiguration werden die Änderungen an den Schlüsselwert Einstellungen sieben Tage lang beibehalten.</span><span class="sxs-lookup"><span data-stu-id="a7fde-124">Azure App Configuration maintains changes made to key-value settings for seven days.</span></span> <span data-ttu-id="a7fde-125">Mit dem Feature für die Point-in-Time-Momentaufnahme können Sie den Verlauf einer Einstellung und sogar Rollbacks für eine fehlgeschlagene Bereitstellung rekonstruieren.</span><span class="sxs-lookup"><span data-stu-id="a7fde-125">The point-in-time snapshot feature enables you to reconstruct the history of a setting and even rollback for a failed deployment.</span></span>

<span data-ttu-id="a7fde-126">Bei der APP-Konfiguration werden automatisch alle Einstellungen zwischengespeichert, um übermäßige Aufrufe des Konfigurations Speichers zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="a7fde-126">App Configuration automatically caches each setting to avoid excessive calls to the configuration store.</span></span> <span data-ttu-id="a7fde-127">Beim Aktualisierungsvorgang wird abgewartet, bis der zwischengespeicherte Wert einer Einstellung abgelaufen ist, bevor die Einstellung aktualisiert wird. Dies gilt auch, wenn sich der zugehörige Wert im Konfigurationsspeicher ändert.</span><span class="sxs-lookup"><span data-stu-id="a7fde-127">The refresh operation waits until the cached value of a setting expires to update that setting, even when its value changes in the configuration store.</span></span> <span data-ttu-id="a7fde-128">Die Standarddauer für den Ablauf des Caches beträgt 30 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="a7fde-128">The default cache expiration time is 30 seconds.</span></span> <span data-ttu-id="a7fde-129">Sie können die Ablaufzeit außer Kraft setzen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-129">You can override the expiration time.</span></span>

<span data-ttu-id="a7fde-130">In der APP-Konfiguration werden alle Konfigurationswerte während der Übertragung und im Ruhezustand verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="a7fde-130">App Configuration encrypts all configuration values in transit and at rest.</span></span> <span data-ttu-id="a7fde-131">Schlüsselnamen und Bezeichnungen werden als Indizes zum Abrufen von Konfigurationsdaten verwendet und nicht verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="a7fde-131">Key names and labels are used as indexes for retrieving configuration data and aren't encrypted.</span></span>

<span data-ttu-id="a7fde-132">Obwohl die APP-Konfiguration Sicherheits-und Sicherheits Sicherheit bietet, ist Azure Key Vault immer noch der beste Ort zum Speichern von Anwendungs Geheimnissen</span><span class="sxs-lookup"><span data-stu-id="a7fde-132">Although App Configuration provides hardened security, Azure Key Vault is still the best place for storing application secrets.</span></span> <span data-ttu-id="a7fde-133">Key Vault bietet Verschlüsselung auf Hardwareebene, granulare Zugriffsrichtlinien und Verwaltungsvorgänge wie die Zertifikatsrotation.</span><span class="sxs-lookup"><span data-stu-id="a7fde-133">Key Vault provides hardware-level encryption, granular access policies, and management operations such as certificate rotation.</span></span> <span data-ttu-id="a7fde-134">Sie können APP-Konfigurationswerte erstellen, die auf in einem Key Vault gespeicherte Geheimnisse verweisen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-134">You can create App Configuration values that reference secrets stored in a Key Vault.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="a7fde-135">Azure-Schlüsseltresor</span><span class="sxs-lookup"><span data-stu-id="a7fde-135">Azure Key Vault</span></span>

<span data-ttu-id="a7fde-136">Key Vault ist ein verwalteter Dienst für die sichere Speicherung und den Zugriff auf Geheimnisse.</span><span class="sxs-lookup"><span data-stu-id="a7fde-136">Key Vault is a managed service for securely storing and accessing secrets.</span></span> <span data-ttu-id="a7fde-137">Als Geheimnis wird alles bezeichnet, für das Sie den Zugriff streng kontrollieren möchten, z.B. API-Schlüssel, Kennwörter oder Zertifikate.</span><span class="sxs-lookup"><span data-stu-id="a7fde-137">A secret is anything that you want to tightly control access to, such as API keys, passwords, or certificates.</span></span> <span data-ttu-id="a7fde-138">Ein Tresor ist eine logische Gruppe von Geheimnissen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-138">A vault is a logical group of secrets.</span></span>

<span data-ttu-id="a7fde-139">Mit Key Vault lässt sich das Risiko einer unbeabsichtigten Weitergabe von Geheimnissen erheblich senken.</span><span class="sxs-lookup"><span data-stu-id="a7fde-139">Key Vault greatly reduces the chances that secrets may be accidentally leaked.</span></span> <span data-ttu-id="a7fde-140">Dank Key Vault müssen Anwendungsentwickler Sicherheitsinformationen nicht mehr in der Anwendung speichern.</span><span class="sxs-lookup"><span data-stu-id="a7fde-140">When using Key Vault, application developers no longer need to store security information in their application.</span></span> <span data-ttu-id="a7fde-141">Diese Vorgehensweise entfällt, dass diese Informationen in Ihrem Code gespeichert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-141">This practice eliminates the need to store this information inside your code.</span></span> <span data-ttu-id="a7fde-142">Ein Beispiel: Angenommen, eine Anwendung muss eine Verbindung mit einer Datenbank herstellen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-142">For example, an application may need to connect to a database.</span></span> <span data-ttu-id="a7fde-143">Anstatt die Verbindungszeichenfolge im App-Code zu speichern, können Sie diese sicher in Key Vault speichern.</span><span class="sxs-lookup"><span data-stu-id="a7fde-143">Instead of storing the connection string in the app's code, you can store it securely in Key Vault.</span></span>

<span data-ttu-id="a7fde-144">Ihre Anwendungen können mithilfe von URIs sicher auf benötigte Informationen zugreifen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-144">Your applications can securely access the information they need by using URIs.</span></span> <span data-ttu-id="a7fde-145">Diese URIs bieten den Anwendungen die Möglichkeit, bestimmte Versionen eines geheimen Schlüssels abzurufen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-145">These URIs allow the applications to retrieve specific versions of a secret.</span></span> <span data-ttu-id="a7fde-146">Es ist nicht erforderlich, benutzerdefinierten Code zu schreiben, um die in Key Vault gespeicherten geheimen Informationen zu schützen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-146">There's no need to write custom code to protect any of the secret information stored in Key Vault.</span></span>

<span data-ttu-id="a7fde-147">Der Zugriff auf Key Vault erfordert ordnungsgemäße Aufrufer Authentifizierung und Autorisierung.</span><span class="sxs-lookup"><span data-stu-id="a7fde-147">Access to Key Vault requires proper caller authentication and authorization.</span></span> <span data-ttu-id="a7fde-148">In der Regel verwendet jeder Cloud-Native-Dienst eine ClientID-/clientgeheim-Kombination.</span><span class="sxs-lookup"><span data-stu-id="a7fde-148">Typically, each cloud-native microservice uses a ClientId/ClientSecret combination.</span></span> <span data-ttu-id="a7fde-149">Es ist wichtig, diese Anmelde Informationen außerhalb der Quell Code Verwaltung zu speichern.</span><span class="sxs-lookup"><span data-stu-id="a7fde-149">It's important to keep these credentials outside source control.</span></span> <span data-ttu-id="a7fde-150">Eine bewährte Vorgehensweise besteht darin, Sie in der Umgebung der Anwendung festzulegen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-150">A best practice is to set them in  the application's environment.</span></span> <span data-ttu-id="a7fde-151">Der direkte Zugriff auf Key Vault von AKS kann mithilfe von [Key Vault flexvolume](https://github.com/Azure/kubernetes-keyvault-flexvol)erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="a7fde-151">Direct access to Key Vault from AKS can be achieved using [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span></span>

## <a name="configuration-in-eshop"></a><span data-ttu-id="a7fde-152">Konfiguration im eShop</span><span class="sxs-lookup"><span data-stu-id="a7fde-152">Configuration in eShop</span></span>

<span data-ttu-id="a7fde-153">Die eshoponcontainers-Anwendung enthält lokale Anwendungseinstellungs-Dateien mit jedem-mikrodienst.</span><span class="sxs-lookup"><span data-stu-id="a7fde-153">The eShopOnContainers application includes local application settings files with each microservice.</span></span> <span data-ttu-id="a7fde-154">Diese Dateien werden in die Quell Code Verwaltung eingecheckt, enthalten aber keine Produktionsgeheimnisse wie Verbindungs Zeichenfolgen oder API-Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="a7fde-154">These files are checked into source control, but don't include production secrets such as connection strings or API keys.</span></span> <span data-ttu-id="a7fde-155">In der Produktionsumgebung können einzelne Einstellungen mit Umgebungsvariablen pro Dienst überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="a7fde-155">In production, individual settings may be overwritten with per-service environment variables.</span></span> <span data-ttu-id="a7fde-156">Das Einfügen von Geheimnissen in Umgebungsvariablen ist eine gängige Vorgehensweise bei gehosteten Anwendungen, bietet aber keinen zentralen Konfigurations Speicher.</span><span class="sxs-lookup"><span data-stu-id="a7fde-156">Injecting secrets in environment variables is a common practice for hosted applications, but doesn't provide a central configuration store.</span></span> <span data-ttu-id="a7fde-157">Zur Unterstützung der zentralisierten Verwaltung von Konfigurationseinstellungen enthält jeder-Dienst eine Einstellung zum Umschalten zwischen der Verwendung lokaler Einstellungen oder Azure Key Vault Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="a7fde-157">To support centralized management of configuration settings, each microservice includes a setting to toggle between its use of local settings or Azure Key Vault settings.</span></span>

## <a name="references"></a><span data-ttu-id="a7fde-158">References</span><span class="sxs-lookup"><span data-stu-id="a7fde-158">References</span></span>

- [<span data-ttu-id="a7fde-159">Die eshoponcontainers-Architektur</span><span class="sxs-lookup"><span data-stu-id="a7fde-159">The eShopOnContainers Architecture</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Architecture)
- [<span data-ttu-id="a7fde-160">Orchestrieren von Microservices und Anwendungen mit mehreren Containern für hohe Skalierbarkeit und Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="a7fde-160">Orchestrating microservices and multi-container applications for high scalability and availability</span></span>](../microservices/architect-microservice-container-applications/scalable-available-multi-container-microservice-applications.md)
- [<span data-ttu-id="a7fde-161">Azure API Management</span><span class="sxs-lookup"><span data-stu-id="a7fde-161">Azure API Management</span></span>](/azure/api-management/api-management-key-concepts)
- [<span data-ttu-id="a7fde-162">Übersicht über Azure SQL-Datenbank</span><span class="sxs-lookup"><span data-stu-id="a7fde-162">Azure SQL Database Overview</span></span>](/azure/sql-database/sql-database-technical-overview)
- [<span data-ttu-id="a7fde-163">Azure Cache for Redis</span><span class="sxs-lookup"><span data-stu-id="a7fde-163">Azure Cache for Redis</span></span>](https://azure.microsoft.com/services/cache/)
- [<span data-ttu-id="a7fde-164">MongoDB-API von Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="a7fde-164">Azure Cosmos DB's API for MongoDB</span></span>](/azure/cosmos-db/mongodb-introduction)
- [<span data-ttu-id="a7fde-165">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="a7fde-165">Azure Service Bus</span></span>](/azure/service-bus-messaging/service-bus-messaging-overview)
- [<span data-ttu-id="a7fde-166">Azure Monitor – Übersicht</span><span class="sxs-lookup"><span data-stu-id="a7fde-166">Azure Monitor overview</span></span>](/azure/azure-monitor/overview)
- <span data-ttu-id="a7fde-167">[eshoponcontainers: Erstellen eines Kubernetes-Clusters in AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span><span class="sxs-lookup"><span data-stu-id="a7fde-167">[eShopOnContainers: Create Kubernetes cluster in AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span></span>
- [<span data-ttu-id="a7fde-168">eshoponcontainers: Azure dev Spaces</span><span class="sxs-lookup"><span data-stu-id="a7fde-168">eShopOnContainers: Azure Dev Spaces</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Azure-Dev-Spaces)
- [<span data-ttu-id="a7fde-169">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="a7fde-169">Azure Dev Spaces</span></span>](/azure/dev-spaces/about)

>[!div class="step-by-step"]
><span data-ttu-id="a7fde-170">[Zurück](deploy-eshoponcontainers-azure.md)
>[Weiter](scale-applications.md)</span><span class="sxs-lookup"><span data-stu-id="a7fde-170">[Previous](deploy-eshoponcontainers-azure.md)
[Next](scale-applications.md)</span></span>
