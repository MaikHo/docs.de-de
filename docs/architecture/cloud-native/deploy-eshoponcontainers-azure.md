---
title: Bereitstellen von eShopOnContainers in Azure
description: Bereitstellen der eshoponcontainers-Anwendung mithilfe von Azure Kubernetes Service, Helm und Devspaces.
ms.date: 05/13/2020
ms.openlocfilehash: b3871dae2b414709bfe24b6f7bdbf06de1689d12
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/24/2020
ms.locfileid: "91160722"
---
# <a name="deploying-eshoponcontainers-to-azure"></a><span data-ttu-id="1cb68-103">Bereitstellen von eShopOnContainers in Azure</span><span class="sxs-lookup"><span data-stu-id="1cb68-103">Deploying eShopOnContainers to Azure</span></span>

<span data-ttu-id="1cb68-104">Die eshoponcontainers-Anwendung kann auf einer Vielzahl von Azure-Plattformen bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1cb68-104">The eShopOnContainers application can be deployed to a variety of Azure platforms.</span></span> <span data-ttu-id="1cb68-105">Die empfohlene Vorgehensweise besteht darin, die Anwendung in Azure Kubernetes Services (AKS) bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-105">The recommended approach is to deploy the application to Azure Kubernetes Services (AKS).</span></span> <span data-ttu-id="1cb68-106">Helm, ein Kubernetes-Bereitstellungs Tool, ist zur Verringerung der Bereitstellungs Komplexität verfügbar.</span><span class="sxs-lookup"><span data-stu-id="1cb68-106">Helm, a Kubernetes deployment tool, is available to reduce deployment complexity.</span></span> <span data-ttu-id="1cb68-107">Optional können Entwickler Azure dev Spaces für Kubernetes implementieren, um Ihren Entwicklungsprozess zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="1cb68-107">Optionally, developers may implement Azure Dev Spaces for Kubernetes to streamline their development process.</span></span>

## <a name="azure-kubernetes-service"></a><span data-ttu-id="1cb68-108">Azure Kubernetes Service</span><span class="sxs-lookup"><span data-stu-id="1cb68-108">Azure Kubernetes Service</span></span>

<span data-ttu-id="1cb68-109">Der erste Schritt besteht darin, einen AKS-Cluster zu erstellen, um den eShop in AKS zu hosten.</span><span class="sxs-lookup"><span data-stu-id="1cb68-109">To host eShop in AKS, the first step is to create an AKS cluster.</span></span> <span data-ttu-id="1cb68-110">Hierzu können Sie das Azure-Portal verwenden, das Sie durch die erforderlichen Schritte führt.</span><span class="sxs-lookup"><span data-stu-id="1cb68-110">To do so, you might use the Azure portal, which will walk you through the required steps.</span></span> <span data-ttu-id="1cb68-111">Sie können auch einen Cluster aus dem Azure CLI erstellen, indem Sie die rollenbasierte Access Control (Role-Based, RBAC) und das Anwendungs Routing aktivieren.</span><span class="sxs-lookup"><span data-stu-id="1cb68-111">You could also create a cluster from the Azure CLI, taking care to enable Role-Based Access Control (RBAC) and application routing.</span></span> <span data-ttu-id="1cb68-112">In der Dokumentation zu eshoponcontainers werden die Schritte zum Erstellen eines eigenen AKS-Clusters ausführlich erläutert.</span><span class="sxs-lookup"><span data-stu-id="1cb68-112">The eShopOnContainers' documentation details the steps for creating your own AKS cluster.</span></span> <span data-ttu-id="1cb68-113">Nach der Erstellung können Sie über das Kubernetes-Dashboard auf den Cluster zugreifen und ihn verwalten.</span><span class="sxs-lookup"><span data-stu-id="1cb68-113">Once created, you can access and manage the cluster from the Kubernetes dashboard.</span></span>

<span data-ttu-id="1cb68-114">Sie können jetzt die eShop-Anwendung im Cluster bereitstellen, indem Sie Helm und Tiller nutzen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-114">You can now deploy the eShop application to the cluster leveraging Helm and Tiller.</span></span>

## <a name="deploying-to-azure-kubernetes-service-using-helm"></a><span data-ttu-id="1cb68-115">Bereitstellen in Azure Kubernetes Dienst mithilfe von Helm</span><span class="sxs-lookup"><span data-stu-id="1cb68-115">Deploying to Azure Kubernetes Service using Helm</span></span>

<span data-ttu-id="1cb68-116">Helm ist ein Anwendungspaket-Manager-Tool, das direkt mit Kubernetes arbeitet.</span><span class="sxs-lookup"><span data-stu-id="1cb68-116">Helm is an application package manager tool that works directly with Kubernetes.</span></span> <span data-ttu-id="1cb68-117">Es hilft Ihnen beim definieren, installieren und Upgraden von Kubernetes-Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-117">It helps you define, install, and upgrade Kubernetes applications.</span></span> <span data-ttu-id="1cb68-118">Obwohl einfache Apps für AKS mit benutzerdefinierten CLI-Skripts oder einfachen Bereitstellungs Dateien bereitgestellt werden können, können komplexe apps viele Kubernetes-Objekte enthalten und von Helm profitieren.</span><span class="sxs-lookup"><span data-stu-id="1cb68-118">While simple apps can be deployed to AKS with custom CLI scripts or simple deployment files, complex apps can contain many Kubernetes objects and benefit from Helm.</span></span>

<span data-ttu-id="1cb68-119">Mithilfe von Helm enthalten Anwendungen textbasierte Konfigurationsdateien, die als Helm-Diagramme bezeichnet werden, die die Anwendung und Konfiguration in Helm-Paketen deklarativ beschreiben.</span><span class="sxs-lookup"><span data-stu-id="1cb68-119">Using Helm, applications include text-based configuration files, called Helm charts, which declaratively describe the application and configuration in Helm packages.</span></span> <span data-ttu-id="1cb68-120">In Diagrammen werden standardmäßige YAML-formatierte Dateien verwendet, um einen zugehörigen Satz von Kubernetes-Ressourcen zu beschreiben.</span><span class="sxs-lookup"><span data-stu-id="1cb68-120">Charts use standard YAML-formatted files to describe a related set of Kubernetes resources.</span></span> <span data-ttu-id="1cb68-121">Sie werden neben dem Anwendungscode, den Sie beschreiben, versioniert.</span><span class="sxs-lookup"><span data-stu-id="1cb68-121">They're versioned alongside the application code they describe.</span></span> <span data-ttu-id="1cb68-122">Helm-Diagramme reichen von einfachen bis zu komplexen Anforderungen, je nach den Anforderungen der von Ihnen beschriebenen Installation.</span><span class="sxs-lookup"><span data-stu-id="1cb68-122">Helm Charts range from simple to complex depending on the requirements of the installation they describe.</span></span>

<span data-ttu-id="1cb68-123">Helm besteht aus einem Befehlszeilen-Client Tool, das Helm-Diagramme nutzt und Befehle für eine Serverkomponente mit dem Namen Tiller gestartet.</span><span class="sxs-lookup"><span data-stu-id="1cb68-123">Helm is composed of a command-line client tool, which consumes helm charts and launches commands to a server component named, Tiller.</span></span> <span data-ttu-id="1cb68-124">Tiller kommuniziert mit der Kubernetes-API, um die korrekte Bereitstellung Ihrer containerisierten Workloads sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-124">Tiller communicates with the Kubernetes API to ensure the correct provisioning of your containerized workloads.</span></span> <span data-ttu-id="1cb68-125">Helm wird von der Cloud Native Computing Foundation verwaltet.</span><span class="sxs-lookup"><span data-stu-id="1cb68-125">Helm is maintained by the Cloud-native Computing Foundation.</span></span>

<span data-ttu-id="1cb68-126">Die folgende YAML-Datei stellt eine Helm-Vorlage dar:</span><span class="sxs-lookup"><span data-stu-id="1cb68-126">The following yaml file presents a Helm template:</span></span>

```yaml
apiVersion: v1
kind: Service
metadata:
  name: {{ .Values.app.svc.marketing }}
  labels:
    app: {{ template "marketing-api.name" . }}
    chart: {{ template "marketing-api.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app: {{ template "marketing-api.name" . }}
    release: {{ .Release.Name }}
```

<span data-ttu-id="1cb68-127">Beachten Sie, dass in der Vorlage ein dynamischer Satz von Schlüssel-Wert-Paaren beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="1cb68-127">Note how the template describes a dynamic set of key/value pairs.</span></span> <span data-ttu-id="1cb68-128">Wenn die Vorlage aufgerufen wird, werden Werte, die in geschweiften Klammern eingeschlossen sind, aus anderen YAML-basierten Konfigurationsdateien abgerufen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-128">When the template is invoked, values that enclosed in curly braces are pulled in from other yaml-based configuration files.</span></span>

<span data-ttu-id="1cb68-129">Sie finden die eshoponcontainers Helm-Diagramme im Ordner "/k8s/Helm".</span><span class="sxs-lookup"><span data-stu-id="1cb68-129">You'll find the eShopOnContainers helm charts in the /k8s/helm folder.</span></span> <span data-ttu-id="1cb68-130">In Abbildung 2-6 wird dargestellt, wie die verschiedenen Komponenten der Anwendung in einer Ordnerstruktur angeordnet sind, die von Helm zum Definieren und Verwalten von bereit Stellungen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="1cb68-130">Figure 2-6 shows how the different components of the application are organized into a folder structure used by helm to define and managed deployments.</span></span>

<span data-ttu-id="1cb68-131">![eshoponcontainers-Architektur ](./media/eshoponcontainers-helm-folder.png)
 **Abbildung 2-6**.</span><span class="sxs-lookup"><span data-stu-id="1cb68-131">![eShopOnContainers Architecture](./media/eshoponcontainers-helm-folder.png)
**Figure 2-6**.</span></span> <span data-ttu-id="1cb68-132">Der Ordner "eshoponcontainers Helm".</span><span class="sxs-lookup"><span data-stu-id="1cb68-132">The eShopOnContainers helm folder.</span></span>

<span data-ttu-id="1cb68-133">Jede einzelne Komponente wird mithilfe eines- `helm install` Befehls installiert.</span><span class="sxs-lookup"><span data-stu-id="1cb68-133">Each individual component is installed using a `helm install` command.</span></span> <span data-ttu-id="1cb68-134">der eShop umfasst das Skript "alle bereitstellen", mit dem die Komponenten durchlaufen und mithilfe der jeweiligen Helm-Diagramme installiert werden.</span><span class="sxs-lookup"><span data-stu-id="1cb68-134">eShop includes a "deploy all" script that loops through and installs the components using their respective helm charts.</span></span> <span data-ttu-id="1cb68-135">Das Ergebnis ist ein wiederholbarer Prozess, der mit der Anwendung in der Quell Code Verwaltung versioniert ist, die jeder Person im Team mit einem einzeiligen Skript Befehl in einem AKS-Cluster bereitstellen kann.</span><span class="sxs-lookup"><span data-stu-id="1cb68-135">The result is a repeatable process, versioned with the application in source control, that anyone on the team can deploy to an AKS cluster with a one-line script command.</span></span>

> <span data-ttu-id="1cb68-136">Beachten Sie, dass in Version 3 von Helm offiziell die Notwendigkeit der Tiller-Serverkomponente entfällt.</span><span class="sxs-lookup"><span data-stu-id="1cb68-136">Note that version 3 of Helm officially removes the need for the Tiller server component.</span></span> <span data-ttu-id="1cb68-137">Weitere Informationen zu dieser Erweiterung finden Sie [hier](https://medium.com/better-programming/why-is-tiller-missing-in-helm-3-2347c446714).</span><span class="sxs-lookup"><span data-stu-id="1cb68-137">More information on this enhancement can be found [here](https://medium.com/better-programming/why-is-tiller-missing-in-helm-3-2347c446714).</span></span>

## <a name="azure-dev-spaces"></a><span data-ttu-id="1cb68-138">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="1cb68-138">Azure Dev Spaces</span></span>

<span data-ttu-id="1cb68-139">Native Cloud-Anwendungen können schnell und komplex wachsen, sodass beträchtliche Compute-Ressourcen ausgeführt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-139">Cloud-native applications can quickly grow large and complex, requiring significant compute resources to run.</span></span> <span data-ttu-id="1cb68-140">In diesen Szenarien kann die gesamte Anwendung nicht auf einem Entwicklungs Computer (vor allem auf einem Laptop) gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="1cb68-140">In these scenarios, the entire application can't be hosted on a development machine (especially a laptop).</span></span> <span data-ttu-id="1cb68-141">Azure dev Spaces ist darauf ausgelegt, dieses Problem mithilfe von AKS zu beheben.</span><span class="sxs-lookup"><span data-stu-id="1cb68-141">Azure Dev Spaces is designed to address this problem using AKS.</span></span> <span data-ttu-id="1cb68-142">Es ermöglicht Entwicklern die Arbeit mit einer lokalen Version ihrer Dienste, während der Rest der Anwendung in einem AKS-Entwicklungs Cluster gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="1cb68-142">It enables developers to work with a local version of their services while hosting the rest of the application in an AKS development cluster.</span></span>

<span data-ttu-id="1cb68-143">Entwickler verwenden eine ausgeführte (Entwicklungs-) Instanz in einem AKS-Cluster, der die gesamte containerisierte Anwendung enthält.</span><span class="sxs-lookup"><span data-stu-id="1cb68-143">Developers share a running (development) instance in an AKS cluster that contains the entire containerized application.</span></span> <span data-ttu-id="1cb68-144">Sie verwenden jedoch persönliche Plätze, die auf Ihrem Computer eingerichtet sind, um ihre Dienste lokal zu entwickeln.</span><span class="sxs-lookup"><span data-stu-id="1cb68-144">But they use personal spaces set up on their machine to locally develop their services.</span></span> <span data-ttu-id="1cb68-145">Wenn Sie fertig sind, testen Sie Sie von End-to-End im AKS-Cluster, ohne Abhängigkeiten zu replizieren.</span><span class="sxs-lookup"><span data-stu-id="1cb68-145">When ready, they test from end-to-end in the AKS cluster - without replicating dependencies.</span></span> <span data-ttu-id="1cb68-146">Azure dev Spaces führt Code vom lokalen Computer mit Diensten in AKS zusammen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-146">Azure Dev Spaces merges code from the local machine with services in AKS.</span></span> <span data-ttu-id="1cb68-147">Team Mitglieder können sehen, wie sich Ihre Änderungen in einer echten AKS-Umgebung Verhalten.</span><span class="sxs-lookup"><span data-stu-id="1cb68-147">Team members can see how their changes will behave in a real AKS environment.</span></span> <span data-ttu-id="1cb68-148">Entwickler können Code schnell mithilfe von Visual Studio 2017 oder Visual Studio Code direkt in Kubernetes durchlaufen und Debuggen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-148">Developers can rapidly iterate and debug code directly in Kubernetes using Visual Studio 2017 or Visual Studio Code.</span></span>

<span data-ttu-id="1cb68-149">In Abbildung 2-7 können Sie sehen, dass Developer Susie eine aktualisierte Version des Bikes-mikroservice in Ihrem Entwicklungsbereich bereitgestellt hat.</span><span class="sxs-lookup"><span data-stu-id="1cb68-149">In Figure 2-7, you can see that Developer Susie has deployed an updated version of the Bikes microservice into her dev space.</span></span> <span data-ttu-id="1cb68-150">Sie kann Ihre Änderungen dann mithilfe einer benutzerdefinierten URL testen, beginnend mit dem Namen Ihres Platzes (Susie.s.dev.MyApp.EUS.azds.IO).</span><span class="sxs-lookup"><span data-stu-id="1cb68-150">She's then able to test her changes using a custom URL starting with the name of her space (susie.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="1cb68-151">![eshoponcontainers-Architektur ](./media/azure-devspaces-one.png)
 **Abbildung 2-7**.</span><span class="sxs-lookup"><span data-stu-id="1cb68-151">![eShopOnContainers Architecture](./media/azure-devspaces-one.png)
**Figure 2-7**.</span></span> <span data-ttu-id="1cb68-152">Developer Susie stellt eine eigene Version des Bikes-mikroservice bereit und testet Sie.</span><span class="sxs-lookup"><span data-stu-id="1cb68-152">Developer Susie deploys her own version of the Bikes microservice and tests it.</span></span>

<span data-ttu-id="1cb68-153">Gleichzeitig passt der Entwickler John den "Reservierungen"-mikroservice an und muss seine Änderungen testen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-153">At the same time, developer John is customizing the Reservations microservice and needs to test his changes.</span></span> <span data-ttu-id="1cb68-154">Er stellt seine Änderungen in seinem eigenen Entwicklungsbereich bereit, ohne mit den Änderungen von Susie zu in Konflikt zu stehen, wie in Abbildung 2-8 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="1cb68-154">He deploys his changes to his own dev space without conflicting with Susie's changes as shown in Figure 2-8.</span></span> <span data-ttu-id="1cb68-155">John testet seine Änderungen dann mit seiner eigenen URL, der der Name seines leer Zeichens vorangestellt ist (John.s.dev.MyApp.EUS.azds.IO).</span><span class="sxs-lookup"><span data-stu-id="1cb68-155">John then tests his changes using his own URL that is prefixed with the name of his space (john.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="1cb68-156">![eshoponcontainers-Architektur ](./media/azure-devspaces-two.png)
 **Abbildung 2-8**.</span><span class="sxs-lookup"><span data-stu-id="1cb68-156">![eShopOnContainers Architecture](./media/azure-devspaces-two.png)
**Figure 2-8**.</span></span> <span data-ttu-id="1cb68-157">Entwickler John stellt seine eigene Version des Reservierungs-und Test Dienstanbieter bereit und testet diese, ohne mit anderen Entwicklern in Konflikt zu geraten.</span><span class="sxs-lookup"><span data-stu-id="1cb68-157">Developer John deploys his own version of the Reservations microservice and tests it without conflicting with other developers.</span></span>

<span data-ttu-id="1cb68-158">Mithilfe Azure dev Spaces können Teams direkt mit AKS arbeiten, während Sie Ihre Änderungen unabhängig voneinander ändern, bereitstellen und testen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-158">Using Azure Dev Spaces, teams can work directly with AKS while independently changing, deploying, and testing their changes.</span></span> <span data-ttu-id="1cb68-159">Diese Vorgehensweise verringert den Bedarf an separaten dedizierten gehosteten Umgebungen, da jeder Entwickler effektiv über eine eigene AKS-Umgebung verfügt.</span><span class="sxs-lookup"><span data-stu-id="1cb68-159">This approach reduces the need for separate dedicated hosted environments since every developer effectively has their own AKS environment.</span></span> <span data-ttu-id="1cb68-160">Entwickler können mit der Befehlszeilenschnittstelle Azure dev Spaces arbeiten oder Ihre Anwendung starten, um direkt von Visual Studio aus zu Azure dev Spaces.</span><span class="sxs-lookup"><span data-stu-id="1cb68-160">Developers can work with Azure Dev Spaces using its CLI or launch their application to Azure Dev Spaces directly from Visual Studio.</span></span> [<span data-ttu-id="1cb68-161">Erfahren Sie mehr darüber, wie Azure dev Spaces funktioniert und konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="1cb68-161">Learn more about how Azure Dev Spaces works and is configured.</span></span>](/azure/dev-spaces/how-dev-spaces-works)

## <a name="azure-functions-and-logic-apps-serverless"></a><span data-ttu-id="1cb68-162">Azure Functions und Logic Apps (Server lose)</span><span class="sxs-lookup"><span data-stu-id="1cb68-162">Azure Functions and Logic Apps (Serverless)</span></span>

<span data-ttu-id="1cb68-163">Das eshoponcontainers-Beispiel bietet Unterstützung für die Nachverfolgung von Online Marketingkampagnen.</span><span class="sxs-lookup"><span data-stu-id="1cb68-163">The eShopOnContainers sample includes support for tracking online marketing campaigns.</span></span> <span data-ttu-id="1cb68-164">Eine Azure-Funktion wird zum Nachverfolgen von Marketingkampagnen Details für eine bestimmte Kampagnen-ID verwendet.</span><span class="sxs-lookup"><span data-stu-id="1cb68-164">An Azure Function is used to track marketing campaign details for a given campaign ID.</span></span> <span data-ttu-id="1cb68-165">Anstatt einen vollständigen-mikrodienst zu erstellen, ist eine einzelne Azure-Funktion einfacher und ausreichend.</span><span class="sxs-lookup"><span data-stu-id="1cb68-165">Rather than creating a full microservice, a single Azure Function is simpler and sufficient.</span></span> <span data-ttu-id="1cb68-166">Azure Functions über ein einfaches Build-und Bereitstellungs Modell verfügen, insbesondere, wenn es für die Verwendung in Kubernetes konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="1cb68-166">Azure Functions have a simple build and deployment model, especially when configured to run in Kubernetes.</span></span> <span data-ttu-id="1cb68-167">Das Bereitstellen der Funktion erfolgt mithilfe von Azure Resource Manager (Arm)-Vorlagen und der Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="1cb68-167">Deploying the function is scripted using Azure Resource Manager (ARM) templates and the Azure CLI.</span></span> <span data-ttu-id="1cb68-168">Dieser Kampagnen Dienst hat keinen Kunden Zugriff und Ruft einen einzelnen Vorgang auf, sodass er für Azure Functions hervorragend geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="1cb68-168">This campaign service isn't customer-facing and invokes a single operation, making it a great candidate for Azure Functions.</span></span> <span data-ttu-id="1cb68-169">Die-Funktion erfordert eine minimale Konfiguration, einschließlich Daten bankverbindungs Zeichenfolgen-Daten und URI-Basis Einstellungen für Images.</span><span class="sxs-lookup"><span data-stu-id="1cb68-169">The function requires minimal configuration, including a database connection string data and image base URI settings.</span></span> <span data-ttu-id="1cb68-170">Sie konfigurieren Azure Functions in der Azure-Portal.</span><span class="sxs-lookup"><span data-stu-id="1cb68-170">You configure Azure Functions in the Azure portal.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="1cb68-171">[Zurück](map-eshoponcontainers-azure-services.md)
>[Weiter](centralized-configuration.md)</span><span class="sxs-lookup"><span data-stu-id="1cb68-171">[Previous](map-eshoponcontainers-azure-services.md)
[Next](centralized-configuration.md)</span></span>
