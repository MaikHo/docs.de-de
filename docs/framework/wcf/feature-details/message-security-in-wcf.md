---
title: Nachrichtensicherheit in WCF
description: Erfahren Sie mehr über TransportWithMessageCredential, eine Art WCF-Nachrichten Sicherheit, die eine Kombination aus Transport-und Nachrichten Sicherheitsmodi verwendet.
ms.date: 03/30/2017
ms.assetid: a80efb59-591a-4a37-bb3c-8fffa6ca0b7d
ms.openlocfilehash: ea10a87a7c8f9e545c320af30c5cf9958317c2f7
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/15/2020
ms.locfileid: "90551131"
---
# <a name="message-security-in-wcf"></a><span data-ttu-id="ea20f-103">Nachrichtensicherheit in WCF</span><span class="sxs-lookup"><span data-stu-id="ea20f-103">Message Security in WCF</span></span>

<span data-ttu-id="ea20f-104">Windows Communication Foundation (WCF) verfügt über zwei Haupt Modi für die Bereitstellung von Sicherheit ( `Transport` und `Message` ) sowie einen dritten Modus ( `TransportWithMessageCredential` ), der die beiden kombiniert.</span><span class="sxs-lookup"><span data-stu-id="ea20f-104">Windows Communication Foundation (WCF) has two major modes for providing security (`Transport` and `Message`) and a third mode (`TransportWithMessageCredential`) that combines the two.</span></span> <span data-ttu-id="ea20f-105">In diesem Thema werden die Nachrichtensicherheit und die Gründe für deren Verwendung erläutert.</span><span class="sxs-lookup"><span data-stu-id="ea20f-105">This topic discusses message security and the reasons to use it.</span></span>

## <a name="what-is-message-security"></a><span data-ttu-id="ea20f-106">Was ist Nachrichtensicherheit?</span><span class="sxs-lookup"><span data-stu-id="ea20f-106">What Is Message Security?</span></span>

<span data-ttu-id="ea20f-107">Durch Nachrichtensicherheit werden Nachrichten mithilfe der WS-Sicherheitsspezifikation gesichert.</span><span class="sxs-lookup"><span data-stu-id="ea20f-107">Message security uses the WS-Security specification to secure messages.</span></span> <span data-ttu-id="ea20f-108">Die WS-Security-Spezifikation beschreibt Erweiterungen für SOAP-Messaging, um Vertraulichkeit, Integrität und Authentifizierung auf SOAP-Nachrichten Ebene (anstelle der Transport Ebene) sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="ea20f-108">The WS-Security specification describes enhancements to SOAP messaging to ensure confidentiality, integrity, and authentication at the SOAP message level (instead of the transport level).</span></span>

<span data-ttu-id="ea20f-109">Der Unterschied zwischen Nachrichtensicherheit und Transportsicherheit besteht kurz gesagt darin, dass bei der Nachrichtensicherheit die Sicherheitsanmeldeinformationen und Ansprüche zusammen mit dem Nachrichtenschutz in jeder Nachricht gekapselt werden (Signierung oder Verschlüsselung).</span><span class="sxs-lookup"><span data-stu-id="ea20f-109">In brief, message security differs from transport security by encapsulating the security credentials and claims with every message along with any message protection (signing or encryption).</span></span> <span data-ttu-id="ea20f-110">Die direkte Anwendung der Sicherheit auf die Nachricht durch das Ändern des Nachrichteninhalts ermöglicht gesicherte Nachrichten, die in Bezug auf Sicherheitsaspekte unabhängig sind.</span><span class="sxs-lookup"><span data-stu-id="ea20f-110">Applying the security directly to the message by modifying its content allows the secured message to be self-containing with respect to the security aspects.</span></span> <span data-ttu-id="ea20f-111">Hierdurch werden bestimmte Szenarien unterstützt, die bei Verwendung von Transportsicherheit nicht möglich sind.</span><span class="sxs-lookup"><span data-stu-id="ea20f-111">This enables some scenarios that are not possible when transport security is used.</span></span>

## <a name="reasons-to-use-message-security"></a><span data-ttu-id="ea20f-112">Gründe für die Verwendung von Nachrichtensicherheit</span><span class="sxs-lookup"><span data-stu-id="ea20f-112">Reasons to Use Message Security</span></span>

<span data-ttu-id="ea20f-113">Bei Verwendung von Sicherheit auf Nachrichtenebene sind alle Sicherheitsinformationen in der Nachricht gekapselt.</span><span class="sxs-lookup"><span data-stu-id="ea20f-113">In message-level security, all of the security information is encapsulated in the message.</span></span> <span data-ttu-id="ea20f-114">Die Sicherung von Nachrichten mit Sicherheit auf Nachrichtenebene anstelle von Sicherheit auf Transportebene bietet folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="ea20f-114">Securing the message with message-level security instead of transport-level security has the following advantages:</span></span>

- <span data-ttu-id="ea20f-115">End-to-End-Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="ea20f-115">End-to-end security.</span></span> <span data-ttu-id="ea20f-116">Transportsicherheit, z. B. Secure Sockets Layer (SSL), schützt Nachrichten nur bei Punkt-zu-Punkt-Kommunikation.</span><span class="sxs-lookup"><span data-stu-id="ea20f-116">Transport security, such as Secure Sockets Layer (SSL) only secures messages when the communication is point-to-point.</span></span> <span data-ttu-id="ea20f-117">Wenn die Nachricht vor dem Erreichen des eigentlichen Empfängers an einen oder mehrere SOAP-Vermittler (z. B. einen Router) weitergeleitet wird, ist die Nachricht selbst nicht mehr geschützt, sobald ein Vermittler diese liest.</span><span class="sxs-lookup"><span data-stu-id="ea20f-117">If the message is routed to one or more SOAP intermediaries (for example a router) before reaching the ultimate receiver, the message itself is not protected once an intermediary reads it from the wire.</span></span> <span data-ttu-id="ea20f-118">Darüber hinaus stehen die Clientauthentifizierungsinformationen nur dem ersten Vermittler zur Verfügung und müssen bei Bedarf "Out-of-Band" erneut an den endgültigen Empfänger übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="ea20f-118">Additionally, the client authentication information is available only to the first intermediary and must be re-transmitted to the ultimate receiver in out-of-band fashion, if necessary.</span></span> <span data-ttu-id="ea20f-119">Dies gilt auch dann, wenn auf dem gesamten Übertragungsweg SSL-Sicherheit zwischen den einzelnen Übertragungen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ea20f-119">This applies even if the entire route uses SSL security between individual hops.</span></span> <span data-ttu-id="ea20f-120">Da die Nachrichtensicherheit direkt auf die Nachricht angewendet wird und deren XML-Inhalt sichert, bleibt die Sicherheit der Nachricht unabhängig von der Anzahl der Vermittler gewahrt, an die die Nachricht vor Erreichen des endgültigen Empfängers übertragen wird.</span><span class="sxs-lookup"><span data-stu-id="ea20f-120">Because message security works directly with the message and secures the XML in it, the security stays with the message regardless of how many intermediaries are involved before it reaches the ultimate receiver.</span></span> <span data-ttu-id="ea20f-121">Dies ermöglicht ein echtes End-to-End-Sicherheitsszenario.</span><span class="sxs-lookup"><span data-stu-id="ea20f-121">This enables a true end-to-end security scenario.</span></span>

- <span data-ttu-id="ea20f-122">Mehr Flexibilität.</span><span class="sxs-lookup"><span data-stu-id="ea20f-122">Increased flexibility.</span></span> <span data-ttu-id="ea20f-123">Es können statt der ganzen Nachricht auch nur Teile der Nachricht signiert oder verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="ea20f-123">Parts of the message, instead of the entire message, can be signed or encrypted.</span></span> <span data-ttu-id="ea20f-124">Auf diese Weise können die Vermittler die Nachrichtenteile anzeigen, die für sie bestimmt sind.</span><span class="sxs-lookup"><span data-stu-id="ea20f-124">This means that intermediaries can view the parts of the message that are intended for them.</span></span> <span data-ttu-id="ea20f-125">Wenn der Absender möchte, dass die Informationen in der Nachricht für die Vermittler teilweise sichtbar sind, deren Bearbeitung jedoch ausgeschlossen werden soll, kann er die Nachricht nur signieren und unverschlüsselt lassen.</span><span class="sxs-lookup"><span data-stu-id="ea20f-125">If the sender needs to make part of the information in the message visible to the intermediaries but wants to ensure that it is not tampered with, it can just sign it but leave it unencrypted.</span></span> <span data-ttu-id="ea20f-126">Da die Signatur Teil der Nachricht ist, kann der endgültige Empfänger überprüfen, ob die Informationen in der Nachricht unverändert geblieben sind.</span><span class="sxs-lookup"><span data-stu-id="ea20f-126">Since the signature is part of the message, the ultimate receiver can verify that the information in the message was received intact.</span></span> <span data-ttu-id="ea20f-127">Ein Szenario könnte sein, dass ein SOAP-Vermittlungsdienst Nachrichten entsprechend dem Aktionsheaderwert weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="ea20f-127">One scenario might have a SOAP intermediary service that routes message according the Action header value.</span></span> <span data-ttu-id="ea20f-128">WCF verschlüsselt den Aktionswert standardmäßig nicht, signiert ihn jedoch, wenn die Nachrichten Sicherheit verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ea20f-128">By default, WCF does not encrypt the Action value but signs it if message security is used.</span></span> <span data-ttu-id="ea20f-129">Daher stehen die Informationen allen Vermittlern zur Verfügung, können von diesen jedoch nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="ea20f-129">Therefore, this information is available to all intermediaries, but no one can change it.</span></span>

- <span data-ttu-id="ea20f-130">Unterstützung mehrerer Transporte.</span><span class="sxs-lookup"><span data-stu-id="ea20f-130">Support for multiple transports.</span></span> <span data-ttu-id="ea20f-131">Sie können gesicherte Nachrichten über viele verschiedene Transporte senden, z. B. benannte Pipes und TCP, ohne sich hinsichtlich Sicherheit auf das Protokoll verlassen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="ea20f-131">You can send secured messages over many different transports, such as named pipes and TCP, without having to rely on the protocol for security.</span></span> <span data-ttu-id="ea20f-132">Bei Sicherheit auf Transportebene sind alle Sicherheitsinformationen auf eine einzelne Transportverbindung beschränkt und nicht im Nachrichteninhalt selbst verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ea20f-132">With transport-level security, all the security information is scoped to a single particular transport connection and is not available from the message content itself.</span></span> <span data-ttu-id="ea20f-133">Bei Nachrichtensicherheit wird die Nachricht unabhängig von dem für die Übertragung der Nachricht verwendeten Transport gesichert, und der Sicherheitskontext ist direkt in die Nachricht eingebettet.</span><span class="sxs-lookup"><span data-stu-id="ea20f-133">Message security makes the message secure regardless of what transport you use to transmit the message, and the security context is directly embedded inside the message.</span></span>

- <span data-ttu-id="ea20f-134">Unterstützung eines umfangreichen Satzes von Anmeldeinformationen und Ansprüchen.</span><span class="sxs-lookup"><span data-stu-id="ea20f-134">Support for a wide set of credentials and claims.</span></span> <span data-ttu-id="ea20f-135">Die Nachrichtensicherheit basiert auf der WS-Sicherheitsspezifikation. Diese bietet ein erweiterungsfähiges Framework, mit dem jegliche Art von Anspruch innerhalb der SOAP-Nachricht übertragen werden kann.</span><span class="sxs-lookup"><span data-stu-id="ea20f-135">The message security is based on the WS-Security specification, which provides an extensible framework capable of transmitting any type of claim inside the SOAP message.</span></span> <span data-ttu-id="ea20f-136">Im Gegensatz zur Transportsicherheit ist der Satz von Authentifizierungsmechanismen oder Ansprüchen, die Sie verwenden können, nicht durch die Transportfunktionen beschränkt.</span><span class="sxs-lookup"><span data-stu-id="ea20f-136">Unlike transport security, the set of authentication mechanisms, or claims, that you can use is not limited by the transport capabilities.</span></span> <span data-ttu-id="ea20f-137">WCF-Nachrichten Sicherheit beinhaltet mehrere Authentifizierungs-und Anspruchs Übertragungsarten und kann so erweitert werden, dass bei Bedarf zusätzliche Typen unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="ea20f-137">WCF message security includes multiple types of authentication and claim transmission and can be extended to support additional types as necessary.</span></span> <span data-ttu-id="ea20f-138">Aus diesen Gründen ist beispielsweise ein Szenario mit verbundenen Anmeldeinformationen ohne Nachrichtensicherheit nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="ea20f-138">For those reasons, for example, a federated credentials scenario is not possible without message security.</span></span> <span data-ttu-id="ea20f-139">Weitere Informationen zu Verbund Szenarien, die von WCF unterstützt werden, finden Sie unter Verbund [und ausgestellte Token](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="ea20f-139">For more information about federation scenarios WCF supports, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>

## <a name="how-message-and-transport-security-compare"></a><span data-ttu-id="ea20f-140">Vergleich von Nachrichten- und Transportsicherheit</span><span class="sxs-lookup"><span data-stu-id="ea20f-140">How Message and Transport Security Compare</span></span>

### <a name="pros-and-cons-of-transport-level-security"></a><span data-ttu-id="ea20f-141">Vor- und Nachteile der Sicherheit auf Transportebene</span><span class="sxs-lookup"><span data-stu-id="ea20f-141">Pros and Cons of Transport-Level Security</span></span>

<span data-ttu-id="ea20f-142">Die Transportsicherheit bietet folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="ea20f-142">Transport security has the following advantages:</span></span>

- <span data-ttu-id="ea20f-143">Es ist nicht erforderlich, dass die Kommunikationspartner mit den Konzepten der Sicherheit auf XML-Ebene vertraut sind.</span><span class="sxs-lookup"><span data-stu-id="ea20f-143">Does not require that the communicating parties understand XML-level security concepts.</span></span> <span data-ttu-id="ea20f-144">Dies trägt zu einer besseren Interoperabilität bei, z. B. wenn zum Sichern der Kommunikation HTTPS verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ea20f-144">This can improve the interoperability, for example, when HTTPS is used to secure the communication.</span></span>

- <span data-ttu-id="ea20f-145">Insgesamt höhere Leistung.</span><span class="sxs-lookup"><span data-stu-id="ea20f-145">Generally improved performance.</span></span>

- <span data-ttu-id="ea20f-146">Hardwarebeschleunigung ist verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ea20f-146">Hardware accelerators are available.</span></span>

- <span data-ttu-id="ea20f-147">Streaming ist möglich.</span><span class="sxs-lookup"><span data-stu-id="ea20f-147">Streaming is possible.</span></span>

 <span data-ttu-id="ea20f-148">Die Transportsicherheit hat folgende Nachteile:</span><span class="sxs-lookup"><span data-stu-id="ea20f-148">Transport security has the following disadvantages:</span></span>

- <span data-ttu-id="ea20f-149">Nur Hop-to-Hop (übertragungsbasiert).</span><span class="sxs-lookup"><span data-stu-id="ea20f-149">Hop-to-hop only.</span></span>

- <span data-ttu-id="ea20f-150">Beschränkter und nicht erweiterbarer Satz von Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="ea20f-150">Limited and inextensible set of credentials.</span></span>

- <span data-ttu-id="ea20f-151">Transportabhängig.</span><span class="sxs-lookup"><span data-stu-id="ea20f-151">Transport-dependent.</span></span>

### <a name="disadvantages-of-message-level-security"></a><span data-ttu-id="ea20f-152">Nachteile von Sicherheit auf Nachrichtenebene</span><span class="sxs-lookup"><span data-stu-id="ea20f-152">Disadvantages of Message-Level Security</span></span>

<span data-ttu-id="ea20f-153">Die Nachrichtensicherheit hat folgende Nachteile:</span><span class="sxs-lookup"><span data-stu-id="ea20f-153">Message security has the following disadvantages:</span></span>

- <span data-ttu-id="ea20f-154">Leistung</span><span class="sxs-lookup"><span data-stu-id="ea20f-154">Performance</span></span>

- <span data-ttu-id="ea20f-155">Nachrichtenstreaming kann nicht verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ea20f-155">Cannot use message streaming.</span></span>

- <span data-ttu-id="ea20f-156">Erfordert die Implementierung von Sicherheitsmechanismen auf XML-Ebene und Unterstützung der WS-Sicherheitsspezifikation.</span><span class="sxs-lookup"><span data-stu-id="ea20f-156">Requires implementation of XML-level security mechanisms and support for WS-Security specification.</span></span> <span data-ttu-id="ea20f-157">Dies kann sich auf die Interoperabilität auswirken.</span><span class="sxs-lookup"><span data-stu-id="ea20f-157">This might affect the interoperability.</span></span>

## <a name="see-also"></a><span data-ttu-id="ea20f-158">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="ea20f-158">See also</span></span>

- [<span data-ttu-id="ea20f-159">Sichern von Diensten und Clients</span><span class="sxs-lookup"><span data-stu-id="ea20f-159">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="ea20f-160">Transport Sicherheit</span><span class="sxs-lookup"><span data-stu-id="ea20f-160">Transport Security</span></span>](transport-security.md)
- [<span data-ttu-id="ea20f-161">Vorgehensweise: Verwenden von Transportsicherheit und Nachrichtenanmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="ea20f-161">How to: Use Transport Security and Message Credentials</span></span>](how-to-use-transport-security-and-message-credentials.md)
- <span data-ttu-id="ea20f-162">[Microsoft Patterns and Practices, Chapter 3: Implementing Transport and Message Layer Security (in englischer Sprache)](/previous-versions/msp-n-p/ff647370(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="ea20f-162">[Microsoft Patterns and Practices, Chapter 3: Implementing Transport and Message Layer Security](/previous-versions/msp-n-p/ff647370(v=pandp.10))</span></span>
