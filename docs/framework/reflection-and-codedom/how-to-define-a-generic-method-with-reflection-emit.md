---
title: 'Vorgehensweise: Definieren einer generischen Methode mit Reflektionsausgabe'
description: Hier erfahren Sie, wie Sie eine generische Methode mit Reflexionsausgabe definieren. Ein Beispiel erstellt eine generische Methode mit zwei Typparametern. Ein zweites Beispiel zeigt, wie der Methodenkörper ausgegeben wird.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- generics [.NET Framework], reflection emit
- reflection emit, generic methods
- generics [.NET Framework], dynamic types
ms.assetid: 93892fa4-90b3-4ec4-b147-4bec9880de2b
ms.openlocfilehash: 3b85fb480e5862daa3b2800f75392adbe92348f2
ms.sourcegitcommit: 3d84eac0818099c9949035feb96bbe0346358504
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 07/21/2020
ms.locfileid: "86865137"
---
# <a name="how-to-define-a-generic-method-with-reflection-emit"></a><span data-ttu-id="51ddb-105">Vorgehensweise: Definieren einer generischen Methode mit Reflektionsausgabe</span><span class="sxs-lookup"><span data-stu-id="51ddb-105">How to: Define a Generic Method with Reflection Emit</span></span>

<span data-ttu-id="51ddb-106">Im ersten Verfahren wird veranschaulicht, wie eine einfache generische Methode mit zwei Typparametern erstellt wird und wie auf die Typparameter Klasseneinschränkungen, Schnittstelleneinschränkungen und besonderen Einschränkungen angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="51ddb-106">The first procedure shows how to create a simple generic method with two type parameters, and how to apply class constraints, interface constraints, and special constraints to the type parameters.</span></span>

<span data-ttu-id="51ddb-107">Im zweiten Verfahren wird veranschaulicht, wie der Methodentext ausgegeben wird und wie mithilfe der Typparameter der generischen Methode Instanzen generischer Typen erstellt und deren Methoden aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="51ddb-107">The second procedure shows how to emit the method body, and how to use the type parameters of the generic method to create instances of generic types and to call their methods.</span></span>

<span data-ttu-id="51ddb-108">Im dritten Verfahren wird das Aufrufen der generischen Methode veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-108">The third procedure shows how to invoke the generic method.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="51ddb-109">Eine Methode ist nicht generisch, weil sie zu einem generischen Typ gehört und die Typparameter dieses Typs verwendet.</span><span class="sxs-lookup"><span data-stu-id="51ddb-109">A method is not generic just because it belongs to a generic type and uses the type parameters of that type.</span></span> <span data-ttu-id="51ddb-110">Eine Methode ist nur dann generisch, wenn sie über eine eigene Typparameterliste verfügt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-110">A method is generic only if it has its own type parameter list.</span></span> <span data-ttu-id="51ddb-111">Eine generische Methode kann zu einem nicht generischen Typ gehören, wie im vorliegenden Beispiel.</span><span class="sxs-lookup"><span data-stu-id="51ddb-111">A generic method can appear on a nongeneric type, as in this example.</span></span> <span data-ttu-id="51ddb-112">Ein Beispiel für eine nicht generische Methode für einen generischen Typ finden Sie unter [Vorgehensweise: Definieren eines generischen Typs mit Reflektionsausgabe](how-to-define-a-generic-type-with-reflection-emit.md).</span><span class="sxs-lookup"><span data-stu-id="51ddb-112">For an example of a nongeneric method on a generic type, see [How to: Define a Generic Type with Reflection Emit](how-to-define-a-generic-type-with-reflection-emit.md).</span></span>

### <a name="to-define-a-generic-method"></a><span data-ttu-id="51ddb-113">So definieren Sie eine generische Methode</span><span class="sxs-lookup"><span data-stu-id="51ddb-113">To define a generic method</span></span>

1. <span data-ttu-id="51ddb-114">Sie sollten sich zunächst einmal klarmachen, wie eine in einer hoch entwickelten Sprache geschriebene generische Methode aussieht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-114">Before beginning, it is useful to look at how the generic method appears when written using a high-level language.</span></span> <span data-ttu-id="51ddb-115">Der folgende Code befindet sich, zusammen mit dem Code zum Aufrufen der generischen Methode, im Beispielcode für dieses Thema.</span><span class="sxs-lookup"><span data-stu-id="51ddb-115">The following code is included in the example code for this topic, along with code to call the generic method.</span></span> <span data-ttu-id="51ddb-116">Die Methode verfügt über die beiden Typparameter `TInput` und `TOutput`, wobei der zweite ein Referenztyp sein muss (`class`), einen parameterlosen Konstruktor (`new`) aufweisen und `ICollection(Of TInput)` (`ICollection<TInput>` in C#) implementieren muss.</span><span class="sxs-lookup"><span data-stu-id="51ddb-116">The method has two type parameters, `TInput` and `TOutput`, the second of which must be a reference type (`class`), must have a parameterless constructor (`new`), and must implement `ICollection(Of TInput)` (`ICollection<TInput>` in C#).</span></span> <span data-ttu-id="51ddb-117">Dank dieser Schnittstelleneinschränkung kann die <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType>-Methode zum Hinzufügen von Elementen zur `TOutput`-Auflistung verwendet werden, die von der Methode erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="51ddb-117">This interface constraint ensures that the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method can be used to add elements to the `TOutput` collection that the method creates.</span></span> <span data-ttu-id="51ddb-118">Die Methode verfügt über einen formalen Parameter `input`, der ein Array von `TInput` ist.</span><span class="sxs-lookup"><span data-stu-id="51ddb-118">The method has one formal parameter, `input`, which is an array of `TInput`.</span></span> <span data-ttu-id="51ddb-119">Die Methode erstellt eine Auflistung vom Typ `TOutput` und kopiert die Elemente von `input` in die Auflistung.</span><span class="sxs-lookup"><span data-stu-id="51ddb-119">The method creates a collection of type `TOutput` and copies the elements of `input` to the collection.</span></span>

    [!code-csharp[GenericMethodHowTo#20](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#20)]
    [!code-vb[GenericMethodHowTo#20](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#20)]

2. <span data-ttu-id="51ddb-120">Definieren Sie eine dynamische Assembly und ein dynamisches Modul, um den Typ aufzunehmen, dem die generische Methode angehört.</span><span class="sxs-lookup"><span data-stu-id="51ddb-120">Define a dynamic assembly and a dynamic module to contain the type the generic method belongs to.</span></span> <span data-ttu-id="51ddb-121">Die Assembly enthält in diesem Fall nur ein Modul mit der Bezeichnung `DemoMethodBuilder1`. Der Modulname setzt sich aus dem Assemblynamen und einer Erweiterung zusammen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-121">In this case, the assembly has only one module, named `DemoMethodBuilder1`, and the module name is the same as the assembly name plus an extension.</span></span> <span data-ttu-id="51ddb-122">In diesem Beispiel wird die Assembly ausgeführt und auf einem Datenträger gespeichert, daher wird <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> angegeben.</span><span class="sxs-lookup"><span data-stu-id="51ddb-122">In this example, the assembly is saved to disk and also executed, so <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> is specified.</span></span> <span data-ttu-id="51ddb-123">Mithilfe von [Ildasm.exe (IL-Disassembler)](../tools/ildasm-exe-il-disassembler.md) können Sie DemoMethodBuilder1.dll untersuchen und mit dem in Schritt 1 gezeigten Microsoft Intermediate Language (MSIL)-Code für die Methode vergleichen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-123">You can use the [Ildasm.exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md) to examine DemoMethodBuilder1.dll and to compare it to the Microsoft intermediate language (MSIL) for the method shown in step 1.</span></span>

    [!code-csharp[GenericMethodHowTo#2](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#2)]
    [!code-vb[GenericMethodHowTo#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#2)]

3. <span data-ttu-id="51ddb-124">Definieren Sie den Typ, zu dem die generische Methode gehört.</span><span class="sxs-lookup"><span data-stu-id="51ddb-124">Define the type the generic method belongs to.</span></span> <span data-ttu-id="51ddb-125">Der Typ muss nicht generisch sein.</span><span class="sxs-lookup"><span data-stu-id="51ddb-125">The type does not have to be generic.</span></span> <span data-ttu-id="51ddb-126">Eine generische Methode kann sowohl zu einem generischen als auch zu einem nicht generischen Typ gehören.</span><span class="sxs-lookup"><span data-stu-id="51ddb-126">A generic method can belong to either a generic or nongeneric type.</span></span> <span data-ttu-id="51ddb-127">Der Typ ist hier eine Klasse, ist nicht generisch und trägt die Bezeichnung `DemoType`.</span><span class="sxs-lookup"><span data-stu-id="51ddb-127">In this example, the type is a class, is not generic, and is named `DemoType`.</span></span>

    [!code-csharp[GenericMethodHowTo#3](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#3)]
    [!code-vb[GenericMethodHowTo#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#3)]

4. <span data-ttu-id="51ddb-128">Definieren Sie die generische Methode.</span><span class="sxs-lookup"><span data-stu-id="51ddb-128">Define the generic method.</span></span> <span data-ttu-id="51ddb-129">Wenn die Typen der formalen Parameter einer generischen Methode durch generische Typparameter der generischen Methode angegeben werden, definieren Sie die Methode mithilfe der <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%28System.String%2CSystem.Reflection.MethodAttributes%29>-Methodenüberladung.</span><span class="sxs-lookup"><span data-stu-id="51ddb-129">If the types of a generic method's formal parameters are specified by generic type parameters of the generic method, use the <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%28System.String%2CSystem.Reflection.MethodAttributes%29> method overload to define the method.</span></span> <span data-ttu-id="51ddb-130">Da die generischen Typparameter der Methode noch nicht definiert sind, können Sie die Typen der formalen Parameter der Methode im Aufruf von <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%2A> nicht angeben.</span><span class="sxs-lookup"><span data-stu-id="51ddb-130">The generic type parameters of the method are not yet defined, so you cannot specify the types of the method's formal parameters in the call to <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%2A>.</span></span> <span data-ttu-id="51ddb-131">In diesem Beispiel trägt die Methode die Bezeichnung `Factory`.</span><span class="sxs-lookup"><span data-stu-id="51ddb-131">In this example, the method is named `Factory`.</span></span> <span data-ttu-id="51ddb-132">Die Methode ist öffentlich und `static` (`Shared` in Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="51ddb-132">The method is public and `static` (`Shared` in Visual Basic).</span></span>

    [!code-csharp[GenericMethodHowTo#4](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#4)]
    [!code-vb[GenericMethodHowTo#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#4)]

5. <span data-ttu-id="51ddb-133">Definieren Sie die generischen Typparameter von `DemoMethod`, indem Sie ein Array von Zeichenfolgen, das die Namen der Parameter enthält, an die <xref:System.Reflection.Emit.MethodBuilder.DefineGenericParameters%2A?displayProperty=nameWithType>-Methode übergeben.</span><span class="sxs-lookup"><span data-stu-id="51ddb-133">Define the generic type parameters of `DemoMethod` by passing an array of strings containing the names of the parameters to the <xref:System.Reflection.Emit.MethodBuilder.DefineGenericParameters%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="51ddb-134">Dadurch wird die Methode zu einer generischen Methode.</span><span class="sxs-lookup"><span data-stu-id="51ddb-134">This makes the method a generic method.</span></span> <span data-ttu-id="51ddb-135">Im folgenden Code wird `Factory` zu einer generischen Methode mit den beiden Typparametern `TInput` und `TOutput` gemacht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-135">The following code makes `Factory` a generic method with type parameters `TInput` and `TOutput`.</span></span> <span data-ttu-id="51ddb-136">Um den Code verständlicher zu gestalten, werden gleichnamige Variablen erstellt, die die <xref:System.Reflection.Emit.GenericTypeParameterBuilder>-Objekte aufnehmen, die die beiden Typparameter darstellen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-136">To make the code easier to read, variables with these names are created to hold the <xref:System.Reflection.Emit.GenericTypeParameterBuilder> objects representing the two type parameters.</span></span>

    [!code-csharp[GenericMethodHowTo#5](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#5)]
    [!code-vb[GenericMethodHowTo#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#5)]

6. <span data-ttu-id="51ddb-137">Fügen Sie den Typparametern bei Bedarf besondere Einschränkungen hinzu.</span><span class="sxs-lookup"><span data-stu-id="51ddb-137">Optionally add special constraints to the type parameters.</span></span> <span data-ttu-id="51ddb-138">Besondere Einschränkungen werden mit der <xref:System.Reflection.Emit.GenericTypeParameterBuilder.SetGenericParameterAttributes%2A>-Methode hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-138">Special constraints are added using the <xref:System.Reflection.Emit.GenericTypeParameterBuilder.SetGenericParameterAttributes%2A> method.</span></span> <span data-ttu-id="51ddb-139">In diesem Beispiel wird `TOutput` durch eine Einschränkung zu einem Referenztyp, der über einen parameterlosen Konstruktor verfügt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-139">In this example, `TOutput` is constrained to be a reference type and to have a parameterless constructor.</span></span>

    [!code-csharp[GenericMethodHowTo#6](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#6)]
    [!code-vb[GenericMethodHowTo#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#6)]

7. <span data-ttu-id="51ddb-140">Fügen Sie den Typparametern bei Bedarf Klassen- und Schnittstelleneinschränkungen hinzu.</span><span class="sxs-lookup"><span data-stu-id="51ddb-140">Optionally add class and interface constraints to the type parameters.</span></span> <span data-ttu-id="51ddb-141">In diesem Beispiel wird der Typparameter `TOutput` auf Typen eingeschränkt, die die `ICollection(Of TInput)`-Schnittstelle (`ICollection<TInput>` in C#) implementieren.</span><span class="sxs-lookup"><span data-stu-id="51ddb-141">In this example, type parameter `TOutput` is constrained to types that implement the `ICollection(Of TInput)` (`ICollection<TInput>` in C#) interface.</span></span> <span data-ttu-id="51ddb-142">Dadurch kann die <xref:System.Collections.Generic.ICollection%601.Add%2A>-Methode zum Hinzufügen von Elementen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="51ddb-142">This ensures that the <xref:System.Collections.Generic.ICollection%601.Add%2A> method can be used to add elements.</span></span>

    [!code-csharp[GenericMethodHowTo#7](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#7)]
    [!code-vb[GenericMethodHowTo#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#7)]

8. <span data-ttu-id="51ddb-143">Definieren Sie die formalen Parameter der Methode mithilfe der <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A>-Methode.</span><span class="sxs-lookup"><span data-stu-id="51ddb-143">Define the formal parameters of the method, using the <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A> method.</span></span> <span data-ttu-id="51ddb-144">In diesem Beispiel verfügt die `Factory`-Methode über einen Parameter, ein Array von `TInput`.</span><span class="sxs-lookup"><span data-stu-id="51ddb-144">In this example, the `Factory` method has one parameter, an array of `TInput`.</span></span> <span data-ttu-id="51ddb-145">Dieser Typ wird durch aufrufen der <xref:System.Type.MakeArrayType%2A>-Methode für <xref:System.Reflection.Emit.GenericTypeParameterBuilder> erstellt, der `TInput` darstellt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-145">This type is created by calling the <xref:System.Type.MakeArrayType%2A> method on the <xref:System.Reflection.Emit.GenericTypeParameterBuilder> that represents `TInput`.</span></span> <span data-ttu-id="51ddb-146">Das Argument von <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A> ist ein Array von <xref:System.Type>-Objekten.</span><span class="sxs-lookup"><span data-stu-id="51ddb-146">The argument of <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A> is an array of <xref:System.Type> objects.</span></span>

    [!code-csharp[GenericMethodHowTo#8](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#8)]
    [!code-vb[GenericMethodHowTo#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#8)]

9. <span data-ttu-id="51ddb-147">Definieren Sie den Rückgabetyp für die Methode mithilfe der <xref:System.Reflection.Emit.MethodBuilder.SetReturnType%2A>-Methode.</span><span class="sxs-lookup"><span data-stu-id="51ddb-147">Define the return type for the method, using the <xref:System.Reflection.Emit.MethodBuilder.SetReturnType%2A> method.</span></span> <span data-ttu-id="51ddb-148">In diesem Beispiel wird eine Instanz von `TOutput` zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="51ddb-148">In this example, an instance of `TOutput` is returned.</span></span>

    [!code-csharp[GenericMethodHowTo#9](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#9)]
    [!code-vb[GenericMethodHowTo#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#9)]

10. <span data-ttu-id="51ddb-149">Geben Sie den Methodentext mithilfe von <xref:System.Reflection.Emit.ILGenerator> aus.</span><span class="sxs-lookup"><span data-stu-id="51ddb-149">Emit the method body, using <xref:System.Reflection.Emit.ILGenerator>.</span></span> <span data-ttu-id="51ddb-150">Weitere Einzelheiten hierzu finden Sie im zugehörigen Verfahren zum Ausgeben des Methodentexts.</span><span class="sxs-lookup"><span data-stu-id="51ddb-150">For details, see the accompanying procedure for emitting the method body.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="51ddb-151">Wenn Sie Aufrufe von Methoden generischer Typen ausgeben und es sich bei den Typargumenten dieser Typen um Typparameter der generischen Methode handelt, müssen Sie über die `static`-Methodenüberladungen <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29>, <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29> und <xref:System.Reflection.Emit.TypeBuilder.GetField%28System.Type%2CSystem.Reflection.FieldInfo%29> der <xref:System.Reflection.Emit.TypeBuilder>-Klasse erstellte Formulare der Methoden abrufen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-151">When you emit calls to methods of generic types, and the type arguments of those types are type parameters of the generic method, you must use the `static`<xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29>, <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29>, and <xref:System.Reflection.Emit.TypeBuilder.GetField%28System.Type%2CSystem.Reflection.FieldInfo%29> method overloads of the <xref:System.Reflection.Emit.TypeBuilder> class to obtain constructed forms of the methods.</span></span> <span data-ttu-id="51ddb-152">Dies wird im zugehörigen Verfahren zum Ausgeben von Methodentext veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-152">The accompanying procedure for emitting the method body demonstrates this.</span></span>

11. <span data-ttu-id="51ddb-153">Vervollständigen Sie den Typ, der die Methode enthält, und speichern Sie die Assembly.</span><span class="sxs-lookup"><span data-stu-id="51ddb-153">Complete the type that contains the method and save the assembly.</span></span> <span data-ttu-id="51ddb-154">Im zugehörigen Verfahren zum Aufrufen der generischen Methode werden zwei Möglichkeiten zum Aufrufen der vollständigen Methode veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-154">The accompanying procedure for invoking the generic method shows two ways to invoke the completed method.</span></span>

    [!code-csharp[GenericMethodHowTo#14](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#14)]
    [!code-vb[GenericMethodHowTo#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#14)]

<a name="procedureSection1"></a>

### <a name="to-emit-the-method-body"></a><span data-ttu-id="51ddb-155">So geben Sie den Methodentext aus</span><span class="sxs-lookup"><span data-stu-id="51ddb-155">To emit the method body</span></span>

1. <span data-ttu-id="51ddb-156">Rufen Sie einen Code-Generator ab, und deklarieren Sie lokale Variablen und Bezeichnungen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-156">Get a code generator and declare local variables and labels.</span></span> <span data-ttu-id="51ddb-157">Die lokalen Variablen werden mit der <xref:System.Reflection.Emit.ILGenerator.DeclareLocal%2A>-Methode deklariert.</span><span class="sxs-lookup"><span data-stu-id="51ddb-157">The <xref:System.Reflection.Emit.ILGenerator.DeclareLocal%2A> method is used to declare local variables.</span></span> <span data-ttu-id="51ddb-158">Die `Factory`-Methode verfügt über vier lokale Variablen: `retVal` nimmt den neuen `TOutput` auf, der von der Methode zurückgegeben wird, `ic` nimmt den `TOutput` bei der Umwandlung in `ICollection(Of TInput)` (`ICollection<TInput>` in C#) auf, `input` nimmt das Eingabearray von `TInput`-Objekten auf, und `index` durchläuft das Array.</span><span class="sxs-lookup"><span data-stu-id="51ddb-158">The `Factory` method has four local variables: `retVal` to hold the new `TOutput` that is returned by the method, `ic` to hold the `TOutput` when it is cast to `ICollection(Of TInput)` (`ICollection<TInput>` in C#), `input` to hold the input array of `TInput` objects, and `index` to iterate through the array.</span></span> <span data-ttu-id="51ddb-159">Die Methode enthält auch zwei Bezeichnungen, eine zum Starten der Schleife (`enterLoop`) und eine für den Anfang der Schleife (`loopAgain`), die mit der <xref:System.Reflection.Emit.ILGenerator.DefineLabel%2A>-Methode definiert werden.</span><span class="sxs-lookup"><span data-stu-id="51ddb-159">The method also has two labels, one to enter the loop (`enterLoop`) and one for the top of the loop (`loopAgain`), defined using the <xref:System.Reflection.Emit.ILGenerator.DefineLabel%2A> method.</span></span>

    <span data-ttu-id="51ddb-160">Die Methode lädt zunächst mit dem <xref:System.Reflection.Emit.OpCodes.Ldarg_0>-Opcode ihre Argumente und speichert diese mit dem in dem `input`-Opcode in der lokalen Variable <xref:System.Reflection.Emit.OpCodes.Stloc_S>.</span><span class="sxs-lookup"><span data-stu-id="51ddb-160">The first thing the method does is to load its argument using <xref:System.Reflection.Emit.OpCodes.Ldarg_0> opcode and to store it in the local variable `input` using <xref:System.Reflection.Emit.OpCodes.Stloc_S> opcode.</span></span>

    [!code-csharp[GenericMethodHowTo#10](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#10)]
    [!code-vb[GenericMethodHowTo#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#10)]

2. <span data-ttu-id="51ddb-161">Geben Sie Code aus, um mithilfe der generischen Methodenüberladung der `TOutput`-Methode eine Instanz von <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType> zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-161">Emit code to create an instance of `TOutput`, using the generic method overload of the <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="51ddb-162">Für die Verwendung dieser Überladung muss der angegebene Typ über einen parameterlosen Konstruktor verfügen, daher wird `TOutput` diese Einschränkung hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-162">Using this overload requires the specified type to have a parameterless constructor, which is the reason for adding that constraint to `TOutput`.</span></span> <span data-ttu-id="51ddb-163">Erstellen Sie die erstellte generische Methode, indem Sie `TOutput` an <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A> übergeben.</span><span class="sxs-lookup"><span data-stu-id="51ddb-163">Create the constructed generic method by passing `TOutput` to <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A>.</span></span> <span data-ttu-id="51ddb-164">Geben Sie nach der Ausgabe von Code für den Methodenaufruf mithilfe von `retVal` Code zum Speichern in der lokalen Variable <xref:System.Reflection.Emit.OpCodes.Stloc_S> aus.</span><span class="sxs-lookup"><span data-stu-id="51ddb-164">After emitting code to call the method, emit code to store it in the local variable `retVal` using <xref:System.Reflection.Emit.OpCodes.Stloc_S></span></span>

    [!code-csharp[GenericMethodHowTo#11](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#11)]
    [!code-vb[GenericMethodHowTo#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#11)]

3. <span data-ttu-id="51ddb-165">Geben Sie Code aus, um das neue `TOutput`-Objekt in `ICollection(Of TInput)` umzuwandeln und dieses in der lokalen Variable `ic` zu speichern.</span><span class="sxs-lookup"><span data-stu-id="51ddb-165">Emit code to cast the new `TOutput` object to `ICollection(Of TInput)` and store it in the local variable `ic`.</span></span>

    [!code-csharp[GenericMethodHowTo#31](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#31)]
    [!code-vb[GenericMethodHowTo#31](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#31)]

4. <span data-ttu-id="51ddb-166">Rufen Sie eine <xref:System.Reflection.MethodInfo> ab, die die <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType>-Methode darstellt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-166">Get a <xref:System.Reflection.MethodInfo> representing the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="51ddb-167">Da diese Methode `ICollection(Of TInput)` (`ICollection<TInput>` in C#) behandelt, muss die für diesen erstellten Typ spezifische `Add`-Methode abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="51ddb-167">The method is acting on an `ICollection(Of TInput)` (`ICollection<TInput>` in C#), so it is necessary to get the `Add` method specific to that constructed type.</span></span> <span data-ttu-id="51ddb-168">Sie können diese <xref:System.Type.GetMethod%2A> nicht mithilfe der <xref:System.Reflection.MethodInfo>-Methode direkt aus `icollOfTInput` abrufen, da <xref:System.Type.GetMethod%2A> nicht für einen Typ unterstützt wird, der mit einem <xref:System.Reflection.Emit.GenericTypeParameterBuilder> erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="51ddb-168">You cannot use the <xref:System.Type.GetMethod%2A> method to get this <xref:System.Reflection.MethodInfo> directly from `icollOfTInput`, because <xref:System.Type.GetMethod%2A> is not supported on a type that has been constructed with a <xref:System.Reflection.Emit.GenericTypeParameterBuilder>.</span></span> <span data-ttu-id="51ddb-169">Rufen Sie stattdessen <xref:System.Type.GetMethod%2A> für `icoll` auf, der die Definition des generischen Typs für die generische <xref:System.Collections.Generic.ICollection%601>-Schnittstelle enthält.</span><span class="sxs-lookup"><span data-stu-id="51ddb-169">Instead, call <xref:System.Type.GetMethod%2A> on `icoll`, which contains the generic type definition for the <xref:System.Collections.Generic.ICollection%601> generic interface.</span></span> <span data-ttu-id="51ddb-170">Erzeugen Sie dann mithilfe der <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29>`static`-Methode die <xref:System.Reflection.MethodInfo> für den konstruierten Typ.</span><span class="sxs-lookup"><span data-stu-id="51ddb-170">Then use the <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29>`static` method to produce the <xref:System.Reflection.MethodInfo> for the constructed type.</span></span> <span data-ttu-id="51ddb-171">Im folgenden Code wird dies veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-171">The following code demonstrates this.</span></span>

    [!code-csharp[GenericMethodHowTo#12](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#12)]
    [!code-vb[GenericMethodHowTo#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#12)]

5. <span data-ttu-id="51ddb-172">Geben Sie Code aus, um die `index`-Variable zu initialisieren, indem Sie eine 32-Bit-Ganzzahl 0 laden und diese in der Variablen speichern.</span><span class="sxs-lookup"><span data-stu-id="51ddb-172">Emit code to initialize the `index` variable, by loading a 32-bit integer 0 and storing it in the variable.</span></span> <span data-ttu-id="51ddb-173">Geben Sie Code aus, um zur Bezeichnung `enterLoop` zu verzweigen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-173">Emit code to branch to the label `enterLoop`.</span></span> <span data-ttu-id="51ddb-174">Diese Bezeichnung wurde noch nicht markiert, da sie sich in der Schleife befindet.</span><span class="sxs-lookup"><span data-stu-id="51ddb-174">This label has not yet been marked, because it is inside the loop.</span></span> <span data-ttu-id="51ddb-175">Der Code für die Schleife wird im nächsten Schritt ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="51ddb-175">Code for the loop is emitted in the next step.</span></span>

    [!code-csharp[GenericMethodHowTo#32](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#32)]
    [!code-vb[GenericMethodHowTo#32](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#32)]

6. <span data-ttu-id="51ddb-176">Geben Sie Code für die Schleife aus.</span><span class="sxs-lookup"><span data-stu-id="51ddb-176">Emit code for the loop.</span></span> <span data-ttu-id="51ddb-177">Zunächst wird der Anfang der Schleife markiert, indem <xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> mit der `loopAgain`-Bezeichnung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="51ddb-177">The first step is to mark the top of the loop, by calling <xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> with the `loopAgain` label.</span></span> <span data-ttu-id="51ddb-178">Verzweigungsanweisungen, die die Bezeichnung verwenden, verzweigen jetzt zu diesem Punkt im Code.</span><span class="sxs-lookup"><span data-stu-id="51ddb-178">Branch statements that use the label will now branch to this point in the code.</span></span> <span data-ttu-id="51ddb-179">Anschließend wird das in `TOutput` umgewandelte `ICollection(Of TInput)`-Objekt auf dem Stapel abgelegt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-179">The next step is to push the `TOutput` object, cast to `ICollection(Of TInput)`, onto the stack.</span></span> <span data-ttu-id="51ddb-180">Es wird zwar nicht sofort benötigt, muss jedoch zum Aufrufen der `Add`-Methode vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="51ddb-180">It is not needed immediately, but needs to be in position for calling the `Add` method.</span></span> <span data-ttu-id="51ddb-181">Nun werden das Eingabearray auf dem Stapel und die `index`-Variable mit dem aktuellen Index im Array abgelegt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-181">Next the input array is pushed onto the stack, then the `index` variable containing the current index into the array.</span></span> <span data-ttu-id="51ddb-182">Der <xref:System.Reflection.Emit.OpCodes.Ldelem>-Opcode nimmt den Index und das Array vom Stapel auf und legt das indizierte Arrayelement auf dem Stapel ab.</span><span class="sxs-lookup"><span data-stu-id="51ddb-182">The <xref:System.Reflection.Emit.OpCodes.Ldelem> opcode pops the index and the array off the stack and pushes the indexed array element onto the stack.</span></span> <span data-ttu-id="51ddb-183">Der Stapel ist jetzt für das Aufrufen der <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType>-Methode bereit, die die Auflistung und das neue Element vom Stapel aufnimmt und das Element zur Auflistung hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-183">The stack is now ready for the call to the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method, which pops the collection and the new element off the stack and adds the element to the collection.</span></span>

    <span data-ttu-id="51ddb-184">Der Rest des Codes in der Schleife erhöht schrittweise den Index und Tests, um festzustellen, ob die Schleife beendet ist: Der Index und das 32-Bit-Integer 1 werden auf dem Stapel abgelegt und hinzugefügt, wobei die Summe auf dem Stapel bleibt; die Summe wird in `index` gespeichert.</span><span class="sxs-lookup"><span data-stu-id="51ddb-184">The rest of the code in the loop increments the index and tests to see whether the loop is finished: The index and a 32-bit integer 1 are pushed onto the stack and added, leaving the sum on the stack; the sum is stored in `index`.</span></span> <span data-ttu-id="51ddb-185"><xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> wird aufgerufen, um diesen Punkt als Einstiegspunkt für die Schleife festzulegen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-185"><xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> is called to set this point as the entry point for the loop.</span></span> <span data-ttu-id="51ddb-186">Der Index wird erneut geladen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-186">The index is loaded again.</span></span> <span data-ttu-id="51ddb-187">Das Eingabearray wird auf dem Stapel abgelegt und <xref:System.Reflection.Emit.OpCodes.Ldlen> wird ausgegeben, um seine Länge abzurufen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-187">The input array is pushed on the stack, and <xref:System.Reflection.Emit.OpCodes.Ldlen> is emitted to get its length.</span></span> <span data-ttu-id="51ddb-188">Nun befinden sich der Index und die Länge auf dem Stapel, und <xref:System.Reflection.Emit.OpCodes.Clt> wird ausgegeben, um sie zu vergleichen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-188">The index and the length are now on the stack, and <xref:System.Reflection.Emit.OpCodes.Clt> is emitted to compare them.</span></span> <span data-ttu-id="51ddb-189">Wenn der Index kleiner als die Länge ist, verzweigt <xref:System.Reflection.Emit.OpCodes.Brtrue_S> zurück zum Anfang der Schleife.</span><span class="sxs-lookup"><span data-stu-id="51ddb-189">If the index is less than the length, <xref:System.Reflection.Emit.OpCodes.Brtrue_S> branches back to the beginning of the loop.</span></span>

    [!code-csharp[GenericMethodHowTo#13](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#13)]
    [!code-vb[GenericMethodHowTo#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#13)]

7. <span data-ttu-id="51ddb-190">Geben Sie Code aus, um das `TOutput`-Objekt auf dem Stapel abzulegen und die Methode zu beenden.</span><span class="sxs-lookup"><span data-stu-id="51ddb-190">Emit code to push the `TOutput` object onto the stack and return from the method.</span></span> <span data-ttu-id="51ddb-191">Die lokalen Variablen `retVal` und `ic` enthalten beide Verweise auf die neue `TOutput`. `ic` wird nur für den Zugriff auf die <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType>-Methode verwendet.</span><span class="sxs-lookup"><span data-stu-id="51ddb-191">The local variables `retVal` and `ic` both contain references to the new `TOutput`; `ic` is used only to access the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method.</span></span>

    [!code-csharp[GenericMethodHowTo#33](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#33)]
    [!code-vb[GenericMethodHowTo#33](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#33)]

<a name="procedureSection2"></a>

### <a name="to-invoke-the-generic-method"></a><span data-ttu-id="51ddb-192">So rufen Sie die generische Methode auf</span><span class="sxs-lookup"><span data-stu-id="51ddb-192">To invoke the generic method</span></span>

1. <span data-ttu-id="51ddb-193">`Factory` ist eine generische Methodendefinition.</span><span class="sxs-lookup"><span data-stu-id="51ddb-193">`Factory` is a generic method definition.</span></span> <span data-ttu-id="51ddb-194">Um sie aufzurufen, müssen Sie ihren generischen Typparametern Typen zuweisen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-194">In order to invoke it, you must assign types to its generic type parameters.</span></span> <span data-ttu-id="51ddb-195">Verwenden Sie hierfür die <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A>-Methode.</span><span class="sxs-lookup"><span data-stu-id="51ddb-195">Use the <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A> method to do this.</span></span> <span data-ttu-id="51ddb-196">Im folgenden Code wird eine konstruierte generische Methode erstellt. Dabei wird <xref:System.String> für `TInput` und `List(Of String)` (`List<string>` in C#) für `TOutput` angegeben, und es wird eine Zeichenfolgendarstellung der Methode angezeigt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-196">The following code creates a constructed generic method, specifying <xref:System.String> for `TInput` and `List(Of String)` (`List<string>` in C#) for `TOutput`, and displays a string representation of the method.</span></span>

    [!code-csharp[GenericMethodHowTo#21](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#21)]
    [!code-vb[GenericMethodHowTo#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#21)]

2. <span data-ttu-id="51ddb-197">Um die Methode spät gebunden aufzurufen, verwenden Sie die <xref:System.Reflection.MethodBase.Invoke%2A>-Methode.</span><span class="sxs-lookup"><span data-stu-id="51ddb-197">To invoke the method late-bound, use the <xref:System.Reflection.MethodBase.Invoke%2A> method.</span></span> <span data-ttu-id="51ddb-198">Im folgenden Code wird ein Array von <xref:System.Object> erstellt, dessen einziges Element ein Array von Zeichenfolgen ist, und als Argumentliste für die generische Methode übergeben.</span><span class="sxs-lookup"><span data-stu-id="51ddb-198">The following code creates an array of <xref:System.Object>, containing as its only element an array of strings, and passes it as the argument list for the generic method.</span></span> <span data-ttu-id="51ddb-199">Der erste Parameter von <xref:System.Reflection.MethodBase.Invoke%2A> ist ein NULL-Verweis, da die Methode `static` ist.</span><span class="sxs-lookup"><span data-stu-id="51ddb-199">The first parameter of <xref:System.Reflection.MethodBase.Invoke%2A> is a null reference because the method is `static`.</span></span> <span data-ttu-id="51ddb-200">Der Rückgabewert wird in `List(Of String)` umgewandelt, und sein erstes Element wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-200">The return value is cast to `List(Of String)`, and its first element is displayed.</span></span>

    [!code-csharp[GenericMethodHowTo#22](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#22)]
    [!code-vb[GenericMethodHowTo#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#22)]

3. <span data-ttu-id="51ddb-201">Um die Methode mithilfe eines Delegaten aufzurufen, benötigen Sie einen Delegaten, der der Signatur der konstruierten generischen Methode entspricht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-201">To invoke the method using a delegate, you must have a delegate that matches the signature of the constructed generic method.</span></span> <span data-ttu-id="51ddb-202">Dafür erstellen Sie ganz einfach einen generischen Delegaten.</span><span class="sxs-lookup"><span data-stu-id="51ddb-202">An easy way to do this is to create a generic delegate.</span></span> <span data-ttu-id="51ddb-203">Im folgenden Code wird mithilfe der `D`-Methodenüberladung eine Instanz des im Beispielcode definierten generischen Delegaten <xref:System.Delegate.CreateDelegate%28System.Type%2CSystem.Reflection.MethodInfo%29?displayProperty=nameWithType> erstellt und aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-203">The following code creates an instance of the generic delegate `D` defined in the example code, using the <xref:System.Delegate.CreateDelegate%28System.Type%2CSystem.Reflection.MethodInfo%29?displayProperty=nameWithType> method overload, and invokes the delegate.</span></span> <span data-ttu-id="51ddb-204">Delegaten bieten eine bessere Leistung als spät gebundene Aufrufe.</span><span class="sxs-lookup"><span data-stu-id="51ddb-204">Delegates perform better than late-bound calls.</span></span>

    [!code-csharp[GenericMethodHowTo#23](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#23)]
    [!code-vb[GenericMethodHowTo#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#23)]

4. <span data-ttu-id="51ddb-205">Die ausgegebene Methode kann auch von einem Programm aufgerufen werden, das auf die gespeicherte Assembly verweist.</span><span class="sxs-lookup"><span data-stu-id="51ddb-205">The emitted method can also be called from a program that refers to the saved assembly.</span></span>

## <a name="example"></a><span data-ttu-id="51ddb-206">Beispiel</span><span class="sxs-lookup"><span data-stu-id="51ddb-206">Example</span></span>

<span data-ttu-id="51ddb-207">Im folgenden Codebeispiel wird ein nicht generischer Typ `DemoType` mit der generischen Methode `Factory` erstellt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-207">The following code example creates a nongeneric type, `DemoType`, with a generic method, `Factory`.</span></span> <span data-ttu-id="51ddb-208">Diese Methode verfügt über zwei generische Typparameter, `TInput` zum Angeben eines Eingabetyps und `TOutput` zum Angeben eines Ausgabetyps.</span><span class="sxs-lookup"><span data-stu-id="51ddb-208">This method has two generic type parameters, `TInput` to specify an input type and `TOutput` to specify an output type.</span></span> <span data-ttu-id="51ddb-209">Der `TOutput`-Typparameter wird durch Implementieren von `ICollection<TInput>` (`ICollection(Of TInput)` in Visual Basic) zu einem Referenztyp eingeschränkt, der über einen parameterlosen Konstruktor verfügt.</span><span class="sxs-lookup"><span data-stu-id="51ddb-209">The `TOutput` type parameter is constrained to implement `ICollection<TInput>` (`ICollection(Of TInput)` in Visual Basic), to be a reference type, and to have a parameterless constructor.</span></span>

<span data-ttu-id="51ddb-210">Die Methode verfügt über einen formalen Parameter, der ein Array von `TInput` ist.</span><span class="sxs-lookup"><span data-stu-id="51ddb-210">The method has one formal parameter, which is an array of `TInput`.</span></span> <span data-ttu-id="51ddb-211">Die Methode gibt eine Instanz von `TOutput` zurück, die alle Elemente des Eingabearrays enthält.</span><span class="sxs-lookup"><span data-stu-id="51ddb-211">The method returns an instance of `TOutput` that contains all the elements of the input array.</span></span> <span data-ttu-id="51ddb-212">`TOutput` kann ein beliebiger generischer Auflistungstyp sein, der die generische <xref:System.Collections.Generic.ICollection%601>-Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="51ddb-212">`TOutput` can be any generic collection type that implements the <xref:System.Collections.Generic.ICollection%601> generic interface.</span></span>

<span data-ttu-id="51ddb-213">Bei der Codeausführung wird die dynamische Assembly als DemoGenericMethod1.dll gespeichert. Sie kann mit [Ildasm.exe (IL-Disassembler)](../tools/ildasm-exe-il-disassembler.md) untersucht werden.</span><span class="sxs-lookup"><span data-stu-id="51ddb-213">When the code is executed, the dynamic assembly is saved as DemoGenericMethod1.dll, and can be examined using the [Ildasm.exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md).</span></span>

> [!NOTE]
> <span data-ttu-id="51ddb-214">Wenn Sie das Ausgeben von Code erlernen möchten, empfiehlt es sich, ein Visual Basic-, C#- oder Visual C++-Programm zu schreiben, das die Aufgabe ausführt, die Sie ausgeben möchten, und anschließend anhand eines Disassemblers den vom Compiler generierten MSIL-Code zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="51ddb-214">A good way to learn how to emit code is to write a Visual Basic, C#, or Visual C++ program that performs the task you are trying to emit, and use the disassembler to examine the MSIL produced by the compiler.</span></span>

<span data-ttu-id="51ddb-215">Das Codebeispiel enthält Quellcode, der der ausgegebenen Methode entspricht.</span><span class="sxs-lookup"><span data-stu-id="51ddb-215">The code example includes source code that is equivalent to the emitted method.</span></span> <span data-ttu-id="51ddb-216">Die ausgegebene Methode wird spät gebunden anhand eines generischen Delegaten aufgerufen, der im Codebeispiel deklariert ist.</span><span class="sxs-lookup"><span data-stu-id="51ddb-216">The emitted method is invoked late-bound and also by using a generic delegate declared in the code example.</span></span>

[!code-csharp[GenericMethodHowTo#1](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#1)]
[!code-vb[GenericMethodHowTo#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#1)]

## <a name="see-also"></a><span data-ttu-id="51ddb-217">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="51ddb-217">See also</span></span>

- <xref:System.Reflection.Emit.MethodBuilder>
- [<span data-ttu-id="51ddb-218">How to: Definieren eines generischen Typs mit Reflektionsausgabe</span><span class="sxs-lookup"><span data-stu-id="51ddb-218">How to: Define a Generic Type with Reflection Emit</span></span>](how-to-define-a-generic-type-with-reflection-emit.md)
