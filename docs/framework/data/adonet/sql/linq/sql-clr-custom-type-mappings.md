---
title: Benutzerdefinierte SQL-CLR-Typenzuordnungen
ms.date: 03/30/2017
ms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2
ms.openlocfilehash: 14d7f8409f93a5414a37a8b1c8e172f53478e817
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/24/2020
ms.locfileid: "91155704"
---
# <a name="sql-clr-custom-type-mappings"></a><span data-ttu-id="8f0eb-102">Benutzerdefinierte SQL-CLR-Typenzuordnungen</span><span class="sxs-lookup"><span data-stu-id="8f0eb-102">SQL-CLR Custom Type Mappings</span></span>

<span data-ttu-id="8f0eb-103">Das Typmapping zwischen SQL Server und der Common Language Runtime (CLR) wird bei der Verwendung des SQLMetal-Befehlszeilentools oder des Object Relational Designer (O/R-Designer) automatisch festgelegt.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-103">Type mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).</span></span>  
  
 <span data-ttu-id="8f0eb-104">Wenn keine angepasste Zuordnung durchgeführt wird, weisen diese Tools standardmäßige Typzuordnungen zu, wie in [SQL-CLR-Typzuordnung](sql-clr-type-mapping.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-104">When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](sql-clr-type-mapping.md).</span></span> <span data-ttu-id="8f0eb-105">Wenn Sie von den Standardeinstellungen abweichende Typmappings benötigen, müssen die Typmappings angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-105">If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.</span></span>  
  
 <span data-ttu-id="8f0eb-106">Beim Anpassen der Typmappings wird empfohlen, die Änderungen in einer vorübergehend verwendeten DBML-Datei vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-106">When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file.</span></span> <span data-ttu-id="8f0eb-107">Anschließend sollte die benutzerdefinierte DBML-Datei beim Erstellen des Codes und der Mappingdateien mit SQLMetal oder O/R-Designer verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-107">Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.</span></span>  
  
 <span data-ttu-id="8f0eb-108">Beim Instanziieren des <xref:System.Data.Linq.DataContext>-Objekts in Code- und Mappingdateien erstellt die <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType>-Methode anhand der festgelegten Typmappings eine Datenbank.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-108">Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified.</span></span> <span data-ttu-id="8f0eb-109">Wenn in den Mappings keine CLR-`type`-Attribute bestimmt wurden, wird das Standardtypmapping verwendet.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-109">If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used.</span></span>  
  
## <a name="customization-with-sqlmetal-or-or-designer"></a><span data-ttu-id="8f0eb-110">Anpassung mit SQLMetal oder O/R-Designer</span><span class="sxs-lookup"><span data-stu-id="8f0eb-110">Customization with SQLMetal or O/R Designer</span></span>  

 <span data-ttu-id="8f0eb-111">Mit SQLMetal und O/R-Designer kann automatisch ein Objektmodell erstellt werden, das die Typmappinginformationen innerhalb oder außerhalb der Codedatei enthält.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-111">With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file.</span></span> <span data-ttu-id="8f0eb-112">Da diese Dateien von SQLMetal oder O/R-Designer überschrieben werden, wird beim erneuten Erstellen der Mappings für das Festlegen benutzerdefinierter Typmappings empfohlen, eine DBML-Datei anzupassen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-112">Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.</span></span>  
  
 <span data-ttu-id="8f0eb-113">Um Typmappings mit SQLMetal oder O/R-Designer anzupassen, muss zunächst eine DBML-Datei erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-113">To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file.</span></span> <span data-ttu-id="8f0eb-114">Anschließend (und noch vor dem Erstellen der Code- oder Mappingdatei) muss die DBML-Datei bearbeitet werden, um die gewünschten Typmappings festzulegen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-114">Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings.</span></span> <span data-ttu-id="8f0eb-115">In SQLMetal müssen die Attribute `Type` und `DbType` in der DBML-Datei manuell geändert werden, um die Anpassungen am Typmapping vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-115">With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations.</span></span> <span data-ttu-id="8f0eb-116">In O/R-Designer können Sie die Änderungen im Designer vornehmen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-116">With O/R Designer, you can make your changes within the Designer.</span></span> <span data-ttu-id="8f0eb-117">Weitere Informationen zur Verwendung des O/R-Designers finden Sie unter [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span><span class="sxs-lookup"><span data-stu-id="8f0eb-117">For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8f0eb-118">Einige Typmappings können bei der Übertragung in die Datenbank oder aus der Datenbank einen Überlauf oder Datenverlust verursachen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-118">Some type mappings may result in overflow or data loss exceptions while translating to or from the database.</span></span> <span data-ttu-id="8f0eb-119">Überprüfen Sie sorgfältig die Lauf Zeit Verhaltens-Matrix für die Typzuordnung in der [SQL-CLR-Typzuordnung](sql-clr-type-mapping.md) , bevor Sie Anpassungen vornehmen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-119">Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](sql-clr-type-mapping.md) before making any customizations.</span></span>  
  
 <span data-ttu-id="8f0eb-120">Damit Ihre Anpassungen der Typmappings in SQLMetal oder O/R-Designer erkannt werden, muss sichergestellt werden, dass diese Tools über den Pfad zu Ihrer benutzerdefinierten DBML-Datei verfügen, wenn Sie Ihre Code- oder externe Mappingdatei erstellen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-120">In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file.</span></span> <span data-ttu-id="8f0eb-121">Obwohl dies für die Anpassung des Typmappings nicht erforderlich ist, wird empfohlen, die Typmappinginformationen stets von der Codedatei zu trennen und eine zusätzliche externe Typmappingdatei zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-121">Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file.</span></span> <span data-ttu-id="8f0eb-122">Dadurch erhalten Sie eine gewisse Flexibilität, da die Codedatei nicht erneut kompiliert werden muss.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-122">Doing so will leave some flexibility by not requiring that the code file be recompiled.</span></span>  
  
## <a name="incorporating-database-changes"></a><span data-ttu-id="8f0eb-123">Integrieren von Datenbankänderungen</span><span class="sxs-lookup"><span data-stu-id="8f0eb-123">Incorporating Database Changes</span></span>  

 <span data-ttu-id="8f0eb-124">Wenn Änderungen an der Datenbank auftreten, muss die DBML-Datei entsprechend aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-124">When your database changes, you will need to update your DBML file to reflect those changes.</span></span> <span data-ttu-id="8f0eb-125">Eine Möglichkeit hierfür besteht im automatischen Erstellen einer neuen DBML-Datei und dem erneuten Anpassen des Typmappings.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-125">One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations.</span></span> <span data-ttu-id="8f0eb-126">Sie können jedoch auch die Unterschiede zwischen der neuen DBML-Datei und der benutzerdefinierten DBML-Datei abgleichen und die benutzerdefinierte DBML-Datei manuell aktualisieren, damit diese den Datenbankänderungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="8f0eb-126">Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8f0eb-127">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="8f0eb-127">See also</span></span>

- [<span data-ttu-id="8f0eb-128">SQL-CLR-Typenzuordnung</span><span class="sxs-lookup"><span data-stu-id="8f0eb-128">SQL-CLR Type Mapping</span></span>](sql-clr-type-mapping.md)
- [<span data-ttu-id="8f0eb-129">Codegenerierung in LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="8f0eb-129">Code Generation in LINQ to SQL</span></span>](code-generation-in-linq-to-sql.md)
