---
title: Autorisierung und Berechtigungen in SQL Server
description: Erfahren Sie, wie Sie explizit Berechtigungen für die Erstellung von Datenbankobjekten, die Sie erstellen, für Benutzer in SQL Server mit ADO.net erteilen.
ms.date: 03/30/2017
ms.assetid: d340405c-91f4-4837-a3cc-a238ee89888a
ms.openlocfilehash: 748d40ff2c64ae59f43e6296ef591efcb5ff9831
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/24/2020
ms.locfileid: "91197494"
---
# <a name="authorization-and-permissions-in-sql-server"></a><span data-ttu-id="43070-103">Autorisierung und Berechtigungen in SQL Server</span><span class="sxs-lookup"><span data-stu-id="43070-103">Authorization and Permissions in SQL Server</span></span>

<span data-ttu-id="43070-104">Beim Erstellen von Datenbankobjekten müssen Sie Berechtigungen explizit gewähren, damit die Benutzer auch auf die Datenbankobjekte zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="43070-104">When you create database objects, you must explicitly grant permissions to make them accessible to users.</span></span> <span data-ttu-id="43070-105">Jedes sicherungsfähige Objekt verfügt über Berechtigungen, die einem Prinzipal mithilfe von Berechtigungsanweisungen gewährt werden können.</span><span class="sxs-lookup"><span data-stu-id="43070-105">Every securable object has permissions that can be granted to a principal using permission statements.</span></span>  
  
## <a name="the-principle-of-least-privilege"></a><span data-ttu-id="43070-106">Das Prinzip der minimalen Rechtegewährung</span><span class="sxs-lookup"><span data-stu-id="43070-106">The Principle of Least Privilege</span></span>  

 <span data-ttu-id="43070-107">Die Verwendung von Konten der untersten Berechtigungsebene (Least-Privileged User Account, LUA) für das Entwickeln von Anwendungen ist ein wichtiger Bestandteil einer tiefgestaffelten Verteidigungsstrategie zur Abwehr von Sicherheitsbedrohungen.</span><span class="sxs-lookup"><span data-stu-id="43070-107">Developing an application using a least-privileged user account (LUA) approach is an important part of a defensive, in-depth strategy for countering security threats.</span></span> <span data-ttu-id="43070-108">Die LUA-Strategie sorgt dafür, dass das Prinzip der minimalen Rechtegewährung eingehalten wird und die Benutzer für die Anmeldung immer nur Benutzerkonten mit eingeschränkten Rechten verwenden.</span><span class="sxs-lookup"><span data-stu-id="43070-108">The LUA approach ensures that users follow the principle of least privilege and always log on with limited user accounts.</span></span> <span data-ttu-id="43070-109">Administrative Aufgaben werden mithilfe fester Serverrollen erledigt, und die Verwendung der festen Serverrolle `sysadmin` ist stark eingeschränkt.</span><span class="sxs-lookup"><span data-stu-id="43070-109">Administrative tasks are broken out using fixed server roles, and the use of the `sysadmin` fixed server role is severely restricted.</span></span>  
  
 <span data-ttu-id="43070-110">Befolgen Sie beim Gewähren von Berechtigungen für Datenbankbenutzer stets das Prinzip der minimalen Rechtegewährung.</span><span class="sxs-lookup"><span data-stu-id="43070-110">Always follow the principle of least privilege when granting permissions to database users.</span></span> <span data-ttu-id="43070-111">Gewähren Sie immer nur so viele Berechtigungen, wie der Benutzer oder die Rolle zum Ausführen der jeweiligen Aufgabe benötigt.</span><span class="sxs-lookup"><span data-stu-id="43070-111">Grant the minimum permissions necessary to a user or role to accomplish a given task.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="43070-112">Das Entwickeln und Testen einer auf der LUA-Strategie beruhenden Anwendung erfordert ein bestimmtes Maß an zusätzlichem Aufwand.</span><span class="sxs-lookup"><span data-stu-id="43070-112">Developing and testing an application using the LUA approach adds a degree of difficulty to the development process.</span></span> <span data-ttu-id="43070-113">Es ist einfacher, Objekte zu erstellen und Code zu schreiben, während man als Systemadministrator oder Datenbankbesitzer angemeldet ist, als wenn man ein Konto der untersten Berechtigungsebene verwendet.</span><span class="sxs-lookup"><span data-stu-id="43070-113">It is easier to create objects and write code while logged on as a system administrator or database owner than it is using a LUA account.</span></span> <span data-ttu-id="43070-114">Das Entwickeln von Anwendungen mit einem Konto mit weitreichenden Berechtigungen kann jedoch die Auswirkungen der reduzierten Funktionalität verschleiern, wenn Benutzer mit minimalen Berechtigungen versuchen, eine Anwendung zu starten, die eine höhere Berechtigungsebene erfordert, um funktionsfähig zu sein.</span><span class="sxs-lookup"><span data-stu-id="43070-114">However, developing applications using a highly privileged account can obfuscate the impact of reduced functionality when least privileged users attempt to run an application that requires elevated permissions in order to function correctly.</span></span> <span data-ttu-id="43070-115">Wenn dann den Benutzern zusätzliche Berechtigungen gewährt werden, um verloren gegangene Funktionalität wiederzugewinnen, kann Ihre Anwendung angreifbar werden.</span><span class="sxs-lookup"><span data-stu-id="43070-115">Granting excessive permissions to users in order to reacquire lost functionality can leave your application vulnerable to attack.</span></span> <span data-ttu-id="43070-116">Wird jedoch beim Entwerfen, Entwickeln und Testen Ihrer Anwendung ein Konto der untersten Berechtigungsebene verwendet, werden Sie zu einer disziplinierten Herangehensweise an die Sicherheitsplanung gezwungen, sodass unliebsame Überraschungen ausbleiben und Sie nicht in Versuchung geraten, Probleme durch Gewährung erweiterter Rechte zu lösen.</span><span class="sxs-lookup"><span data-stu-id="43070-116">Designing, developing and testing your application logged on with a LUA account enforces a disciplined approach to security planning that eliminates unpleasant surprises and the temptation to grant elevated privileges as a quick fix.</span></span> <span data-ttu-id="43070-117">Sie können zum Testen eine SQL Server-Anmeldung verwenden, auch wenn Ihre Anwendung mit der Windows-Authentifizierung bereitgestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="43070-117">You can use a SQL Server login for testing even if your application is intended to deploy using Windows authentication.</span></span>  
  
## <a name="role-based-permissions"></a><span data-ttu-id="43070-118">Rollenbasierte Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="43070-118">Role-Based Permissions</span></span>  

 <span data-ttu-id="43070-119">Das Gewähren von Berechtigungen für Rollen statt für Benutzer vereinfacht die Sicherheitsverwaltung.</span><span class="sxs-lookup"><span data-stu-id="43070-119">Granting permissions to roles rather than to users simplifies security administration.</span></span> <span data-ttu-id="43070-120">Berechtigungssätze, die Rollen zugewiesen werden, werden von allen Membern der Rolle geerbt.</span><span class="sxs-lookup"><span data-stu-id="43070-120">Permission sets that are assigned to roles are inherited by all members of the role.</span></span> <span data-ttu-id="43070-121">Es ist einfacher, Benutzer einer Rolle hinzuzufügen oder aus ihr zu entfernen, als separate Berechtigungssätze für einzelne Benutzer neu zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="43070-121">It is easier to add or remove users from a role than it is to recreate separate permission sets for individual users.</span></span> <span data-ttu-id="43070-122">Rollen können geschachtelt werden, wobei aber zu beachten ist, dass zu viele Ebenen beim Schachteln Leistungseinbußen zur Folge haben können.</span><span class="sxs-lookup"><span data-stu-id="43070-122">Roles can be nested; however, too many levels of nesting can degrade performance.</span></span> <span data-ttu-id="43070-123">Sie können Benutzer auch festen Datenbankrollen hinzufügen, wodurch sich das Zuweisen von Berechtigungen vereinfacht.</span><span class="sxs-lookup"><span data-stu-id="43070-123">You can also add users to fixed database roles to simplify assigning permissions.</span></span>  
  
 <span data-ttu-id="43070-124">Sie können Berechtigungen auf Schemaebene erteilen.</span><span class="sxs-lookup"><span data-stu-id="43070-124">You can grant permissions at the schema level.</span></span> <span data-ttu-id="43070-125">Die Benutzer erben dann automatisch Berechtigungen für alle neu im Schema erstellten Objekte, d. h., Sie müssen keine Berechtigungen gewähren, wenn neue Objekte erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="43070-125">Users automatically inherit permissions on all new objects created in the schema; you do not need to grant permissions as new objects are created.</span></span>  
  
## <a name="permissions-through-procedural-code"></a><span data-ttu-id="43070-126">Berechtigungen über prozeduralen Code</span><span class="sxs-lookup"><span data-stu-id="43070-126">Permissions Through Procedural Code</span></span>  

 <span data-ttu-id="43070-127">Das Kapseln des Datenzugriffs über Module, wie gespeicherte Prozeduren und benutzerdefinierte Funktionen, bedeutet einen zusätzlichen Schutzwall für Ihre Anwendung.</span><span class="sxs-lookup"><span data-stu-id="43070-127">Encapsulating data access through modules such as stored procedures and user-defined functions provides an additional layer of protection around your application.</span></span> <span data-ttu-id="43070-128">Sie können Benutzer von der direkten Interaktion mit Datenbankobjekten abhalten, indem Sie ihnen nur für die gespeicherten Prozeduren oder Funktionen Berechtigungen gewähren und für die zugrunde liegenden Objekte, z. B. Tabellen, die Berechtigungen verweigern.</span><span class="sxs-lookup"><span data-stu-id="43070-128">You can prevent users from directly interacting with database objects by granting permissions only to stored procedures or functions while denying permissions to underlying objects such as tables.</span></span> <span data-ttu-id="43070-129">SQL Server erreicht dies durch Besitzverkettung.</span><span class="sxs-lookup"><span data-stu-id="43070-129">SQL Server achieves this by ownership chaining.</span></span>  
  
## <a name="permission-statements"></a><span data-ttu-id="43070-130">Berechtigungsanweisungen</span><span class="sxs-lookup"><span data-stu-id="43070-130">Permission Statements</span></span>  

 <span data-ttu-id="43070-131">In der folgenden Tabelle werden die drei Transact-SQL-Berechtigungsanweisungen beschrieben:</span><span class="sxs-lookup"><span data-stu-id="43070-131">The three Transact-SQL permission statements are described in the following table.</span></span>  
  
|<span data-ttu-id="43070-132">Berechtigungsanweisung</span><span class="sxs-lookup"><span data-stu-id="43070-132">Permission Statement</span></span>|<span data-ttu-id="43070-133">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="43070-133">Description</span></span>|  
|--------------------------|-----------------|  
|<span data-ttu-id="43070-134">GRANT</span><span class="sxs-lookup"><span data-stu-id="43070-134">GRANT</span></span>|<span data-ttu-id="43070-135">Gewährt eine Berechtigung.</span><span class="sxs-lookup"><span data-stu-id="43070-135">Grants a permission.</span></span>|  
|<span data-ttu-id="43070-136">REVOKE</span><span class="sxs-lookup"><span data-stu-id="43070-136">REVOKE</span></span>|<span data-ttu-id="43070-137">Widerruft eine Berechtigung.</span><span class="sxs-lookup"><span data-stu-id="43070-137">Revokes a permission.</span></span> <span data-ttu-id="43070-138">Dies ist der Standardzustand für ein neues Objekt.</span><span class="sxs-lookup"><span data-stu-id="43070-138">This is the default state of a new object.</span></span> <span data-ttu-id="43070-139">Eine für einen Benutzer oder eine Rolle widerrufene Berechtigung kann von anderen Gruppen oder Rollen, denen der Prinzipal zugewiesen ist, weiter geerbt werden.</span><span class="sxs-lookup"><span data-stu-id="43070-139">A permission revoked from a user or role can still be inherited from other groups or roles to which the principal is assigned.</span></span>|  
|<span data-ttu-id="43070-140">VERWEIGERN</span><span class="sxs-lookup"><span data-stu-id="43070-140">DENY</span></span>|<span data-ttu-id="43070-141">Widerruft eine Berechtigung, sodass sie nicht geerbt werden kann.</span><span class="sxs-lookup"><span data-stu-id="43070-141">DENY revokes a permission so that it cannot be inherited.</span></span> <span data-ttu-id="43070-142">DENY hat gegenüber allen Berechtigungen absolute Priorität. DENY gilt jedoch nicht für Objektbesitzer oder `sysadmin`-Member.</span><span class="sxs-lookup"><span data-stu-id="43070-142">DENY takes precedence over all permissions, except DENY does not apply to object owners or members of `sysadmin`.</span></span> <span data-ttu-id="43070-143">Wenn Sie der Rolle `public` mit DENY Berechtigungen für ein Objekt verweigern, gilt dies, mit Ausnahme der Objektbesitzer und der `sysadmin`-Member, für alle Benutzer und Rollen.</span><span class="sxs-lookup"><span data-stu-id="43070-143">If you DENY permissions on an object to the `public` role it is denied to all users and roles except for object owners and `sysadmin` members.</span></span>|  
  
- <span data-ttu-id="43070-144">Die GRANT-Anweisung kann Berechtigungen für eine Gruppe oder Rolle zuweisen, die von Datenbankbenutzern geerbt werden können.</span><span class="sxs-lookup"><span data-stu-id="43070-144">The GRANT statement can assign permissions to a group or role that can be inherited by database users.</span></span> <span data-ttu-id="43070-145">Die DENY-Anweisung hat aber gegenüber allen anderen Berechtigungsanweisungen Vorrang.</span><span class="sxs-lookup"><span data-stu-id="43070-145">However, the DENY statement takes precedence over all other permission statements.</span></span> <span data-ttu-id="43070-146">Ein Benutzer, dem eine Berechtigung verweigert wurde, kann daher diese Berechtigung nicht von einer anderen Rolle erben.</span><span class="sxs-lookup"><span data-stu-id="43070-146">Therefore, a user who has been denied a permission cannot inherit it from another role.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="43070-147">Membern der festen Serverrolle `sysadmin` und Objektbesitzern können Berechtigungen nicht verweigert werden.</span><span class="sxs-lookup"><span data-stu-id="43070-147">Members of the `sysadmin` fixed server role and object owners cannot be denied permissions.</span></span>  
  
## <a name="ownership-chains"></a><span data-ttu-id="43070-148">Besitzketten</span><span class="sxs-lookup"><span data-stu-id="43070-148">Ownership Chains</span></span>  

 <span data-ttu-id="43070-149">SQL Server stellt sicher, dass nur Prinzipale auf Objekte zugreifen können, denen eine entsprechende Berechtigung gewährt wurde.</span><span class="sxs-lookup"><span data-stu-id="43070-149">SQL Server ensures that only principals that have been granted permission can access objects.</span></span> <span data-ttu-id="43070-150">Wenn mehrere Datenbankobjekte gegenseitig aufeinander zugreifen, wird diese Sequenz auch als Kette bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="43070-150">When multiple database objects access each other, the sequence is known as a chain.</span></span> <span data-ttu-id="43070-151">Beim Durchlaufen der Glieder der Kette wertet SQL Server Berechtigungen anders aus, als dies beim separaten Zugriff auf die einzelnen Objekte der Fall wäre.</span><span class="sxs-lookup"><span data-stu-id="43070-151">When SQL Server is traversing the links in the chain, it evaluates permissions differently than it would if it were accessing each item separately.</span></span> <span data-ttu-id="43070-152">Wenn der Zugriff auf ein Objekt über eine Kette erfolgt, vergleicht SQL Server zunächst den Besitzer des Objekts mit dem Besitzer des aufrufenden Objekts (vorhergehender Link in der Kette).</span><span class="sxs-lookup"><span data-stu-id="43070-152">When an object is accessed through a chain, SQL Server first compares the object's owner to the owner of the calling object (the previous link in the chain).</span></span> <span data-ttu-id="43070-153">Wenn der Besitzer beider Objekte identisch ist, werden die Berechtigungen für das Objekt, auf das verwiesen wird, nicht überprüft.</span><span class="sxs-lookup"><span data-stu-id="43070-153">If both objects have the same owner, permissions on the referenced object are not checked.</span></span> <span data-ttu-id="43070-154">Wenn ein Objekt aber auf ein anderes Objekt zugreift, das einem anderen Besitzer gehört, ist die Besitzkette unterbrochen und SQL Server muss den Sicherheitskontext des Aufrufers prüfen.</span><span class="sxs-lookup"><span data-stu-id="43070-154">Whenever an object accesses another object that has a different owner, the ownership chain is broken and SQL Server must check the caller's security context.</span></span>  
  
## <a name="procedural-code-and-ownership-chaining"></a><span data-ttu-id="43070-155">Prozeduraler Code und Besitzverkettung</span><span class="sxs-lookup"><span data-stu-id="43070-155">Procedural Code and Ownership Chaining</span></span>  

 <span data-ttu-id="43070-156">Nehmen wir an, einem Besitzer wurden Ausführungsberechtigungen für eine gespeicherte Prozedur gewährt, die Daten aus einer Tabelle auswählt.</span><span class="sxs-lookup"><span data-stu-id="43070-156">Suppose that a user is granted execute permissions on a stored procedure that selects data from a table.</span></span> <span data-ttu-id="43070-157">Wenn der Besitzer der gespeicherten Prozedur identisch mit dem Besitzer der Tabelle ist, müssen dem Benutzer überhaupt keine Berechtigungen für die Tabelle gewährt werden – ihm könnten die Berechtigungen dafür sogar verweigert werden.</span><span class="sxs-lookup"><span data-stu-id="43070-157">If the stored procedure and the table have the same owner, the user doesn't need to be granted any permissions on the table and can even be denied permissions.</span></span> <span data-ttu-id="43070-158">Ist der Besitzer der gespeicherten Prozedur aber nicht mit dem Besitzer der Tabelle identisch, muss SQL Server die Berechtigungen des Benutzers für die Tabelle prüfen, bevor der Zugriff auf die Daten erlaubt wird.</span><span class="sxs-lookup"><span data-stu-id="43070-158">However, if the stored procedure and the table have different owners, SQL Server must check the user's permissions on the table before allowing access to the data.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="43070-159">Bei dynamischen SQL-Anweisungen gilt die Besitzverkettung nicht.</span><span class="sxs-lookup"><span data-stu-id="43070-159">Ownership chaining does not apply in the case of dynamic SQL statements.</span></span> <span data-ttu-id="43070-160">Zum Aufrufen einer Prozedur, die eine SQL-Anweisung ausführt, müssen dem Aufrufer Berechtigungen für die zugrunde liegenden Tabellen gewährt werden, wodurch die Anwendung aber anfällig für SQL Injection-Angriffe wird.</span><span class="sxs-lookup"><span data-stu-id="43070-160">To call a procedure that executes an SQL statement, the caller must be granted permissions on the underlying tables, leaving your application vulnerable to SQL Injection attack.</span></span> <span data-ttu-id="43070-161">SQL Server bietet neue Mechanismen, wie den Identitätswechsel und das Signieren von Modulen mit Zertifikaten, bei denen keine Berechtigungen für die zugrunde liegenden Tabellen erteilt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="43070-161">SQL Server provides new mechanisms, such as impersonation and signing modules with certificates, that do not require granting permissions on the underlying tables.</span></span> <span data-ttu-id="43070-162">Diese Mechanismen können auch mit gespeicherten Prozeduren für die CLR verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="43070-162">These can also be used with CLR stored procedures.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="43070-163">Externe Ressourcen</span><span class="sxs-lookup"><span data-stu-id="43070-163">External Resources</span></span>  

 <span data-ttu-id="43070-164">Weitere Informationen finden Sie in den folgenden Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="43070-164">For more information, see the following resources.</span></span>  
  
|<span data-ttu-id="43070-165">Resource</span><span class="sxs-lookup"><span data-stu-id="43070-165">Resource</span></span>|<span data-ttu-id="43070-166">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="43070-166">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="43070-167">Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="43070-167">Permissions</span></span>](/sql/relational-databases/security/permissions-database-engine)|<span data-ttu-id="43070-168">Enthält Themen, in denen die Berechtigungshierarchie, Katalogsichten und Berechtigungen fester Serverrollen und fester Datenbankrollen beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="43070-168">Contains topics describing permissions hierarchy, catalog views, and permissions of fixed server and database roles.</span></span>|
  
## <a name="see-also"></a><span data-ttu-id="43070-169">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="43070-169">See also</span></span>

- [<span data-ttu-id="43070-170">Sichern von ADO.NET-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="43070-170">Securing ADO.NET Applications</span></span>](../securing-ado-net-applications.md)
- [<span data-ttu-id="43070-171">Anwendungssicherheitsszenarios in SQL Server</span><span class="sxs-lookup"><span data-stu-id="43070-171">Application Security Scenarios in SQL Server</span></span>](application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="43070-172">Authentifizierung in SQL Server</span><span class="sxs-lookup"><span data-stu-id="43070-172">Authentication in SQL Server</span></span>](authentication-in-sql-server.md)
- [<span data-ttu-id="43070-173">Server- und Datenbankrollen in SQL Server</span><span class="sxs-lookup"><span data-stu-id="43070-173">Server and Database Roles in SQL Server</span></span>](server-and-database-roles-in-sql-server.md)
- [<span data-ttu-id="43070-174">Objektbesitz und Trennung von Benutzer und Schema in SQL Server</span><span class="sxs-lookup"><span data-stu-id="43070-174">Ownership and User-Schema Separation in SQL Server</span></span>](ownership-and-user-schema-separation-in-sql-server.md)
- [<span data-ttu-id="43070-175">Übersicht über ADO.NET</span><span class="sxs-lookup"><span data-stu-id="43070-175">ADO.NET Overview</span></span>](../ado-net-overview.md)
