---
title: Abfrageausführung
description: Erfahren Sie mehr über die verschiedenen Möglichkeiten, wie eine LINQ to Entities Abfrage ausgeführt wird, einschließlich verzögerter Abfrage Ausführung, sofortiger Ausführung von Abfragen und Speicher Ausführung.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: c0e6cf23-63ac-47dd-bfe9-d5bdca826fac
ms.openlocfilehash: e5961330eab5f25508319f276df1e9b4572f49ee
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/24/2020
ms.locfileid: "91189304"
---
# <a name="query-execution"></a><span data-ttu-id="9a7f8-103">Abfrageausführung</span><span class="sxs-lookup"><span data-stu-id="9a7f8-103">Query Execution</span></span>

<span data-ttu-id="9a7f8-104">Nachdem eine LINQ-Abfrage von einem Benutzer erstellt wurde, wird sie in eine Befehlsstruktur konvertiert.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-104">After a LINQ query is created by a user, it is converted to a command tree.</span></span> <span data-ttu-id="9a7f8-105">Eine Befehlsstruktur ist eine Darstellung einer Abfrage, die mit dem Entity Framework kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-105">A command tree is a representation of a query that is compatible with the Entity Framework.</span></span> <span data-ttu-id="9a7f8-106">Die Befehlsstruktur wird dann für die Datenquelle ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-106">The command tree is then executed against the data source.</span></span> <span data-ttu-id="9a7f8-107">Während der Ausführung der Abfrage werden alle Abfrageausdrücke (d. h. alle Komponenten der Abfrage) ausgewertet, einschließlich der Ausdrücke, die für die Materialisierung der Ergebnisse verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-107">At query execution time, all query expressions (that is, all components of the query) are evaluated, including those expressions that are used in result materialization.</span></span>  
  
 <span data-ttu-id="9a7f8-108">An welchem Punkt Abfrageausdrücke ausgeführt werden ist unterschiedlich.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-108">At what point query expressions are executed can vary.</span></span> <span data-ttu-id="9a7f8-109">LINQ-Abfragen werden nicht bei der Erstellung der Abfragevariablen, sondern beim Durchlaufen der Abfragevariablen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-109">LINQ queries are always executed when the query variable is iterated over, not when the query variable is created.</span></span> <span data-ttu-id="9a7f8-110">Dies wird als *verzögerte Ausführung*bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-110">This is called *deferred execution*.</span></span> <span data-ttu-id="9a7f8-111">Eine sofortige Ausführung der Abfrage kann auch erzwungen werden. Dies ist für die Zwischenspeicherung von Abfrageergebnissen sinnvoll.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-111">You can also force a query to execute immediately, which is useful for caching query results.</span></span> <span data-ttu-id="9a7f8-112">Dies wird weiter unten in diesem Thema beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-112">This is described later in this topic.</span></span>  
  
 <span data-ttu-id="9a7f8-113">Beim Ausführen einer LINQ to Entities-Abfrage werden möglicherweise einige Ausdrücke auf dem Server und andere lokal auf dem Client ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-113">When a LINQ to Entities query is executed, some expressions in the query might be executed on the server and some parts might be executed locally on the client.</span></span> <span data-ttu-id="9a7f8-114">Ein Ausdruck wird auf dem Client ausgewertet, bevor die Abfrage auf dem Server ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-114">Client-side evaluation of an expression takes place before the query is executed on the server.</span></span> <span data-ttu-id="9a7f8-115">Wenn ein Ausdruck auf dem Client ausgewertet wird, wird dieser Ausdruck in der Abfrage durch das Ergebnis der Auswertung ersetzt. Anschließend wird die Abfrage auf dem Server ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-115">If an expression is evaluated on the client, the result of that evaluation is substituted for the expression in the query, and the query is then executed on the server.</span></span> <span data-ttu-id="9a7f8-116">Da Abfragen für die Datenquelle ausgeführt werden, wird das auf dem Client festgelegte Verhalten von der Konfiguration der Datenquelle überschrieben.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-116">Because queries are executed on the data source, the data source configuration overrides the behavior specified in the client.</span></span> <span data-ttu-id="9a7f8-117">Zum Beispiel hängen die Behandlung von NULL-Werten und die numerische Genauigkeit von den Servereinstellungen ab.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-117">For example, null value handling and numerical precision depend on the server settings.</span></span> <span data-ttu-id="9a7f8-118">Alle Ausnahmen, die bei der Abfrageausführung auf dem Server ausgelöst wurden, werden direkt an den Client weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-118">Any exceptions thrown during query execution on the server are passed directly up to the client.</span></span>  

> [!TIP]
> <span data-ttu-id="9a7f8-119">Eine bequeme Zusammenfassung der Abfrage Operatoren im Tabellenformat, mit der Sie das Ausführungs Verhalten eines Operators schnell ermitteln können, finden Sie [unter Klassifizierung von Standard Abfrage Operatoren nach Ausführungs Arten (c#)](../../../../../csharp/programming-guide/concepts/linq/classification-of-standard-query-operators-by-manner-of-execution.md).</span><span class="sxs-lookup"><span data-stu-id="9a7f8-119">For a convenient summary of query operators in table format, which lets you quickly identify an operator's execution behavior, see [Classification of Standard Query Operators by Manner of Execution (C#)](../../../../../csharp/programming-guide/concepts/linq/classification-of-standard-query-operators-by-manner-of-execution.md).</span></span>

## <a name="deferred-query-execution"></a><span data-ttu-id="9a7f8-120">Verzögerte Abfrageausführung</span><span class="sxs-lookup"><span data-stu-id="9a7f8-120">Deferred query execution</span></span>  

 <span data-ttu-id="9a7f8-121">In einer Abfrage, die eine Sequenz von Werten zurückgibt, enthält die Abfragevariable selbst niemals die Abfrageergebnisse, sondern immer nur die Abfragebefehle.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-121">In a query that returns a sequence of values, the query variable itself never holds the query results and only stores the query commands.</span></span> <span data-ttu-id="9a7f8-122">Die Ausführung der Abfrage wird verzögert, bis die Abfragevariable in einer `foreach`- oder `For Each`-Schleife durchlaufen wird.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-122">Execution of the query is deferred until the query variable is iterated over in a `foreach` or `For Each` loop.</span></span> <span data-ttu-id="9a7f8-123">Dies wird als *verzögerte Ausführung*bezeichnet. Das heißt, dass die Abfrage Ausführung einige Zeit nach dem Konstruieren der Abfrage erfolgt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-123">This is known as *deferred execution*; that is, query execution occurs some time after the query is constructed.</span></span> <span data-ttu-id="9a7f8-124">Auf diese Weise können Sie die Abfrage so häufig ausführen, wie Sie dies wünschen.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-124">This means that you can execute a query as frequently as you want to.</span></span> <span data-ttu-id="9a7f8-125">Dies bietet sich z. B. dann an, wenn Sie eine Datenbank haben, die von anderen Anwendungen aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-125">This is useful when, for example, you have a database that is being updated by other applications.</span></span> <span data-ttu-id="9a7f8-126">Sie können in Ihrer Anwendung eine Abfrage erstellen, mit der die neuesten Informationen abgerufen werden, und diese Abfrage wiederholt ausführen, wobei jedes Mal die aktualisierten Informationen zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-126">In your application, you can create a query to retrieve the latest information and repeatedly execute the query, returning the updated information every time.</span></span>  
  
 <span data-ttu-id="9a7f8-127">Die verzögerte Ausführung ermöglicht die Kombination mehrerer Abfragen oder die Erweiterung einer bestehenden Abfrage.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-127">Deferred execution enables multiple queries to be combined or a query to be extended.</span></span> <span data-ttu-id="9a7f8-128">durch das Hinzufügen neuer Operationen. Die Änderungen werden dann bei der Ausführung der Abfrage berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-128">When a query is extended, it is modified to include the new operations, and the eventual execution will reflect the changes.</span></span> <span data-ttu-id="9a7f8-129">Im folgenden Beispiel gibt die erste Abfrage alle Produkte zurück.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-129">In the following example, the first query returns all the products.</span></span> <span data-ttu-id="9a7f8-130">Die zweite Abfrage erweitert die erste, indem sie `Where` verwendet, um alle Produkte der Größe "L" zurückzugeben:</span><span class="sxs-lookup"><span data-stu-id="9a7f8-130">The second query extends the first by using `Where` to return all the products of size "L":</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#Composing1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#composing1)]
 [!code-vb[DP L2E Conceptual Examples#Composing1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#composing1)]  
  
 <span data-ttu-id="9a7f8-131">Nachdem eine Abfrage ausgeführt wurde, verwenden alle folgenden Abfragen die LINQ-Operatoren im Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-131">After a query has been executed all successive queries will use the in-memory LINQ operators.</span></span> <span data-ttu-id="9a7f8-132">Durch das Durchlaufen der Abfragevariable durch die Verwendung einer `foreach`- oder `For Each`-Anweisung oder das Aufrufen eines der LINQ-Konvertierungsoperatoren wird die sofortige Ausführung verursacht.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-132">Iterating over the query variable by using a `foreach` or `For Each` statement or by calling one of the LINQ conversion operators will cause immediate execution.</span></span> <span data-ttu-id="9a7f8-133">Dabei kann es sich um folgende Konvertierungsoperatoren handeln: <xref:System.Linq.Enumerable.ToList%2A>, <xref:System.Linq.Enumerable.ToArray%2A>, <xref:System.Linq.Enumerable.ToLookup%2A> und <xref:System.Linq.Enumerable.ToDictionary%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-133">These conversion operators include the following: <xref:System.Linq.Enumerable.ToList%2A>, <xref:System.Linq.Enumerable.ToArray%2A>, <xref:System.Linq.Enumerable.ToLookup%2A>, and <xref:System.Linq.Enumerable.ToDictionary%2A>.</span></span>  
  
## <a name="immediate-query-execution"></a><span data-ttu-id="9a7f8-134">Unmittelbare Abfrageausführung</span><span class="sxs-lookup"><span data-stu-id="9a7f8-134">Immediate Query Execution</span></span>  

 <span data-ttu-id="9a7f8-135">Im Gegensatz zur verzögerten Ausführung von Abfragen, die eine Sequenz von Werten zurückgeben, werden Abfragen, die einen Singleton-Wert zurückgeben, sofort ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-135">In contrast to the deferred execution of queries that produce a sequence of values, queries that return a singleton value are executed immediately.</span></span> <span data-ttu-id="9a7f8-136">Einige Beispiele für SINGLETON-Abfragen sind <xref:System.Linq.Enumerable.Average%2A>, <xref:System.Linq.Enumerable.Count%2A>, <xref:System.Linq.Enumerable.First%2A> und <xref:System.Linq.Enumerable.Max%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-136">Some examples of singleton queries are <xref:System.Linq.Enumerable.Average%2A>, <xref:System.Linq.Enumerable.Count%2A>, <xref:System.Linq.Enumerable.First%2A>, and <xref:System.Linq.Enumerable.Max%2A>.</span></span> <span data-ttu-id="9a7f8-137">Diese werden sofort ausgeführt, da die Abfrage eine Sequenz für die Berechnung des Singleton-Ergebnisses erzeugen muss.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-137">These execute immediately because the query must produce a sequence to calculate the singleton result.</span></span> <span data-ttu-id="9a7f8-138">Eine unmittelbare Ausführung kann auch erzwungen werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-138">You can also force immediate execution.</span></span> <span data-ttu-id="9a7f8-139">Dies ist nützlich, wenn die Ergebnisse einer Abfrage zwischengespeichert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-139">This is useful when you want to cache the results of a query.</span></span> <span data-ttu-id="9a7f8-140">Zur Erzwingung der sofortigen Ausführung einer Abfrage, die keinen Singleton-Wert zurückgibt, kann die <xref:System.Linq.Enumerable.ToList%2A>-Methode, die <xref:System.Linq.Enumerable.ToDictionary%2A>-Methode oder die <xref:System.Linq.Enumerable.ToArray%2A>-Methode für eine Abfrage oder eine Abfragevariable aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-140">To force immediate execution of a query that does not produce a singleton value, you can call the <xref:System.Linq.Enumerable.ToList%2A> method, the <xref:System.Linq.Enumerable.ToDictionary%2A> method, or the <xref:System.Linq.Enumerable.ToArray%2A> method on a query or query variable.</span></span> <span data-ttu-id="9a7f8-141">Im folgenden Beispiel wird die <xref:System.Linq.Enumerable.ToArray%2A>-Methode verwendet, um eine Sequenz unmittelbar in ein Array auszuwerten.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-141">The following example uses the <xref:System.Linq.Enumerable.ToArray%2A> method to immediately evaluate a sequence into an array.</span></span>  
  
 [!code-csharp[DP L2E Examples#ToArray](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Examples/CS/Program.cs#toarray)]
 [!code-vb[DP L2E Examples#ToArray](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Examples/VB/Module1.vb#toarray)]  
  
 <span data-ttu-id="9a7f8-142">Die Ausführung kann auch erzwungen werden, indem die `foreach`-Schleife oder die `For Each`-Schleife unmittelbar hinter den Abfrageausdruck gestellt wird. Mit einem Aufruf von <xref:System.Linq.Enumerable.ToList%2A> oder <xref:System.Linq.Enumerable.ToArray%2A> werden jedoch alle Daten in einem einzelnen Auflistungsobjekt zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-142">You could also force execution by putting the `foreach` or `For Each` loop immediately after the query expression, but by calling <xref:System.Linq.Enumerable.ToList%2A> or <xref:System.Linq.Enumerable.ToArray%2A> you cache all the data in a single collection object.</span></span>  
  
## <a name="store-execution"></a><span data-ttu-id="9a7f8-143">Speicherausführung</span><span class="sxs-lookup"><span data-stu-id="9a7f8-143">Store Execution</span></span>  

 <span data-ttu-id="9a7f8-144">Im Allgemeinen werden Ausdrücke in LINQ to Entities auf dem Server ausgewertet, und das Verhalten der Ausdrücke richtet sich nicht nach der CLR-Semantik, sondern nach der Semantik der Datenquelle.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-144">In general, expressions in LINQ to Entities are evaluated on the server, and the behavior of the expression should not be expected to follow common language runtime (CLR) semantics, but those of the data source.</span></span> <span data-ttu-id="9a7f8-145">Dies gilt jedoch nicht, wenn der Ausdruck z. B. auf dem Client ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-145">There are exceptions to this, however, such as when the expression is executed on the client.</span></span> <span data-ttu-id="9a7f8-146">Dies kann zu unerwarteten Ergebnissen führen, wenn sich beispielsweise Server und Client in unterschiedlichen Zeitzonen befinden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-146">This could cause unexpected results, for example when the server and client are in different time zones.</span></span>  
  
 <span data-ttu-id="9a7f8-147">Einige Ausdrücke in der Abfrage werden möglicherweise auf dem Client ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-147">Some expressions in the query might be executed on the client.</span></span> <span data-ttu-id="9a7f8-148">Im Allgemeinen findet der größte Teil der Abfrageausführung auf dem Server statt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-148">In general, most query execution is expected to occur on the server.</span></span> <span data-ttu-id="9a7f8-149">Neben Methoden, die für der Datenquelle zugeordnete Abfrageelemente ausgeführt werden, gibt es häufig Ausdrücke in der Abfrage, die lokal ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-149">Aside from methods executed against query elements mapped to the data source, there are often expressions in the query that can be executed locally.</span></span> <span data-ttu-id="9a7f8-150">Bei der lokalen Ausführung eines Abfrageausdrucks wird ein Wert zurückgegeben, der für die Ausführung der Abfrage oder die Konstruktion des Ergebnisses verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-150">Local execution of a query expression yields a value that can be used in the query execution or result construction.</span></span>  
  
 <span data-ttu-id="9a7f8-151">Bestimmte Operationen werden stets auf dem Client ausgeführt. Dazu gehören die Bindung von Werten, Unterausdrücken und Unterabfragen von Abschlüssen sowie die Materialisierung von Objekten in Abfrageergebnisse.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-151">Certain operations are always executed on the client, such as binding of values, sub expressions, sub queries from closures, and materialization of objects into query results.</span></span> <span data-ttu-id="9a7f8-152">Das bedeutet, dass diese Elemente (beispielsweise Parameterwerte) während der Ausführung nicht aktualisiert werden können.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-152">The net effect of this is that these elements (for example, parameter values) cannot be updated during the execution.</span></span> <span data-ttu-id="9a7f8-153">Anonyme Typen können inline in der Datenquelle erstellt werden. Davon sollte jedoch nicht ausgegangen werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-153">Anonymous types can be constructed inline on the data source, but should not be assumed to do so.</span></span> <span data-ttu-id="9a7f8-154">Inlinegruppierungen können ebenfalls in der Datenquelle erstellt werden. Davon sollte jedoch ebenfalls nicht in jedem Fall ausgegangen werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-154">Inline groupings can be constructed in the data source, as well, but this should not be assumed in every instance.</span></span> <span data-ttu-id="9a7f8-155">Im Allgemeinen sollten keine Annahmen darüber gemacht werden, was auf dem Server erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-155">In general, it is best not to make any assumptions about what is constructed on the server.</span></span>  
  
 <span data-ttu-id="9a7f8-156">In diesem Abschnitt werden die Szenarios, in denen Code lokal auf dem Client ausgeführt wird, beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-156">This section describes the scenarios in which code is executed locally on the client.</span></span> <span data-ttu-id="9a7f8-157">Weitere Informationen darüber, welche Typen von Ausdrücken lokal ausgeführt werden, finden Sie unter [Ausdrücke in LINQ to Entities Abfragen](expressions-in-linq-to-entities-queries.md).</span><span class="sxs-lookup"><span data-stu-id="9a7f8-157">For more information about which types of expressions are executed locally, see [Expressions in LINQ to Entities Queries](expressions-in-linq-to-entities-queries.md).</span></span>  
  
### <a name="literals-and-parameters"></a><span data-ttu-id="9a7f8-158">Literale und Parameter</span><span class="sxs-lookup"><span data-stu-id="9a7f8-158">Literals and Parameters</span></span>  

 <span data-ttu-id="9a7f8-159">Lokale Variablen, wie die `orderID`-Variable im folgenden Beispiel, werden auf dem Client ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-159">Local variables, such as the `orderID` variable in the following example, are evaluated on the client.</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#LiteralParameter1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#literalparameter1)]
 [!code-vb[DP L2E Conceptual Examples#LiteralParameter1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#literalparameter1)]  
  
 <span data-ttu-id="9a7f8-160">Methodenparameter werden ebenfalls auf dem Client ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-160">Method parameters are also evaluated on the client.</span></span> <span data-ttu-id="9a7f8-161">Der unten der `orderID`-Methode übergebene `MethodParameterExample`-Parameter ist ein Beispiel dafür.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-161">The `orderID` parameter passed into the `MethodParameterExample` method, below, is an example.</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#MethodParameterExample](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#methodparameterexample)]
 [!code-vb[DP L2E Conceptual Examples#MethodParameterExample](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#methodparameterexample)]  
  
### <a name="casting-literals-on-the-client"></a><span data-ttu-id="9a7f8-162">Umwandeln von Literalen auf dem Client</span><span class="sxs-lookup"><span data-stu-id="9a7f8-162">Casting Literals on the Client</span></span>  

 <span data-ttu-id="9a7f8-163">Umwandlungen von `null` in einen CLR-Typ werden auf dem Client ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="9a7f8-163">Casting from `null` to a CLR type is executed on the client:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#NullCastToString](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#nullcasttostring)]
 [!code-vb[DP L2E Conceptual Examples#NullCastToString](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#nullcasttostring)]  
  
 <span data-ttu-id="9a7f8-164">Umwandlungen in einen Typ, wie ein <xref:System.Decimal>, das NULL-Werte zulässt, werden auf dem Client ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="9a7f8-164">Casting to a type, such as a nullable <xref:System.Decimal>, is executed on the client:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CastToNullable](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#casttonullable)]
 [!code-vb[DP L2E Conceptual Examples#CastToNullable](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#casttonullable)]  
  
### <a name="constructors-for-literals"></a><span data-ttu-id="9a7f8-165">Konstruktoren für Literale</span><span class="sxs-lookup"><span data-stu-id="9a7f8-165">Constructors for Literals</span></span>  

 <span data-ttu-id="9a7f8-166">Neue CLR-Typen, die konzeptionellen Modelltypen zugeordnet werden können, werden auf dem Client ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="9a7f8-166">New CLR types that can be mapped to conceptual model types are executed on the client:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#ConstructorForLiteral](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#constructorforliteral)]
 [!code-vb[DP L2E Conceptual Examples#ConstructorForLiteral](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#constructorforliteral)]  
  
 <span data-ttu-id="9a7f8-167">Neue Arrays werden ebenfalls auf dem Client ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-167">New arrays are also executed on the client.</span></span>  
  
## <a name="store-exceptions"></a><span data-ttu-id="9a7f8-168">Speicherausnahmen</span><span class="sxs-lookup"><span data-stu-id="9a7f8-168">Store Exceptions</span></span>  

 <span data-ttu-id="9a7f8-169">Während der Abfrageausführung auftretende Speicherfehler werden an den Client übergeben und nicht zugeordnet oder behandelt.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-169">Any store errors that are encountered during query execution are passed up to the client, and are not mapped or handled.</span></span>  
  
## <a name="store-configuration"></a><span data-ttu-id="9a7f8-170">Speicherkonfiguration</span><span class="sxs-lookup"><span data-stu-id="9a7f8-170">Store Configuration</span></span>  

 <span data-ttu-id="9a7f8-171">Bei der Abfrageausführung im Speicher überschreibt die Speicherkonfiguration das Clientverhalten, und für alle Operationen und Ausdrücke wird Speichersemantik verwendet.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-171">When the query executes on the store, the store configuration overrides all client behaviors, and store semantics are expressed for all operations and expressions.</span></span> <span data-ttu-id="9a7f8-172">Das kann zu unterschiedlichem Verhalten von CLR- und Speicherausführung in Bereichen wie NULL-Vergleichen, GUID-Sortierung, Genauigkeit von Operationen mit nicht-präzisen Datentypen (wie Gleitkommatypen oder <xref:System.DateTime>) sowie Zeichenfolgenoperationen führen.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-172">This can result in a difference in behavior between CLR and store execution in areas such as null comparisons, GUID ordering, precision and accuracy of operations involving non-precise data types (such as floating point types or <xref:System.DateTime>), and string operations.</span></span> <span data-ttu-id="9a7f8-173">Bei der Beurteilung von Abfrageergebnissen sollten diese Punkte beachtet werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-173">It is important to keep this in mind when examining query results.</span></span>  
  
 <span data-ttu-id="9a7f8-174">Folgende Beispiele zeigen einige Unterschiede im Verhalten zwischen der CLR und SQL Server:</span><span class="sxs-lookup"><span data-stu-id="9a7f8-174">For example, the following are some differences in behavior between the CLR and SQL Server:</span></span>  
  
- <span data-ttu-id="9a7f8-175">SQL Server sortiert GUIDs anders als die CLR.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-175">SQL Server orders GUIDs differently than the CLR.</span></span>  
  
- <span data-ttu-id="9a7f8-176">Es können auch Unterschiede in der Ergebnisgenauigkeit beim Arbeiten mit dem Decimal-Typ auf SQL Server auftreten.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-176">There can also be differences in result precision when dealing with the Decimal type on SQL Server.</span></span> <span data-ttu-id="9a7f8-177">Der Grund dafür sind die Anforderungen fester Präzision des Dezimaltyps von SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-177">This is due to the fixed precision requirements of the SQL Server decimal type.</span></span> <span data-ttu-id="9a7f8-178">Beispielsweise ist der Durchschnitt der <xref:System.Decimal>-Werte 0,0 und 0,0 und 1,0 im Arbeitsspeicher des Clients 0,3333333333333333333333333333 und im Speicher 0,333333 (für die Standardpräzision des Dezimaltyps von SQL Server).</span><span class="sxs-lookup"><span data-stu-id="9a7f8-178">For example, the average of <xref:System.Decimal> values 0.0, 0.0, and 1.0 is 0.3333333333333333333333333333 in memory on the client, but 0.333333 in the store (based on the default precision for SQL Server’s decimal type).</span></span>  
  
- <span data-ttu-id="9a7f8-179">Einige Zeichenfolgenvergleichsvorgänge werden in SQL Server ebenfalls anders behandelt als in der CLR.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-179">Some string comparison operations are also handled differently in SQL Server than in the CLR.</span></span> <span data-ttu-id="9a7f8-180">Das Verhalten bei Zeichenfolgenvergleichen hängt von den Sortiereinstellungen auf dem Server ab.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-180">String comparison behavior depends on the collation settings on the server.</span></span>  
  
- <span data-ttu-id="9a7f8-181">Funktions- oder Methodenaufrufe, die in einer LINQ to Entities-Abfrage enthalten sind, werden kanonischen Funktionen im Entity Framework zugeordnet, die wiederum in Transact-SQL übersetzt und in der SQL Server-Datenbank ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-181">Function or method calls, when included in a LINQ to Entities query, are mapped to canonical functions in the Entity Framework, which are then translated to Transact-SQL and executed on the SQL Server database.</span></span> <span data-ttu-id="9a7f8-182">Es gibt Fälle, in denen sich das Verhalten dieser zugeordneten Funktionen von dem der Implementierung in den Basisklassenbibliotheken unterscheidet.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-182">There are cases when the behavior these mapped functions exhibit might differ from the implementation in the base class libraries.</span></span> <span data-ttu-id="9a7f8-183">Ein Aufruf der <xref:System.String.Contains%2A>, <xref:System.String.StartsWith%2A>-Methode und der <xref:System.String.EndsWith%2A>-Methode mit einer leeren Zeichenfolge als Parameter gibt bei der Ausführung in der CLR `true` zurück und bei der Ausführung in SQL Server `false`.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-183">For example, calling the <xref:System.String.Contains%2A>, <xref:System.String.StartsWith%2A>, and <xref:System.String.EndsWith%2A> methods with an empty string as a parameter will return `true` when executed in the CLR, but will return `false` when executed in SQL Server.</span></span> <span data-ttu-id="9a7f8-184">Die <xref:System.String.EndsWith%2A>-Methode kann ebenfalls unterschiedliche Ergebnisse zurückgeben, da zwei Zeichenfolgen, die sich nur in nachfolgenden Leerzeichen unterscheiden, in SQL Server als gleich aufgefasst werden, in der CLR jedoch nicht.</span><span class="sxs-lookup"><span data-stu-id="9a7f8-184">The <xref:System.String.EndsWith%2A> method can also return different results because SQL Server considers two strings to be equal if they only differ in trailing white space, whereas the CLR considers them to be not equal.</span></span> <span data-ttu-id="9a7f8-185">Dies wird im folgenden Beispiel illustriert:</span><span class="sxs-lookup"><span data-stu-id="9a7f8-185">This is illustrated by the following example:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CanonicalFuncVsCLRBaseType](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#canonicalfuncvsclrbasetype)]
 [!code-vb[DP L2E Conceptual Examples#CanonicalFuncVsCLRBaseType](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#canonicalfuncvsclrbasetype)]
