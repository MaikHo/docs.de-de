---
title: Garbage Collection für Arbeitsstationen und Server im Vergleich
description: Informationen zur Garbage Collection für Arbeitsstationen und Server in .NET
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, workstation
- garbage collection, server
- workstation garbage collection
- server garbage collection
ms.openlocfilehash: 640b5f42c1f841c2537284e4721e827248e3d300
ms.sourcegitcommit: ef50c99928183a0bba75e07b9f22895cd4c480f8
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 08/07/2020
ms.locfileid: "87917017"
---
# <a name="workstation-and-server-garbage-collection"></a><span data-ttu-id="89736-103">Garbage Collection für die Arbeitsstation und Garbage Collection auf dem Server</span><span class="sxs-lookup"><span data-stu-id="89736-103">Workstation and server garbage collection</span></span>

<span data-ttu-id="89736-104">Der Garbage Collector optimiert sich selbst und kann in einer Vielzahl von Szenarien funktionieren.</span><span class="sxs-lookup"><span data-stu-id="89736-104">The garbage collector is self-tuning and can work in a wide variety of scenarios.</span></span> <span data-ttu-id="89736-105">Sie können jedoch [die Art der Garbage Collection](../../core/run-time-config/garbage-collector.md#flavors-of-garbage-collection) anhand der Merkmale der Workload festlegen.</span><span class="sxs-lookup"><span data-stu-id="89736-105">However, you can [set the type of garbage collection](../../core/run-time-config/garbage-collector.md#flavors-of-garbage-collection) based on the characteristics of the workload.</span></span> <span data-ttu-id="89736-106">Die CLR stellt mehrere Arten der Garbage Collection bereit:</span><span class="sxs-lookup"><span data-stu-id="89736-106">The CLR provides the following types of garbage collection:</span></span>

- <span data-ttu-id="89736-107">Die Garbage Collection (GC) für Arbeitsstationen, die für Client-Apps konzipiert ist.</span><span class="sxs-lookup"><span data-stu-id="89736-107">Workstation garbage collection (GC), which is designed for client apps.</span></span> <span data-ttu-id="89736-108">Dabei handelt es sich um die GC-Standardmethode für eigenständige Apps.</span><span class="sxs-lookup"><span data-stu-id="89736-108">It's the default GC flavor for standalone apps.</span></span> <span data-ttu-id="89736-109">Für gehostete Apps, z. B. die von ASP.NET gehosteten Apps, bestimmt der Host die GC-Standardkonfiguration.</span><span class="sxs-lookup"><span data-stu-id="89736-109">For hosted apps, for example, those hosted by ASP.NET, the host determines the default GC flavor.</span></span>

  <span data-ttu-id="89736-110">Die Garbage Collection für die Arbeitsstation kann gleichzeitig oder nicht gleichzeitig erfolgen.</span><span class="sxs-lookup"><span data-stu-id="89736-110">Workstation garbage collection can be concurrent or non-concurrent.</span></span> <span data-ttu-id="89736-111">Die gleichzeitige (oder *im Hintergrund* stattfindende) Garbage Collection ermöglicht, dass verwaltete Threads während einer Garbage Collection Vorgänge fortsetzen können.</span><span class="sxs-lookup"><span data-stu-id="89736-111">Concurrent (or *background*) garbage collection enables managed threads to continue operations during a garbage collection.</span></span> <span data-ttu-id="89736-112">Ab .NET Framework 4 wird die [gleichzeitige Garbage Collection](background-gc.md#concurrent-garbage-collection) durch die [Garbage Collection im Hintergrund](background-gc.md) ersetzt.</span><span class="sxs-lookup"><span data-stu-id="89736-112">[Background garbage collection](background-gc.md) replaces [concurrent garbage collection](background-gc.md#concurrent-garbage-collection) in .NET Framework 4 and later versions.</span></span>

- <span data-ttu-id="89736-113">Garbage Collection für Server, die für Serveranwendungen vorgesehen ist, die einen hohen Durchsatz und eine hohe Skalierbarkeit erfordern.</span><span class="sxs-lookup"><span data-stu-id="89736-113">Server garbage collection, which is intended for server applications that need high throughput and scalability.</span></span>

  - <span data-ttu-id="89736-114">In .NET Core kann die Garbage Collection auf dem Server nicht-gleichzeitig oder im Hintergrund ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="89736-114">In .NET Core, server garbage collection can be non-concurrent or background.</span></span>

  - <span data-ttu-id="89736-115">In .NET Framework 4.5 und höher kann die Garbage Collection auf dem Server nicht-gleichzeitig oder im Hintergrund ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="89736-115">In .NET Framework 4.5 and later versions, server garbage collection can be non-concurrent or background.</span></span> <span data-ttu-id="89736-116">In .NET Framework 4 und früheren Versionen erfolgt die Garbage Collection auf dem Server gleichzeitig.</span><span class="sxs-lookup"><span data-stu-id="89736-116">In .NET Framework 4 and previous versions, server garbage collection is non-concurrent.</span></span>

<span data-ttu-id="89736-117">Die folgende Abbildung zeigt die dedizierten Threads, die die Garbage Collection auf einem Server ausführen:</span><span class="sxs-lookup"><span data-stu-id="89736-117">The following illustration shows the dedicated threads that perform the garbage collection on a server:</span></span>

![Threads für Garbage Collection auf dem Server](media/gc-server.png)

## <a name="performance-considerations"></a><span data-ttu-id="89736-119">Überlegungen zur Leistung</span><span class="sxs-lookup"><span data-stu-id="89736-119">Performance considerations</span></span>

### <a name="workstation-gc"></a><span data-ttu-id="89736-120">Arbeitsstation-GC</span><span class="sxs-lookup"><span data-stu-id="89736-120">Workstation GC</span></span>

<span data-ttu-id="89736-121">Im Folgenden finden Sie Überlegungen zu Threading und Leistung der Garbage Collection auf Arbeitsstationen:</span><span class="sxs-lookup"><span data-stu-id="89736-121">The following are threading and performance considerations for workstation garbage collection:</span></span>

- <span data-ttu-id="89736-122">Die Garbage Collection erfolgt auf dem Benutzerthread, der die Garbage Collection ausgelöst hat, und die Priorität bleibt unverändert.</span><span class="sxs-lookup"><span data-stu-id="89736-122">The collection occurs on the user thread that triggered the garbage collection and remains at the same priority.</span></span> <span data-ttu-id="89736-123">Da Benutzerthreads in der Regel mit normaler Priorität ausgeführt werden, muss der Garbage Collector (der auf einem Thread mit normaler Priorität ausgeführt wird) mit anderen Threads um CPU-Zeit konkurrieren.</span><span class="sxs-lookup"><span data-stu-id="89736-123">Because user threads typically run at normal priority, the garbage collector (which runs on a normal priority thread) must compete with other threads for CPU time.</span></span> <span data-ttu-id="89736-124">(Threads, die nativen Code ausführen, werden bei der Garbage Collection für die Arbeitsstation bzw. auf dem Server nicht angehalten.)</span><span class="sxs-lookup"><span data-stu-id="89736-124">(Threads that run native code are not suspended on either server or workstation garbage collection.)</span></span>

- <span data-ttu-id="89736-125">Die Garbage Collection für die Arbeitsstation wird immer auf einem Computer verwendet, der nur einen Prozessor besitzt, unabhängig von der [Konfigurationseinstellung](../../core/run-time-config/garbage-collector.md#workstation-vs-server).</span><span class="sxs-lookup"><span data-stu-id="89736-125">Workstation garbage collection is always used on a computer that has only one processor, regardless of the [configuration setting](../../core/run-time-config/garbage-collector.md#workstation-vs-server).</span></span>

### <a name="server-gc"></a><span data-ttu-id="89736-126">Server-GC</span><span class="sxs-lookup"><span data-stu-id="89736-126">Server GC</span></span>

<span data-ttu-id="89736-127">Im Folgenden finden Sie Überlegungen zu Threading und Leistung der Garbage Collection auf Servern:</span><span class="sxs-lookup"><span data-stu-id="89736-127">The following are threading and performance considerations for server garbage collection:</span></span>

- <span data-ttu-id="89736-128">Die Garbage Collection erfolgt auf mehreren dedizierten Threads, die mit der Prioritätsebene `THREAD_PRIORITY_HIGHEST` ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="89736-128">The collection occurs on multiple dedicated threads that are running at `THREAD_PRIORITY_HIGHEST` priority level.</span></span>

- <span data-ttu-id="89736-129">Für jede CPU werden ein Heap und ein dedizierter Thread zum Ausführen der Garbage Collection bereitgestellt, und die Auflistung für die Heaps findet zur gleichen Zeit statt.</span><span class="sxs-lookup"><span data-stu-id="89736-129">A heap and a dedicated thread to perform garbage collection are provided for each CPU, and the heaps are collected at the same time.</span></span> <span data-ttu-id="89736-130">Jeder Heap enthält einen kleinen Objektheap und einen großen Objektheap, und auf alle Heaps kann über den Benutzercode zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="89736-130">Each heap contains a small object heap and a large object heap, and all heaps can be accessed by user code.</span></span> <span data-ttu-id="89736-131">Objekte auf verschiedenen Heaps können aufeinander verweisen.</span><span class="sxs-lookup"><span data-stu-id="89736-131">Objects on different heaps can refer to each other.</span></span>

- <span data-ttu-id="89736-132">Da mehrere Garbage Collection-Threads zusammenarbeiten, ist die Garbage Collection auf dem Server bei gleicher Heapgröße schneller als die Garbage Collection für die Arbeitsstation.</span><span class="sxs-lookup"><span data-stu-id="89736-132">Because multiple garbage collection threads work together, server garbage collection is faster than workstation garbage collection on the same size heap.</span></span>

- <span data-ttu-id="89736-133">Bei der Garbage Collection auf dem Server sind die Segmente häufig größer.</span><span class="sxs-lookup"><span data-stu-id="89736-133">Server garbage collection often has larger size segments.</span></span> <span data-ttu-id="89736-134">Dies ist jedoch nur eine allgemeine Angabe: Die Segmentgröße ist implementierungsspezifisch und unterliegt möglicherweise Änderungen.</span><span class="sxs-lookup"><span data-stu-id="89736-134">However, this is only a generalization: segment size is implementation-specific and is subject to change.</span></span> <span data-ttu-id="89736-135">Wenn Sie eine Anwendung optimieren, sollten Sie keine Annahmen über die Größe der Segmente machen, die vom Garbage Collector zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="89736-135">Don't make assumptions about the size of segments allocated by the garbage collector when tuning your app.</span></span>

- <span data-ttu-id="89736-136">Die Garbage Collection auf dem Server kann ressourcenintensiv sein.</span><span class="sxs-lookup"><span data-stu-id="89736-136">Server garbage collection can be resource-intensive.</span></span> <span data-ttu-id="89736-137">Nehmen Sie beispielsweise an, dass auf einem Computer mit vier Prozessoren zwölf Prozesse vorhanden sind, in denen die Garbage Collection auf dem Server ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="89736-137">For example, imagine that there are 12 processes that use server GC running on a computer that has four processors.</span></span> <span data-ttu-id="89736-138">Wenn alle Prozesse die Garbage Collection gleichzeitig durchführen, würden sie sich gegenseitig behindern, da auf demselben Prozessor zwölf Threads geplant würden.</span><span class="sxs-lookup"><span data-stu-id="89736-138">If all the processes happen to collect garbage at the same time, they would interfere with each other, as there would be 12 threads scheduled on the same processor.</span></span> <span data-ttu-id="89736-139">Wenn die Prozesse aktiv sind, ist es nicht empfehlenswert, dass sie alle die Garbage Collection auf dem Server verwenden.</span><span class="sxs-lookup"><span data-stu-id="89736-139">If the processes are active, it's not a good idea to have them all use server GC.</span></span>

<span data-ttu-id="89736-140">Wenn Sie Hunderte von Instanzen einer Anwendung ausführen, sollten Sie erwägen, eine Garbage Collection für die Arbeitsstation mit deaktivierter gleichzeitiger Garbage Collection zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="89736-140">If you're running hundreds of instances of an application, consider using workstation garbage collection with concurrent garbage collection disabled.</span></span> <span data-ttu-id="89736-141">Dies führt zu weniger Kontextwechseln, wodurch die Leistung verbessert werden kann.</span><span class="sxs-lookup"><span data-stu-id="89736-141">This will result in less context switching, which can improve performance.</span></span>

## <a name="see-also"></a><span data-ttu-id="89736-142">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="89736-142">See also</span></span>

- [<span data-ttu-id="89736-143">Garbage Collection im Hintergrund</span><span class="sxs-lookup"><span data-stu-id="89736-143">Background garbage collection</span></span>](background-gc.md)
- [<span data-ttu-id="89736-144">Runtimekonfigurationsoptionen für die Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="89736-144">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
