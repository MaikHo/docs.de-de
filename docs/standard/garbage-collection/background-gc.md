---
title: Garbage Collection im Hintergrund
description: Informationen zur Garbage Collection im Hintergrund für .NET und Unterschiede zur Garbage Collection für Arbeitsstationen und Server
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, background
- background garbage collection
ms.openlocfilehash: bf88c14b2aeed94a548b6116749fa8669576afe1
ms.sourcegitcommit: ef50c99928183a0bba75e07b9f22895cd4c480f8
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 08/07/2020
ms.locfileid: "87916992"
---
# <a name="background-garbage-collection"></a><span data-ttu-id="aa32b-103">Garbage Collection im Hintergrund</span><span class="sxs-lookup"><span data-stu-id="aa32b-103">Background garbage collection</span></span>

<span data-ttu-id="aa32b-104">Bei der Garbage Collection (GC) im Hintergrund werden kurzlebige Generationen (0 und 1) bei Bedarf bereinigt, während die Garbage Collection von Generation 2 ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="aa32b-104">In background garbage collection (GC), ephemeral generations (0 and 1) are collected as needed while the collection of generation 2 is in progress.</span></span> <span data-ttu-id="aa32b-105">Die Garbage Collection wird für einen oder mehrere dedizierte Threads ausgeführt – je nachdem ob sie im Hintergrund oder für Server ausgeführt wird – und gilt nur für Generation 2.</span><span class="sxs-lookup"><span data-stu-id="aa32b-105">Background garbage collection is performed on one or more dedicated threads, depending on whether it's background or server GC, and applies only to generation 2 collections.</span></span>

<span data-ttu-id="aa32b-106">Die Garbage Collection im Hintergrund ist standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="aa32b-106">Background garbage collection is enabled by default.</span></span> <span data-ttu-id="aa32b-107">Sie kann mit der Konfigurationseinstellung [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) in .NET Framework-Apps oder der Einstellung [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#background-gc) in .NET Core- oder .NET 5-Apps (oder höher) aktiviert oder deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="aa32b-107">It can be enabled or disabled with the [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) configuration setting in .NET Framework apps or the [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#background-gc) setting in .NET Core and .NET 5 and later apps.</span></span>

> [!NOTE]
> <span data-ttu-id="aa32b-108">Ab .NET Framework 4 ersetzt die Garbage Collection im Hintergrund die [gleichzeitige Garbage Collection](#concurrent-garbage-collection).</span><span class="sxs-lookup"><span data-stu-id="aa32b-108">Background garbage collection replaces [concurrent garbage collection](#concurrent-garbage-collection) and is available in .NET Framework 4 and later versions.</span></span> <span data-ttu-id="aa32b-109">In .NET Framework 4 wird sie nur für die Garbage Collection für *Arbeitsstationen* unterstützt.</span><span class="sxs-lookup"><span data-stu-id="aa32b-109">In .NET Framework 4, it's supported only for *workstation* garbage collection.</span></span> <span data-ttu-id="aa32b-110">Ab .NET Framework 4.5 ist die Garbage Collection im Hintergrund für *Arbeitsstationen* und *Server* verfügbar.</span><span class="sxs-lookup"><span data-stu-id="aa32b-110">Starting with .NET Framework 4.5, background garbage collection is available for both *workstation* and *server* garbage collection.</span></span>

<span data-ttu-id="aa32b-111">Eine Garbage Collection für kurzlebige Generationen, die während der Garbage Collection im Hintergrund stattfindet, wird als *Garbage Collection im Vordergrund* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="aa32b-111">A collection on ephemeral generations during background garbage collection is known as *foreground* garbage collection.</span></span> <span data-ttu-id="aa32b-112">Wenn Garbage Collections im Vordergrund stattfinden, werden alle verwalteten Threads angehalten.</span><span class="sxs-lookup"><span data-stu-id="aa32b-112">When foreground garbage collections occur, all managed threads are suspended.</span></span>

<span data-ttu-id="aa32b-113">Wenn eine Garbage Collection im Hintergrund ausgeführt wird und Sie genügend Objekte in Generation 0 zugeordnet haben, führt die CLR eine Garbage Collection der Generation 0 oder der Generation 1 im Vordergrund aus.</span><span class="sxs-lookup"><span data-stu-id="aa32b-113">When background garbage collection is in progress and you've allocated enough objects in generation 0, the CLR performs a generation 0 or generation 1 foreground garbage collection.</span></span> <span data-ttu-id="aa32b-114">Der dedizierte Thread der Garbage Collection im Hintergrund prüft häufig, ob eine Anforderung für die Garbage Collection im Vordergrund besteht.</span><span class="sxs-lookup"><span data-stu-id="aa32b-114">The dedicated background garbage collection thread checks at frequent safe points to determine whether there is a request for foreground garbage collection.</span></span> <span data-ttu-id="aa32b-115">Trifft dies zu, wird die Garbage Collection im Hintergrund angehalten, damit die Garbage Collection im Vordergrund stattfinden kann.</span><span class="sxs-lookup"><span data-stu-id="aa32b-115">If there is, the background collection suspends itself so that foreground garbage collection can occur.</span></span> <span data-ttu-id="aa32b-116">Nachdem die Garbage Collection im Vordergrund abgeschlossen wurde, werden dedizierte Threads der Garbage Collection im Hintergrund und die Benutzerthreads fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="aa32b-116">After the foreground garbage collection is completed, the dedicated background garbage collection threads and user threads resume.</span></span>

<span data-ttu-id="aa32b-117">Die Garbage Collection im Hintergrund beseitigt die von der gleichzeitigen Garbage Collection auferlegten Speicherbelegungseinschränkungen, da kurzlebige Garbage Collections während der Garbage Collection im Hintergrund stattfinden können.</span><span class="sxs-lookup"><span data-stu-id="aa32b-117">Background garbage collection removes allocation restrictions imposed by concurrent garbage collection, because ephemeral garbage collections can occur during background garbage collection.</span></span> <span data-ttu-id="aa32b-118">Mit der Garbage Collection im Hintergrund können inaktive Objekte in kurzlebigen Generationen entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="aa32b-118">Background garbage collection can remove dead objects in ephemeral generations.</span></span> <span data-ttu-id="aa32b-119">Ferner kann der Heap bei Bedarf während einer Garbage Collection der Generation 1 erweitert werden.</span><span class="sxs-lookup"><span data-stu-id="aa32b-119">It can also expand the heap if needed during a generation 1 garbage collection.</span></span>

## <a name="background-workstation-vs-server-gc"></a><span data-ttu-id="aa32b-120">Garbage Collection im Hintergrund für Arbeitsstationen und Server im Vergleich</span><span class="sxs-lookup"><span data-stu-id="aa32b-120">Background workstation vs. server GC</span></span>

<span data-ttu-id="aa32b-121">Ab .NET Framework 4.5 ist die Garbage Collection im Hintergrund für Server verfügbar.</span><span class="sxs-lookup"><span data-stu-id="aa32b-121">Starting with .NET Framework 4.5, background garbage collection is available for server GC.</span></span> <span data-ttu-id="aa32b-122">Die Garbage Collection im Hintergrund ist der Standardmodus für die Garbage Collection auf Servern.</span><span class="sxs-lookup"><span data-stu-id="aa32b-122">Background GC is the default mode for server garbage collection.</span></span>

<span data-ttu-id="aa32b-123">Die Garbage Collection im Hintergrund auf dem Server ähnelt der Garbage Collection im Hintergrund auf einer Arbeitsstation, es gibt jedoch einige Unterschiede:</span><span class="sxs-lookup"><span data-stu-id="aa32b-123">Background server garbage collection functions similarly to background workstation garbage collection, but there are a few differences:</span></span>

- <span data-ttu-id="aa32b-124">Die Garbage Collection im Hintergrund auf der Arbeitsstation verwendet einen dedizierten Thread für die Garbage Collection im Hintergrund, während die Garbage Collection im Hintergrund auf dem Server mehrere Threads verwendet.</span><span class="sxs-lookup"><span data-stu-id="aa32b-124">Background workstation garbage collection uses one dedicated background garbage collection thread, whereas background server garbage collection uses multiple threads.</span></span> <span data-ttu-id="aa32b-125">In der Regel wird ein dedizierter Thread für jeden logischen Prozessor verwendet.</span><span class="sxs-lookup"><span data-stu-id="aa32b-125">Typically, there's a dedicated thread for each logical processor.</span></span>

- <span data-ttu-id="aa32b-126">Anders als der Garbage-Collection-Thread im Hintergrund auf einer Arbeitsstation tritt bei diesen Threads auf Servern kein Timeout auf.</span><span class="sxs-lookup"><span data-stu-id="aa32b-126">Unlike the workstation background garbage collection thread, the background server GC threads do not time out.</span></span>

<span data-ttu-id="aa32b-127">Die folgende Abbildung veranschaulicht eine Garbage Collection im Hintergrund für einen separaten dedizierten Thread auf einer *Arbeitsstation*:</span><span class="sxs-lookup"><span data-stu-id="aa32b-127">The following illustration shows background *workstation* garbage collection performed on a separate, dedicated thread:</span></span>

![Garbage Collection auf Arbeitsstationen im Hintergrund](media/fundamentals/background-workstation-garbage-collection.png)

<span data-ttu-id="aa32b-129">Die folgende Abbildung veranschaulicht eine Garbage Collection im Hintergrund für einen separaten dedizierten Thread auf einem *Server*:</span><span class="sxs-lookup"><span data-stu-id="aa32b-129">The following illustration shows background *server* garbage collection performed on separate, dedicated threads:</span></span>

![Garbage Collection auf dem Server im Hintergrund](media/fundamentals/background-server-garbage-collection.png)

## <a name="concurrent-garbage-collection"></a><span data-ttu-id="aa32b-131">Concurrent garbage collection</span><span class="sxs-lookup"><span data-stu-id="aa32b-131">Concurrent garbage collection</span></span>

> [!TIP]
> <span data-ttu-id="aa32b-132">Dieser Abschnitt gilt für:</span><span class="sxs-lookup"><span data-stu-id="aa32b-132">This section applies to:</span></span>
>
> - <span data-ttu-id="aa32b-133">.NET Framework 3.5 und früher für die Garbage Collection für Arbeitsstationen</span><span class="sxs-lookup"><span data-stu-id="aa32b-133">.NET Framework 3.5 and earlier for workstation garbage collection</span></span>
> - <span data-ttu-id="aa32b-134">.NET Framework 4 und früher für die Garbage Collection auf dem Server</span><span class="sxs-lookup"><span data-stu-id="aa32b-134">.NET Framework 4 and earlier for server garbage collection</span></span>
>
> <span data-ttu-id="aa32b-135">Die gleichzeitige Garbage Collection wird in späteren Versionen durch die Garbage Collection im Hintergrund ersetzt.</span><span class="sxs-lookup"><span data-stu-id="aa32b-135">Concurrent garbage is replaced by background garbage collection in later versions.</span></span>

<span data-ttu-id="aa32b-136">Bei der Garbage Collection für Arbeitsstationen oder Server können Sie die [gleichzeitige Garbage Collection aktivieren](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md). Diese ermöglicht die gleichzeitige Ausführung von Threads mit einem dedizierten Thread, der die Garbage Collection nahezu die ganze Zeit ausführt.</span><span class="sxs-lookup"><span data-stu-id="aa32b-136">In workstation or server garbage collection, you can [enable concurrent garbage collection](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), which enables threads to run concurrently with a dedicated thread that performs the garbage collection for most of the duration of the collection.</span></span> <span data-ttu-id="aa32b-137">Diese Option wirkt sich nur auf die Garbage Collection in Generation 2 aus. In Generation 0 und 1 findet keine gleichzeitigen Garbage Collection statt, da diese schnell beendet wird.</span><span class="sxs-lookup"><span data-stu-id="aa32b-137">This option affects only garbage collections in generation 2; generations 0 and 1 are always non-concurrent because they finish fast.</span></span>

<span data-ttu-id="aa32b-138">Dank der gleichzeitigen Garbage Collection ist die Reaktionsfähigkeit interaktiver Anwendungen besser, da die für die Garbage Collection notwendigen Pausen minimiert werden.</span><span class="sxs-lookup"><span data-stu-id="aa32b-138">Concurrent garbage collection enables interactive applications to be more responsive by minimizing pauses for a collection.</span></span> <span data-ttu-id="aa32b-139">Verwaltete Threads können weiterhin die meiste Zeit ausgeführt werden, während der Thread der gleichzeitigen Garbage Collection ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="aa32b-139">Managed threads can continue to run most of the time while the concurrent garbage collection thread is running.</span></span> <span data-ttu-id="aa32b-140">Dies verkürzt die Pausen während einer Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="aa32b-140">This design results in shorter pauses while a garbage collection is occurring.</span></span>

<span data-ttu-id="aa32b-141">Die gleichzeitige Garbage Collection wird auf einem dedizierten Thread ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="aa32b-141">Concurrent garbage collection is performed on a dedicated thread.</span></span> <span data-ttu-id="aa32b-142">Standardmäßig führt die CLR die Garbage Collection für die Arbeitsstation mit aktivierter gleichzeitiger Garbage Collection auf Computern mit einem oder mehreren Prozessoren aus.</span><span class="sxs-lookup"><span data-stu-id="aa32b-142">By default, the CLR runs workstation garbage collection with concurrent garbage collection enabled on both single-processor and multi-processor computers.</span></span>

<span data-ttu-id="aa32b-143">Die folgende Abbildung zeigt eine parallele Garbage Collection für einen separaten dedizierten Thread.</span><span class="sxs-lookup"><span data-stu-id="aa32b-143">The following illustration shows concurrent garbage collection performed on a separate dedicated thread.</span></span>

![Threads für parallele Garbage Collection](media/gc-concurrent.png)

## <a name="see-also"></a><span data-ttu-id="aa32b-145">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="aa32b-145">See also</span></span>

- [<span data-ttu-id="aa32b-146">Garbage Collection für die Arbeitsstation und Garbage Collection auf dem Server</span><span class="sxs-lookup"><span data-stu-id="aa32b-146">Workstation and server garbage collection</span></span>](workstation-server-gc.md)
- [<span data-ttu-id="aa32b-147">Runtimekonfigurationsoptionen für die Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="aa32b-147">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
